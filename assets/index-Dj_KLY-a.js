function j1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function M1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P0={exports:{}},Yc={},D0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=Symbol.for("react.element"),V1=Symbol.for("react.portal"),U1=Symbol.for("react.fragment"),F1=Symbol.for("react.strict_mode"),z1=Symbol.for("react.profiler"),B1=Symbol.for("react.provider"),$1=Symbol.for("react.context"),q1=Symbol.for("react.forward_ref"),W1=Symbol.for("react.suspense"),H1=Symbol.for("react.memo"),K1=Symbol.for("react.lazy"),Ry=Symbol.iterator;function G1(t){return t===null||typeof t!="object"?null:(t=Ry&&t[Ry]||t["@@iterator"],typeof t=="function"?t:null)}var O0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L0=Object.assign,j0={};function Eo(t,e,n){this.props=t,this.context=e,this.refs=j0,this.updater=n||O0}Eo.prototype.isReactComponent={};Eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function M0(){}M0.prototype=Eo.prototype;function Rp(t,e,n){this.props=t,this.context=e,this.refs=j0,this.updater=n||O0}var Ap=Rp.prototype=new M0;Ap.constructor=Rp;L0(Ap,Eo.prototype);Ap.isPureReactComponent=!0;var Ay=Array.isArray,V0=Object.prototype.hasOwnProperty,Np={current:null},U0={key:!0,ref:!0,__self:!0,__source:!0};function F0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)V0.call(e,r)&&!U0.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ul,type:t,key:i,ref:o,props:s,_owner:Np.current}}function Q1(t,e){return{$$typeof:ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ul}function Y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ny=/\/+/g;function ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Y1(""+t.key):e.toString(36)}function Ru(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ul:case V1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ah(o,0):r,Ay(s)?(n="",t!=null&&(n=t.replace(Ny,"$&/")+"/"),Ru(s,e,n,"",function(c){return c})):s!=null&&(bp(s)&&(s=Q1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ny,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ay(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+ah(i,a);o+=Ru(i,e,n,u,s)}else if(u=G1(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+ah(i,a++),o+=Ru(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nu(t,e,n){if(t==null)return t;var r=[],s=0;return Ru(t,r,"","",function(i){return e.call(n,i,s++)}),r}function X1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Au={transition:null},J1={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Au,ReactCurrentOwner:Np};function z0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:nu,forEach:function(t,e,n){nu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nu(t,function(){e++}),e},toArray:function(t){return nu(t,function(e){return e})||[]},only:function(t){if(!bp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Eo;te.Fragment=U1;te.Profiler=z1;te.PureComponent=Rp;te.StrictMode=F1;te.Suspense=W1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J1;te.act=z0;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=L0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Np.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)V0.call(e,u)&&!U0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ul,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:$1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B1,_context:t},t.Consumer=t};te.createElement=F0;te.createFactory=function(t){var e=F0.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:q1,render:t}};te.isValidElement=bp;te.lazy=function(t){return{$$typeof:K1,_payload:{_status:-1,_result:t},_init:X1}};te.memo=function(t,e){return{$$typeof:H1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Au.transition;Au.transition={};try{t()}finally{Au.transition=e}};te.unstable_act=z0;te.useCallback=function(t,e){return Mt.current.useCallback(t,e)};te.useContext=function(t){return Mt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};te.useEffect=function(t,e){return Mt.current.useEffect(t,e)};te.useId=function(){return Mt.current.useId()};te.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Mt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};te.useRef=function(t){return Mt.current.useRef(t)};te.useState=function(t){return Mt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Mt.current.useTransition()};te.version="18.3.1";D0.exports=te;var x=D0.exports;const Ce=M1(x),Z1=j1({__proto__:null,default:Ce},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=x,tS=Symbol.for("react.element"),nS=Symbol.for("react.fragment"),rS=Object.prototype.hasOwnProperty,sS=eS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iS={key:!0,ref:!0,__self:!0,__source:!0};function B0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rS.call(e,r)&&!iS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:tS,type:t,key:i,ref:o,props:s,_owner:sS.current}}Yc.Fragment=nS;Yc.jsx=B0;Yc.jsxs=B0;P0.exports=Yc;var d=P0.exports,Zh={},$0={exports:{}},en={},q0={exports:{}},W0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var X=B.length;B.push(K);e:for(;0<X;){var ye=X-1>>>1,re=B[ye];if(0<s(re,K))B[ye]=K,B[X]=re,X=ye;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],X=B.pop();if(X!==K){B[0]=X;e:for(var ye=0,re=B.length,fe=re>>>1;ye<fe;){var Ft=2*(ye+1)-1,rn=B[Ft],Me=Ft+1,sn=B[Me];if(0>s(rn,X))Me<re&&0>s(sn,rn)?(B[ye]=sn,B[Me]=X,ye=Me):(B[ye]=rn,B[Ft]=X,ye=Ft);else if(Me<re&&0>s(sn,X))B[ye]=sn,B[Me]=X,ye=Me;else break e}}return K}function s(B,K){var X=B.sortIndex-K.sortIndex;return X!==0?X:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],f=1,p=null,y=3,E=!1,k=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=B)r(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(c)}}function b(B){if(R=!1,_(B),!k)if(n(u)!==null)k=!0,pt(O);else{var K=n(c);K!==null&&pe(b,K.startTime-B)}}function O(B,K){k=!1,R&&(R=!1,w(g),g=-1),E=!0;var X=y;try{for(_(K),p=n(u);p!==null&&(!(p.expirationTime>K)||B&&!P());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,y=p.priorityLevel;var re=ye(p.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?p.callback=re:p===n(u)&&r(u),_(K)}else r(u);p=n(u)}if(p!==null)var fe=!0;else{var Ft=n(c);Ft!==null&&pe(b,Ft.startTime-K),fe=!1}return fe}finally{p=null,y=X,E=!1}}var j=!1,S=null,g=-1,I=5,A=-1;function P(){return!(t.unstable_now()-A<I)}function D(){if(S!==null){var B=t.unstable_now();A=B;var K=!0;try{K=S(!0,B)}finally{K?N():(j=!1,S=null)}}else j=!1}var N;if(typeof v=="function")N=function(){v(D)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,nn=Se.port2;Se.port1.onmessage=D,N=function(){nn.postMessage(null)}}else N=function(){C(D,0)};function pt(B){S=B,j||(j=!0,N())}function pe(B,K){g=C(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||E||(k=!0,pt(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var X=y;y=K;try{return B()}finally{y=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=y;y=B;try{return K()}finally{y=X}},t.unstable_scheduleCallback=function(B,K,X){var ye=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=X+re,B={id:f++,callback:K,priorityLevel:B,startTime:X,expirationTime:re,sortIndex:-1},X>ye?(B.sortIndex=X,e(c,B),n(u)===null&&B===n(c)&&(R?(w(g),g=-1):R=!0,pe(b,X-ye))):(B.sortIndex=re,e(u,B),k||E||(k=!0,pt(O))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var K=y;return function(){var X=y;y=K;try{return B.apply(this,arguments)}finally{y=X}}}})(W0);q0.exports=W0;var oS=q0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=x,Zt=oS;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H0=new Set,Na={};function ui(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(Na[t]=e,t=0;t<e.length;t++)H0.add(e[t])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=Object.prototype.hasOwnProperty,lS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,by={},Py={};function uS(t){return ef.call(Py,t)?!0:ef.call(by,t)?!1:lS.test(t)?Py[t]=!0:(by[t]=!0,!1)}function cS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dS(t,e,n,r){if(e===null||typeof e>"u"||cS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pp=/[\-:]([a-z])/g;function Dp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pp,Dp);ht[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pp,Dp);ht[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pp,Dp);ht[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Op(t,e,n,r){var s=ht.hasOwnProperty(e)?ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dS(e,n,s,r)&&(n=null),r||s===null?uS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ru=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Di=Symbol.for("react.fragment"),Lp=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),G0=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.suspense_list"),Mp=Symbol.for("react.memo"),Mr=Symbol.for("react.lazy"),Q0=Symbol.for("react.offscreen"),Dy=Symbol.iterator;function Ho(t){return t===null||typeof t!="object"?null:(t=Dy&&t[Dy]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,lh;function na(t){if(lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lh=e&&e[1]||""}return`
`+lh+t}var uh=!1;function ch(t,e){if(!t||uh)return"";uh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{uh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?na(t):""}function hS(t){switch(t.tag){case 5:return na(t.type);case 16:return na("Lazy");case 13:return na("Suspense");case 19:return na("SuspenseList");case 0:case 2:case 15:return t=ch(t.type,!1),t;case 11:return t=ch(t.type.render,!1),t;case 1:return t=ch(t.type,!0),t;default:return""}}function sf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Di:return"Fragment";case Pi:return"Portal";case tf:return"Profiler";case Lp:return"StrictMode";case nf:return"Suspense";case rf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G0:return(t.displayName||"Context")+".Consumer";case K0:return(t._context.displayName||"Context")+".Provider";case jp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mp:return e=t.displayName||null,e!==null?e:sf(t.type)||"Memo";case Mr:e=t._payload,t=t._init;try{return sf(t(e))}catch{}}return null}function fS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sf(e);case 8:return e===Lp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pS(t){var e=Y0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function su(t){t._valueTracker||(t._valueTracker=pS(t))}function X0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function of(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J0(t,e){e=e.checked,e!=null&&Op(t,"checked",e,!1)}function af(t,e){J0(t,e);var n=cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lf(t,e.type,n):e.hasOwnProperty("defaultValue")&&lf(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ly(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lf(t,e,n){(e!=="number"||Zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ra=Array.isArray;function Ki(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ra(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cs(n)}}function Z0(t,e){var n=cs(e.value),r=cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function My(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ew(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ew(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iu,tw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iu=iu||document.createElement("div"),iu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ha={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mS=["Webkit","ms","Moz","O"];Object.keys(ha).forEach(function(t){mS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ha[e]=ha[t]})});function nw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ha.hasOwnProperty(t)&&ha[t]?(""+e).trim():e+"px"}function rw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=nw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var gS=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function df(t,e){if(e){if(gS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function Vp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pf=null,Gi=null,Qi=null;function Vy(t){if(t=hl(t)){if(typeof pf!="function")throw Error(F(280));var e=t.stateNode;e&&(e=td(e),pf(t.stateNode,t.type,e))}}function sw(t){Gi?Qi?Qi.push(t):Qi=[t]:Gi=t}function iw(){if(Gi){var t=Gi,e=Qi;if(Qi=Gi=null,Vy(t),e)for(t=0;t<e.length;t++)Vy(e[t])}}function ow(t,e){return t(e)}function aw(){}var dh=!1;function lw(t,e,n){if(dh)return t(e,n);dh=!0;try{return ow(t,e,n)}finally{dh=!1,(Gi!==null||Qi!==null)&&(aw(),iw())}}function Pa(t,e){var n=t.stateNode;if(n===null)return null;var r=td(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var mf=!1;if(hr)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){mf=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{mf=!1}function yS(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var fa=!1,ec=null,tc=!1,gf=null,vS={onError:function(t){fa=!0,ec=t}};function _S(t,e,n,r,s,i,o,a,u){fa=!1,ec=null,yS.apply(vS,arguments)}function wS(t,e,n,r,s,i,o,a,u){if(_S.apply(this,arguments),fa){if(fa){var c=ec;fa=!1,ec=null}else throw Error(F(198));tc||(tc=!0,gf=c)}}function ci(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uy(t){if(ci(t)!==t)throw Error(F(188))}function ES(t){var e=t.alternate;if(!e){if(e=ci(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uy(s),t;if(i===r)return Uy(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function cw(t){return t=ES(t),t!==null?dw(t):null}function dw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dw(t);if(e!==null)return e;t=t.sibling}return null}var hw=Zt.unstable_scheduleCallback,Fy=Zt.unstable_cancelCallback,xS=Zt.unstable_shouldYield,TS=Zt.unstable_requestPaint,Fe=Zt.unstable_now,IS=Zt.unstable_getCurrentPriorityLevel,Up=Zt.unstable_ImmediatePriority,fw=Zt.unstable_UserBlockingPriority,nc=Zt.unstable_NormalPriority,SS=Zt.unstable_LowPriority,pw=Zt.unstable_IdlePriority,Xc=null,zn=null;function kS(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Xc,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:AS,CS=Math.log,RS=Math.LN2;function AS(t){return t>>>=0,t===0?32:31-(CS(t)/RS|0)|0}var ou=64,au=4194304;function sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=sa(a):(i&=o,i!==0&&(r=sa(i)))}else o=n&~s,o!==0?r=sa(o):i!==0&&(r=sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),s=1<<n,r|=t[n],e&=~s;return r}function NS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Cn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=NS(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function yf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mw(){var t=ou;return ou<<=1,!(ou&4194240)&&(ou=64),t}function hh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function PS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Fp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function gw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yw,zp,vw,_w,ww,vf=!1,lu=[],Jr=null,Zr=null,es=null,Da=new Map,Oa=new Map,Fr=[],DS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zy(t,e){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Da.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oa.delete(e.pointerId)}}function Go(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=hl(e),e!==null&&zp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OS(t,e,n,r,s){switch(e){case"focusin":return Jr=Go(Jr,t,e,n,r,s),!0;case"dragenter":return Zr=Go(Zr,t,e,n,r,s),!0;case"mouseover":return es=Go(es,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Da.set(i,Go(Da.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Oa.set(i,Go(Oa.get(i)||null,t,e,n,r,s)),!0}return!1}function Ew(t){var e=zs(t.target);if(e!==null){var n=ci(e);if(n!==null){if(e=n.tag,e===13){if(e=uw(n),e!==null){t.blockedOn=e,ww(t.priority,function(){vw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_f(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ff=r,n.target.dispatchEvent(r),ff=null}else return e=hl(n),e!==null&&zp(e),t.blockedOn=n,!1;e.shift()}return!0}function By(t,e,n){Nu(t)&&n.delete(e)}function LS(){vf=!1,Jr!==null&&Nu(Jr)&&(Jr=null),Zr!==null&&Nu(Zr)&&(Zr=null),es!==null&&Nu(es)&&(es=null),Da.forEach(By),Oa.forEach(By)}function Qo(t,e){t.blockedOn===e&&(t.blockedOn=null,vf||(vf=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,LS)))}function La(t){function e(s){return Qo(s,t)}if(0<lu.length){Qo(lu[0],t);for(var n=1;n<lu.length;n++){var r=lu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jr!==null&&Qo(Jr,t),Zr!==null&&Qo(Zr,t),es!==null&&Qo(es,t),Da.forEach(e),Oa.forEach(e),n=0;n<Fr.length;n++)r=Fr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fr.length&&(n=Fr[0],n.blockedOn===null);)Ew(n),n.blockedOn===null&&Fr.shift()}var Yi=Ir.ReactCurrentBatchConfig,sc=!0;function jS(t,e,n,r){var s=de,i=Yi.transition;Yi.transition=null;try{de=1,Bp(t,e,n,r)}finally{de=s,Yi.transition=i}}function MS(t,e,n,r){var s=de,i=Yi.transition;Yi.transition=null;try{de=4,Bp(t,e,n,r)}finally{de=s,Yi.transition=i}}function Bp(t,e,n,r){if(sc){var s=_f(t,e,n,r);if(s===null)xh(t,e,r,ic,n),zy(t,r);else if(OS(s,t,e,n,r))r.stopPropagation();else if(zy(t,r),e&4&&-1<DS.indexOf(t)){for(;s!==null;){var i=hl(s);if(i!==null&&yw(i),i=_f(t,e,n,r),i===null&&xh(t,e,r,ic,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xh(t,e,r,null,n)}}var ic=null;function _f(t,e,n,r){if(ic=null,t=Vp(r),t=zs(t),t!==null)if(e=ci(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ic=t,null}function xw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IS()){case Up:return 1;case fw:return 4;case nc:case SS:return 16;case pw:return 536870912;default:return 16}default:return 16}}var Gr=null,$p=null,bu=null;function Tw(){if(bu)return bu;var t,e=$p,n=e.length,r,s="value"in Gr?Gr.value:Gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bu=s.slice(t,1<r?1-r:void 0)}function Pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uu(){return!0}function $y(){return!1}function tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?uu:$y,this.isPropagationStopped=$y,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qp=tn(xo),dl=Ne({},xo,{view:0,detail:0}),VS=tn(dl),fh,ph,Yo,Jc=Ne({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yo&&(Yo&&t.type==="mousemove"?(fh=t.screenX-Yo.screenX,ph=t.screenY-Yo.screenY):ph=fh=0,Yo=t),fh)},movementY:function(t){return"movementY"in t?t.movementY:ph}}),qy=tn(Jc),US=Ne({},Jc,{dataTransfer:0}),FS=tn(US),zS=Ne({},dl,{relatedTarget:0}),mh=tn(zS),BS=Ne({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=tn(BS),qS=Ne({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WS=tn(qS),HS=Ne({},xo,{data:0}),Wy=tn(HS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QS[t])?!!e[t]:!1}function Wp(){return YS}var XS=Ne({},dl,{key:function(t){if(t.key){var e=KS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wp,charCode:function(t){return t.type==="keypress"?Pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JS=tn(XS),ZS=Ne({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hy=tn(ZS),ek=Ne({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wp}),tk=tn(ek),nk=Ne({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),rk=tn(nk),sk=Ne({},Jc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ik=tn(sk),ok=[9,13,27,32],Hp=hr&&"CompositionEvent"in window,pa=null;hr&&"documentMode"in document&&(pa=document.documentMode);var ak=hr&&"TextEvent"in window&&!pa,Iw=hr&&(!Hp||pa&&8<pa&&11>=pa),Ky=" ",Gy=!1;function Sw(t,e){switch(t){case"keyup":return ok.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function lk(t,e){switch(t){case"compositionend":return kw(e);case"keypress":return e.which!==32?null:(Gy=!0,Ky);case"textInput":return t=e.data,t===Ky&&Gy?null:t;default:return null}}function uk(t,e){if(Oi)return t==="compositionend"||!Hp&&Sw(t,e)?(t=Tw(),bu=$p=Gr=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Iw&&e.locale!=="ko"?null:e.data;default:return null}}var ck={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ck[t.type]:e==="textarea"}function Cw(t,e,n,r){sw(r),e=oc(e,"onChange"),0<e.length&&(n=new qp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ma=null,ja=null;function dk(t){Vw(t,0)}function Zc(t){var e=Mi(t);if(X0(e))return t}function hk(t,e){if(t==="change")return e}var Rw=!1;if(hr){var gh;if(hr){var yh="oninput"in document;if(!yh){var Yy=document.createElement("div");Yy.setAttribute("oninput","return;"),yh=typeof Yy.oninput=="function"}gh=yh}else gh=!1;Rw=gh&&(!document.documentMode||9<document.documentMode)}function Xy(){ma&&(ma.detachEvent("onpropertychange",Aw),ja=ma=null)}function Aw(t){if(t.propertyName==="value"&&Zc(ja)){var e=[];Cw(e,ja,t,Vp(t)),lw(dk,e)}}function fk(t,e,n){t==="focusin"?(Xy(),ma=e,ja=n,ma.attachEvent("onpropertychange",Aw)):t==="focusout"&&Xy()}function pk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(ja)}function mk(t,e){if(t==="click")return Zc(e)}function gk(t,e){if(t==="input"||t==="change")return Zc(e)}function yk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:yk;function Ma(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ef.call(e,s)||!An(t[s],e[s]))return!1}return!0}function Jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zy(t,e){var n=Jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jy(n)}}function Nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bw(){for(var t=window,e=Zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zu(t.document)}return e}function Kp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vk(t){var e=bw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nw(n.ownerDocument.documentElement,n)){if(r!==null&&Kp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Zy(n,i);var o=Zy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _k=hr&&"documentMode"in document&&11>=document.documentMode,Li=null,wf=null,ga=null,Ef=!1;function ev(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ef||Li==null||Li!==Zu(r)||(r=Li,"selectionStart"in r&&Kp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ga&&Ma(ga,r)||(ga=r,r=oc(wf,"onSelect"),0<r.length&&(e=new qp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Li)))}function cu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ji={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},vh={},Pw={};hr&&(Pw=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function ed(t){if(vh[t])return vh[t];if(!ji[t])return t;var e=ji[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Pw)return vh[t]=e[n];return t}var Dw=ed("animationend"),Ow=ed("animationiteration"),Lw=ed("animationstart"),jw=ed("transitionend"),Mw=new Map,tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(t,e){Mw.set(t,e),ui(e,[t])}for(var _h=0;_h<tv.length;_h++){var wh=tv[_h],wk=wh.toLowerCase(),Ek=wh[0].toUpperCase()+wh.slice(1);vs(wk,"on"+Ek)}vs(Dw,"onAnimationEnd");vs(Ow,"onAnimationIteration");vs(Lw,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(jw,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ia));function nv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wS(r,e,void 0,t),t.currentTarget=null}function Vw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;nv(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;nv(s,a,c),i=u}}}if(tc)throw t=gf,tc=!1,gf=null,t}function we(t,e){var n=e[kf];n===void 0&&(n=e[kf]=new Set);var r=t+"__bubble";n.has(r)||(Uw(e,t,2,!1),n.add(r))}function Eh(t,e,n){var r=0;e&&(r|=4),Uw(n,t,r,e)}var du="_reactListening"+Math.random().toString(36).slice(2);function Va(t){if(!t[du]){t[du]=!0,H0.forEach(function(n){n!=="selectionchange"&&(xk.has(n)||Eh(n,!1,t),Eh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[du]||(e[du]=!0,Eh("selectionchange",!1,e))}}function Uw(t,e,n,r){switch(xw(e)){case 1:var s=jS;break;case 4:s=MS;break;default:s=Bp}n=s.bind(null,e,n,t),s=void 0,!mf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=zs(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}lw(function(){var c=i,f=Vp(n),p=[];e:{var y=Mw.get(t);if(y!==void 0){var E=qp,k=t;switch(t){case"keypress":if(Pu(n)===0)break e;case"keydown":case"keyup":E=JS;break;case"focusin":k="focus",E=mh;break;case"focusout":k="blur",E=mh;break;case"beforeblur":case"afterblur":E=mh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=qy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=FS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=tk;break;case Dw:case Ow:case Lw:E=$S;break;case jw:E=rk;break;case"scroll":E=VS;break;case"wheel":E=ik;break;case"copy":case"cut":case"paste":E=WS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Hy}var R=(e&4)!==0,C=!R&&t==="scroll",w=R?y!==null?y+"Capture":null:y;R=[];for(var v=c,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,w!==null&&(b=Pa(v,w),b!=null&&R.push(Ua(v,b,_)))),C)break;v=v.return}0<R.length&&(y=new E(y,k,null,n,f),p.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",y&&n!==ff&&(k=n.relatedTarget||n.fromElement)&&(zs(k)||k[fr]))break e;if((E||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,E?(k=n.relatedTarget||n.toElement,E=c,k=k?zs(k):null,k!==null&&(C=ci(k),k!==C||k.tag!==5&&k.tag!==6)&&(k=null)):(E=null,k=c),E!==k)){if(R=qy,b="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=Hy,b="onPointerLeave",w="onPointerEnter",v="pointer"),C=E==null?y:Mi(E),_=k==null?y:Mi(k),y=new R(b,v+"leave",E,n,f),y.target=C,y.relatedTarget=_,b=null,zs(f)===c&&(R=new R(w,v+"enter",k,n,f),R.target=_,R.relatedTarget=C,b=R),C=b,E&&k)t:{for(R=E,w=k,v=0,_=R;_;_=ki(_))v++;for(_=0,b=w;b;b=ki(b))_++;for(;0<v-_;)R=ki(R),v--;for(;0<_-v;)w=ki(w),_--;for(;v--;){if(R===w||w!==null&&R===w.alternate)break t;R=ki(R),w=ki(w)}R=null}else R=null;E!==null&&rv(p,y,E,R,!1),k!==null&&C!==null&&rv(p,C,k,R,!0)}}e:{if(y=c?Mi(c):window,E=y.nodeName&&y.nodeName.toLowerCase(),E==="select"||E==="input"&&y.type==="file")var O=hk;else if(Qy(y))if(Rw)O=gk;else{O=pk;var j=fk}else(E=y.nodeName)&&E.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=mk);if(O&&(O=O(t,c))){Cw(p,O,n,f);break e}j&&j(t,y,c),t==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&lf(y,"number",y.value)}switch(j=c?Mi(c):window,t){case"focusin":(Qy(j)||j.contentEditable==="true")&&(Li=j,wf=c,ga=null);break;case"focusout":ga=wf=Li=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,ev(p,n,f);break;case"selectionchange":if(_k)break;case"keydown":case"keyup":ev(p,n,f)}var S;if(Hp)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Oi?Sw(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Iw&&n.locale!=="ko"&&(Oi||g!=="onCompositionStart"?g==="onCompositionEnd"&&Oi&&(S=Tw()):(Gr=f,$p="value"in Gr?Gr.value:Gr.textContent,Oi=!0)),j=oc(c,g),0<j.length&&(g=new Wy(g,t,null,n,f),p.push({event:g,listeners:j}),S?g.data=S:(S=kw(n),S!==null&&(g.data=S)))),(S=ak?lk(t,n):uk(t,n))&&(c=oc(c,"onBeforeInput"),0<c.length&&(f=new Wy("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=S))}Vw(p,e)})}function Ua(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pa(t,n),i!=null&&r.unshift(Ua(t,i,s)),i=Pa(t,e),i!=null&&r.push(Ua(t,i,s))),t=t.return}return r}function ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Pa(n,i),u!=null&&o.unshift(Ua(n,u,a))):s||(u=Pa(n,i),u!=null&&o.push(Ua(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Tk=/\r\n?/g,Ik=/\u0000|\uFFFD/g;function sv(t){return(typeof t=="string"?t:""+t).replace(Tk,`
`).replace(Ik,"")}function hu(t,e,n){if(e=sv(e),sv(t)!==e&&n)throw Error(F(425))}function ac(){}var xf=null,Tf=null;function If(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,Sk=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,kk=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(t){return iv.resolve(null).then(t).catch(Ck)}:Sf;function Ck(t){setTimeout(function(){throw t})}function Th(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),La(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);La(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ov(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var To=Math.random().toString(36).slice(2),Mn="__reactFiber$"+To,Fa="__reactProps$"+To,fr="__reactContainer$"+To,kf="__reactEvents$"+To,Rk="__reactListeners$"+To,Ak="__reactHandles$"+To;function zs(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ov(t);t!==null;){if(n=t[Mn])return n;t=ov(t)}return e}t=n,n=t.parentNode}return null}function hl(t){return t=t[Mn]||t[fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function td(t){return t[Fa]||null}var Cf=[],Vi=-1;function _s(t){return{current:t}}function xe(t){0>Vi||(t.current=Cf[Vi],Cf[Vi]=null,Vi--)}function ve(t,e){Vi++,Cf[Vi]=t.current,t.current=e}var ds={},At=_s(ds),qt=_s(!1),Qs=ds;function io(t,e){var n=t.type.contextTypes;if(!n)return ds;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wt(t){return t=t.childContextTypes,t!=null}function lc(){xe(qt),xe(At)}function av(t,e,n){if(At.current!==ds)throw Error(F(168));ve(At,e),ve(qt,n)}function Fw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,fS(t)||"Unknown",s));return Ne({},n,r)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,Qs=At.current,ve(At,t),ve(qt,qt.current),!0}function lv(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Fw(t,e,Qs),r.__reactInternalMemoizedMergedChildContext=t,xe(qt),xe(At),ve(At,t)):xe(qt),ve(qt,n)}var rr=null,nd=!1,Ih=!1;function zw(t){rr===null?rr=[t]:rr.push(t)}function Nk(t){nd=!0,zw(t)}function ws(){if(!Ih&&rr!==null){Ih=!0;var t=0,e=de;try{var n=rr;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rr=null,nd=!1}catch(s){throw rr!==null&&(rr=rr.slice(t+1)),hw(Up,ws),s}finally{de=e,Ih=!1}}return null}var Ui=[],Fi=0,cc=null,dc=0,ln=[],un=0,Ys=null,sr=1,ir="";function Ms(t,e){Ui[Fi++]=dc,Ui[Fi++]=cc,cc=t,dc=e}function Bw(t,e,n){ln[un++]=sr,ln[un++]=ir,ln[un++]=Ys,Ys=t;var r=sr;t=ir;var s=32-Cn(r)-1;r&=~(1<<s),n+=1;var i=32-Cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,sr=1<<32-Cn(e)+s|n<<s|r,ir=i+t}else sr=1<<i|n<<s|r,ir=t}function Gp(t){t.return!==null&&(Ms(t,1),Bw(t,1,0))}function Qp(t){for(;t===cc;)cc=Ui[--Fi],Ui[Fi]=null,dc=Ui[--Fi],Ui[Fi]=null;for(;t===Ys;)Ys=ln[--un],ln[un]=null,ir=ln[--un],ln[un]=null,sr=ln[--un],ln[un]=null}var Jt=null,Qt=null,Te=!1,kn=null;function $w(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Qt=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ys!==null?{id:sr,overflow:ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Qt=null,!0):!1;default:return!1}}function Rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Af(t){if(Te){var e=Qt;if(e){var n=e;if(!uv(t,e)){if(Rf(t))throw Error(F(418));e=ts(n.nextSibling);var r=Jt;e&&uv(t,e)?$w(r,n):(t.flags=t.flags&-4097|2,Te=!1,Jt=t)}}else{if(Rf(t))throw Error(F(418));t.flags=t.flags&-4097|2,Te=!1,Jt=t}}}function cv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function fu(t){if(t!==Jt)return!1;if(!Te)return cv(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!If(t.type,t.memoizedProps)),e&&(e=Qt)){if(Rf(t))throw qw(),Error(F(418));for(;e;)$w(t,e),e=ts(e.nextSibling)}if(cv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Jt?ts(t.stateNode.nextSibling):null;return!0}function qw(){for(var t=Qt;t;)t=ts(t.nextSibling)}function oo(){Qt=Jt=null,Te=!1}function Yp(t){kn===null?kn=[t]:kn.push(t)}var bk=Ir.ReactCurrentBatchConfig;function Xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function pu(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dv(t){var e=t._init;return e(t._payload)}function Ww(t){function e(w,v){if(t){var _=w.deletions;_===null?(w.deletions=[v],w.flags|=16):_.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=is(w,v),w.index=0,w.sibling=null,w}function i(w,v,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<v?(w.flags|=2,v):_):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,_,b){return v===null||v.tag!==6?(v=bh(_,w.mode,b),v.return=w,v):(v=s(v,_),v.return=w,v)}function u(w,v,_,b){var O=_.type;return O===Di?f(w,v,_.props.children,b,_.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Mr&&dv(O)===v.type)?(b=s(v,_.props),b.ref=Xo(w,v,_),b.return=w,b):(b=Uu(_.type,_.key,_.props,null,w.mode,b),b.ref=Xo(w,v,_),b.return=w,b)}function c(w,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Ph(_,w.mode,b),v.return=w,v):(v=s(v,_.children||[]),v.return=w,v)}function f(w,v,_,b,O){return v===null||v.tag!==7?(v=Hs(_,w.mode,b,O),v.return=w,v):(v=s(v,_),v.return=w,v)}function p(w,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=bh(""+v,w.mode,_),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ru:return _=Uu(v.type,v.key,v.props,null,w.mode,_),_.ref=Xo(w,null,v),_.return=w,_;case Pi:return v=Ph(v,w.mode,_),v.return=w,v;case Mr:var b=v._init;return p(w,b(v._payload),_)}if(ra(v)||Ho(v))return v=Hs(v,w.mode,_,null),v.return=w,v;pu(w,v)}return null}function y(w,v,_,b){var O=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return O!==null?null:a(w,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ru:return _.key===O?u(w,v,_,b):null;case Pi:return _.key===O?c(w,v,_,b):null;case Mr:return O=_._init,y(w,v,O(_._payload),b)}if(ra(_)||Ho(_))return O!==null?null:f(w,v,_,b,null);pu(w,_)}return null}function E(w,v,_,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(_)||null,a(v,w,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ru:return w=w.get(b.key===null?_:b.key)||null,u(v,w,b,O);case Pi:return w=w.get(b.key===null?_:b.key)||null,c(v,w,b,O);case Mr:var j=b._init;return E(w,v,_,j(b._payload),O)}if(ra(b)||Ho(b))return w=w.get(_)||null,f(v,w,b,O,null);pu(v,b)}return null}function k(w,v,_,b){for(var O=null,j=null,S=v,g=v=0,I=null;S!==null&&g<_.length;g++){S.index>g?(I=S,S=null):I=S.sibling;var A=y(w,S,_[g],b);if(A===null){S===null&&(S=I);break}t&&S&&A.alternate===null&&e(w,S),v=i(A,v,g),j===null?O=A:j.sibling=A,j=A,S=I}if(g===_.length)return n(w,S),Te&&Ms(w,g),O;if(S===null){for(;g<_.length;g++)S=p(w,_[g],b),S!==null&&(v=i(S,v,g),j===null?O=S:j.sibling=S,j=S);return Te&&Ms(w,g),O}for(S=r(w,S);g<_.length;g++)I=E(S,w,g,_[g],b),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?g:I.key),v=i(I,v,g),j===null?O=I:j.sibling=I,j=I);return t&&S.forEach(function(P){return e(w,P)}),Te&&Ms(w,g),O}function R(w,v,_,b){var O=Ho(_);if(typeof O!="function")throw Error(F(150));if(_=O.call(_),_==null)throw Error(F(151));for(var j=O=null,S=v,g=v=0,I=null,A=_.next();S!==null&&!A.done;g++,A=_.next()){S.index>g?(I=S,S=null):I=S.sibling;var P=y(w,S,A.value,b);if(P===null){S===null&&(S=I);break}t&&S&&P.alternate===null&&e(w,S),v=i(P,v,g),j===null?O=P:j.sibling=P,j=P,S=I}if(A.done)return n(w,S),Te&&Ms(w,g),O;if(S===null){for(;!A.done;g++,A=_.next())A=p(w,A.value,b),A!==null&&(v=i(A,v,g),j===null?O=A:j.sibling=A,j=A);return Te&&Ms(w,g),O}for(S=r(w,S);!A.done;g++,A=_.next())A=E(S,w,g,A.value,b),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?g:A.key),v=i(A,v,g),j===null?O=A:j.sibling=A,j=A);return t&&S.forEach(function(D){return e(w,D)}),Te&&Ms(w,g),O}function C(w,v,_,b){if(typeof _=="object"&&_!==null&&_.type===Di&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ru:e:{for(var O=_.key,j=v;j!==null;){if(j.key===O){if(O=_.type,O===Di){if(j.tag===7){n(w,j.sibling),v=s(j,_.props.children),v.return=w,w=v;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Mr&&dv(O)===j.type){n(w,j.sibling),v=s(j,_.props),v.ref=Xo(w,j,_),v.return=w,w=v;break e}n(w,j);break}else e(w,j);j=j.sibling}_.type===Di?(v=Hs(_.props.children,w.mode,b,_.key),v.return=w,w=v):(b=Uu(_.type,_.key,_.props,null,w.mode,b),b.ref=Xo(w,v,_),b.return=w,w=b)}return o(w);case Pi:e:{for(j=_.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(w,v.sibling),v=s(v,_.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Ph(_,w.mode,b),v.return=w,w=v}return o(w);case Mr:return j=_._init,C(w,v,j(_._payload),b)}if(ra(_))return k(w,v,_,b);if(Ho(_))return R(w,v,_,b);pu(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,_),v.return=w,w=v):(n(w,v),v=bh(_,w.mode,b),v.return=w,w=v),o(w)):n(w,v)}return C}var ao=Ww(!0),Hw=Ww(!1),hc=_s(null),fc=null,zi=null,Xp=null;function Jp(){Xp=zi=fc=null}function Zp(t){var e=hc.current;xe(hc),t._currentValue=e}function Nf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){fc=t,Xp=zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($t=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Xp!==t)if(t={context:t,memoizedValue:e,next:null},zi===null){if(fc===null)throw Error(F(308));zi=t,fc.dependencies={lanes:0,firstContext:t}}else zi=zi.next=t;return e}var Bs=null;function em(t){Bs===null?Bs=[t]:Bs.push(t)}function Kw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,em(e)):(n.next=s.next,s.next=n),e.interleaved=n,pr(t,r)}function pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vr=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,pr(t,n)}return s=r.interleaved,s===null?(e.next=e,em(r)):(e.next=s.next,s.next=e),r.interleaved=e,pr(t,n)}function Du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fp(t,n)}}function hv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var s=t.updateQueue;Vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=c=u=null,a=i;do{var y=a.lane,E=a.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,R=a;switch(y=e,E=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){p=k.call(E,p,y);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,y=typeof k=="function"?k.call(E,p,y):k,y==null)break e;p=Ne({},p,y);break e;case 2:Vr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[a]:y.push(a))}else E={eventTime:E,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=E,u=p):f=f.next=E,o|=y;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;y=a,a=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Js|=o,t.lanes=o,t.memoizedState=p}}function fv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var fl={},Bn=_s(fl),za=_s(fl),Ba=_s(fl);function $s(t){if(t===fl)throw Error(F(174));return t}function nm(t,e){switch(ve(Ba,e),ve(za,t),ve(Bn,fl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cf(e,t)}xe(Bn),ve(Bn,e)}function lo(){xe(Bn),xe(za),xe(Ba)}function Qw(t){$s(Ba.current);var e=$s(Bn.current),n=cf(e,t.type);e!==n&&(ve(za,t),ve(Bn,n))}function rm(t){za.current===t&&(xe(Bn),xe(za))}var ke=_s(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sh=[];function sm(){for(var t=0;t<Sh.length;t++)Sh[t]._workInProgressVersionPrimary=null;Sh.length=0}var Ou=Ir.ReactCurrentDispatcher,kh=Ir.ReactCurrentBatchConfig,Xs=0,Re=null,Ke=null,et=null,gc=!1,ya=!1,$a=0,Pk=0;function Et(){throw Error(F(321))}function im(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function om(t,e,n,r,s,i){if(Xs=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ou.current=t===null||t.memoizedState===null?jk:Mk,t=n(r,s),ya){i=0;do{if(ya=!1,$a=0,25<=i)throw Error(F(301));i+=1,et=Ke=null,e.updateQueue=null,Ou.current=Vk,t=n(r,s)}while(ya)}if(Ou.current=yc,e=Ke!==null&&Ke.next!==null,Xs=0,et=Ke=Re=null,gc=!1,e)throw Error(F(300));return t}function am(){var t=$a!==0;return $a=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Re.memoizedState=et=t:et=et.next=t,et}function pn(){if(Ke===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=et===null?Re.memoizedState:et.next;if(e!==null)et=e,Ke=t;else{if(t===null)throw Error(F(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},et===null?Re.memoizedState=et=t:et=et.next=t}return et}function qa(t,e){return typeof e=="function"?e(t):e}function Ch(t){var e=pn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var f=c.lane;if((Xs&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,Re.lanes|=f,Js|=f}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,An(r,e.memoizedState)||($t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,Js|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rh(t){var e=pn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);An(i,e.memoizedState)||($t=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Yw(){}function Xw(t,e){var n=Re,r=pn(),s=e(),i=!An(r.memoizedState,s);if(i&&(r.memoizedState=s,$t=!0),r=r.queue,lm(eE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Wa(9,Zw.bind(null,n,r,s,e),void 0,null),nt===null)throw Error(F(349));Xs&30||Jw(n,e,s)}return s}function Jw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zw(t,e,n,r){e.value=n,e.getSnapshot=r,tE(e)&&nE(t)}function eE(t,e,n){return n(function(){tE(e)&&nE(t)})}function tE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function nE(t){var e=pr(t,1);e!==null&&Rn(e,t,1,-1)}function pv(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:t},e.queue=t,t=t.dispatch=Lk.bind(null,Re,t),[e.memoizedState,t]}function Wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rE(){return pn().memoizedState}function Lu(t,e,n,r){var s=jn();Re.flags|=t,s.memoizedState=Wa(1|e,n,void 0,r===void 0?null:r)}function rd(t,e,n,r){var s=pn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&im(r,o.deps)){s.memoizedState=Wa(e,n,i,r);return}}Re.flags|=t,s.memoizedState=Wa(1|e,n,i,r)}function mv(t,e){return Lu(8390656,8,t,e)}function lm(t,e){return rd(2048,8,t,e)}function sE(t,e){return rd(4,2,t,e)}function iE(t,e){return rd(4,4,t,e)}function oE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aE(t,e,n){return n=n!=null?n.concat([t]):null,rd(4,4,oE.bind(null,e,t),n)}function um(){}function lE(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&im(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uE(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&im(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cE(t,e,n){return Xs&21?(An(n,e)||(n=mw(),Re.lanes|=n,Js|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$t=!0),t.memoizedState=n)}function Dk(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=kh.transition;kh.transition={};try{t(!1),e()}finally{de=n,kh.transition=r}}function dE(){return pn().memoizedState}function Ok(t,e,n){var r=ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hE(t))fE(e,n);else if(n=Kw(t,e,n,r),n!==null){var s=Lt();Rn(n,t,r,s),pE(n,e,r)}}function Lk(t,e,n){var r=ss(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hE(t))fE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,An(a,o)){var u=e.interleaved;u===null?(s.next=s,em(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Kw(t,e,s,r),n!==null&&(s=Lt(),Rn(n,t,r,s),pE(n,e,r))}}function hE(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function fE(t,e){ya=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fp(t,n)}}var yc={readContext:fn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},jk={readContext:fn,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:mv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lu(4194308,4,oE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lu(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ok.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:pv,useDebugValue:um,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=pv(!1),e=t[0];return t=Dk.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=jn();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),nt===null)throw Error(F(349));Xs&30||Jw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,mv(eE.bind(null,r,i,t),[t]),r.flags|=2048,Wa(9,Zw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=jn(),e=nt.identifierPrefix;if(Te){var n=ir,r=sr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mk={readContext:fn,useCallback:lE,useContext:fn,useEffect:lm,useImperativeHandle:aE,useInsertionEffect:sE,useLayoutEffect:iE,useMemo:uE,useReducer:Ch,useRef:rE,useState:function(){return Ch(qa)},useDebugValue:um,useDeferredValue:function(t){var e=pn();return cE(e,Ke.memoizedState,t)},useTransition:function(){var t=Ch(qa)[0],e=pn().memoizedState;return[t,e]},useMutableSource:Yw,useSyncExternalStore:Xw,useId:dE,unstable_isNewReconciler:!1},Vk={readContext:fn,useCallback:lE,useContext:fn,useEffect:lm,useImperativeHandle:aE,useInsertionEffect:sE,useLayoutEffect:iE,useMemo:uE,useReducer:Rh,useRef:rE,useState:function(){return Rh(qa)},useDebugValue:um,useDeferredValue:function(t){var e=pn();return Ke===null?e.memoizedState=t:cE(e,Ke.memoizedState,t)},useTransition:function(){var t=Rh(qa)[0],e=pn().memoizedState;return[t,e]},useMutableSource:Yw,useSyncExternalStore:Xw,useId:dE,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sd={isMounted:function(t){return(t=t._reactInternals)?ci(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lt(),s=ss(t),i=ur(r,s);i.payload=e,n!=null&&(i.callback=n),e=ns(t,i,s),e!==null&&(Rn(e,t,s,r),Du(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lt(),s=ss(t),i=ur(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ns(t,i,s),e!==null&&(Rn(e,t,s,r),Du(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),r=ss(t),s=ur(n,r);s.tag=2,e!=null&&(s.callback=e),e=ns(t,s,r),e!==null&&(Rn(e,t,r,n),Du(e,t,r))}};function gv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ma(n,r)||!Ma(s,i):!0}function mE(t,e,n){var r=!1,s=ds,i=e.contextType;return typeof i=="object"&&i!==null?i=fn(i):(s=Wt(e)?Qs:At.current,r=e.contextTypes,i=(r=r!=null)?io(t,s):ds),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sd.enqueueReplaceState(e,e.state,null)}function Pf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},tm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=fn(i):(i=Wt(e)?Qs:At.current,s.context=io(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sd.enqueueReplaceState(s,s.state,null),pc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function uo(t,e){try{var n="",r=e;do n+=hS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ah(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Df(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Uk=typeof WeakMap=="function"?WeakMap:Map;function gE(t,e,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_c||(_c=!0,$f=r),Df(t,e)},n}function yE(t,e,n){n=ur(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Df(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Df(t,e),typeof r!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Uk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Zk.bind(null,t,e,n),e.then(t,t))}function _v(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ur(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var Fk=Ir.ReactCurrentOwner,$t=!1;function Ot(t,e,n,r){e.child=t===null?Hw(e,null,n,r):ao(e,t.child,n,r)}function Ev(t,e,n,r,s){n=n.render;var i=e.ref;return Xi(e,s),r=om(t,e,n,r,i,s),n=am(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,mr(t,e,s)):(Te&&n&&Gp(e),e.flags|=1,Ot(t,e,r,s),e.child)}function xv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ym(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vE(t,e,i,r,s)):(t=Uu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ma,n(o,r)&&t.ref===e.ref)return mr(t,e,s)}return e.flags|=1,t=is(i,r),t.ref=e.ref,t.return=e,e.child=t}function vE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ma(i,r)&&t.ref===e.ref)if($t=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&($t=!0);else return e.lanes=t.lanes,mr(t,e,s)}return Of(t,e,n,r,s)}function _E(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve($i,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve($i,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve($i,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve($i,Gt),Gt|=r;return Ot(t,e,s,n),e.child}function wE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Of(t,e,n,r,s){var i=Wt(n)?Qs:At.current;return i=io(e,i),Xi(e,s),n=om(t,e,n,r,i,s),r=am(),t!==null&&!$t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,mr(t,e,s)):(Te&&r&&Gp(e),e.flags|=1,Ot(t,e,n,s),e.child)}function Tv(t,e,n,r,s){if(Wt(n)){var i=!0;uc(e)}else i=!1;if(Xi(e,s),e.stateNode===null)ju(t,e),mE(e,n,r),Pf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=Wt(n)?Qs:At.current,c=io(e,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&yv(e,o,r,c),Vr=!1;var y=e.memoizedState;o.state=y,pc(e,r,o,s),u=e.memoizedState,a!==r||y!==u||qt.current||Vr?(typeof f=="function"&&(bf(e,n,f,r),u=e.memoizedState),(a=Vr||gv(e,n,a,r,y,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=fn(u):(u=Wt(n)?Qs:At.current,u=io(e,u));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||y!==u)&&yv(e,o,r,u),Vr=!1,y=e.memoizedState,o.state=y,pc(e,r,o,s);var k=e.memoizedState;a!==p||y!==k||qt.current||Vr?(typeof E=="function"&&(bf(e,n,E,r),k=e.memoizedState),(c=Vr||gv(e,n,c,r,y,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Lf(t,e,n,r,i,s)}function Lf(t,e,n,r,s,i){wE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&lv(e,n,!1),mr(t,e,i);r=e.stateNode,Fk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ao(e,t.child,null,i),e.child=ao(e,null,a,i)):Ot(t,e,a,i),e.memoizedState=r.state,s&&lv(e,n,!0),e.child}function EE(t){var e=t.stateNode;e.pendingContext?av(t,e.pendingContext,e.pendingContext!==e.context):e.context&&av(t,e.context,!1),nm(t,e.containerInfo)}function Iv(t,e,n,r,s){return oo(),Yp(s),e.flags|=256,Ot(t,e,n,r),e.child}var jf={dehydrated:null,treeContext:null,retryLane:0};function Mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function xE(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(ke,s&1),t===null)return Af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ad(o,r,0,null),t=Hs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Mf(n),e.memoizedState=jf,t):cm(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return zk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=is(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=is(a,i):(i=Hs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Mf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jf,r}return i=t.child,t=i.sibling,r=is(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cm(t,e){return e=ad({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mu(t,e,n,r){return r!==null&&Yp(r),ao(e,t.child,null,n),t=cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ah(Error(F(422))),mu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ad({mode:"visible",children:r.children},s,0,null),i=Hs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ao(e,t.child,null,o),e.child.memoizedState=Mf(o),e.memoizedState=jf,i);if(!(e.mode&1))return mu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(F(419)),r=Ah(i,r,void 0),mu(t,e,o,r)}if(a=(o&t.childLanes)!==0,$t||a){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pr(t,s),Rn(r,t,s,-1))}return gm(),r=Ah(Error(F(421))),mu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qt=ts(s.nextSibling),Jt=e,Te=!0,kn=null,t!==null&&(ln[un++]=sr,ln[un++]=ir,ln[un++]=Ys,sr=t.id,ir=t.overflow,Ys=e),e=cm(e,r.children),e.flags|=4096,e)}function Sv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nf(t.return,e,n)}function Nh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function TE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ot(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,n,e);else if(t.tag===19)Sv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nh(e,!0,n,null,i);break;case"together":Nh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ju(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Js|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bk(t,e,n){switch(e.tag){case 3:EE(e),oo();break;case 5:Qw(e);break;case 1:Wt(e.type)&&uc(e);break;case 4:nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(hc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?xE(t,e,n):(ve(ke,ke.current&1),t=mr(t,e,n),t!==null?t.sibling:null);ve(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return TE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,_E(t,e,n)}return mr(t,e,n)}var IE,Vf,SE,kE;IE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vf=function(){};SE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$s(Bn.current);var i=null;switch(n){case"input":s=of(t,s),r=of(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=uf(t,s),r=uf(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ac)}df(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Na.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Na.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&we("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};kE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jo(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $k(t,e,n){var r=e.pendingProps;switch(Qp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Wt(e.type)&&lc(),xt(e),null;case 3:return r=e.stateNode,lo(),xe(qt),xe(At),sm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(Hf(kn),kn=null))),Vf(t,e),xt(e),null;case 5:rm(e);var s=$s(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)SE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return xt(e),null}if(t=$s(Bn.current),fu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Mn]=e,r[Fa]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<ia.length;s++)we(ia[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Oy(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":jy(r,i),we("invalid",r)}df(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&hu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&hu(r.textContent,a,t),s=["children",""+a]):Na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":su(r),Ly(r,i,!0);break;case"textarea":su(r),My(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ew(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Fa]=r,IE(t,e,!1,!1),e.stateNode=t;e:{switch(o=hf(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<ia.length;s++)we(ia[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Oy(t,r),s=of(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),we("invalid",t);break;case"textarea":jy(t,r),s=uf(t,r),we("invalid",t);break;default:s=r}df(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?rw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&tw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ba(t,u):typeof u=="number"&&ba(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Na.hasOwnProperty(i)?u!=null&&i==="onScroll"&&we("scroll",t):u!=null&&Op(t,i,u,o))}switch(n){case"input":su(t),Ly(t,r,!1);break;case"textarea":su(t),My(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ki(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)kE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=$s(Ba.current),$s(Bn.current),fu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(i=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:hu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return xt(e),null;case 13:if(xe(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Qt!==null&&e.mode&1&&!(e.flags&128))qw(),oo(),e.flags|=98560,i=!1;else if(i=fu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Mn]=e}else oo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else kn!==null&&(Hf(kn),kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ye===0&&(Ye=3):gm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return lo(),Vf(t,e),t===null&&Va(e.stateNode.containerInfo),xt(e),null;case 10:return Zp(e.type._context),xt(e),null;case 17:return Wt(e.type)&&lc(),xt(e),null;case 19:if(xe(ke),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Jo(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mc(t),o!==null){for(e.flags|=128,Jo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>co&&(e.flags|=128,r=!0,Jo(i,!1),e.lanes=4194304)}else{if(!r)if(t=mc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return xt(e),null}else 2*Fe()-i.renderingStartTime>co&&n!==1073741824&&(e.flags|=128,r=!0,Jo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=ke.current,ve(ke,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return mm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function qk(t,e){switch(Qp(e),e.tag){case 1:return Wt(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),xe(qt),xe(At),sm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rm(e),null;case 13:if(xe(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));oo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(ke),null;case 4:return lo(),null;case 10:return Zp(e.type._context),null;case 22:case 23:return mm(),null;case 24:return null;default:return null}}var gu=!1,St=!1,Wk=typeof WeakSet=="function"?WeakSet:Set,q=null;function Bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function Uf(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var kv=!1;function Hk(t,e){if(xf=sc,t=bw(),Kp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,f=0,p=t,y=null;t:for(;;){for(var E;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(E=p.firstChild)!==null;)y=p,p=E;for(;;){if(p===t)break t;if(y===n&&++c===s&&(a=o),y===i&&++f===r&&(u=o),(E=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=E}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:t,selectionRange:n},sc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,C=k.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:In(e.type,R),C);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(b){Oe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return k=kv,kv=!1,k}function va(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Uf(e,n,i)}s=s.next}while(s!==r)}}function id(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function CE(t){var e=t.alternate;e!==null&&(t.alternate=null,CE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Fa],delete e[kf],delete e[Rk],delete e[Ak])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RE(t){return t.tag===5||t.tag===3||t.tag===4}function Cv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(r!==4&&(t=t.child,t!==null))for(zf(t,e,n),t=t.sibling;t!==null;)zf(t,e,n),t=t.sibling}function Bf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}var ot=null,Sn=!1;function Lr(t,e,n){for(n=n.child;n!==null;)AE(t,e,n),n=n.sibling}function AE(t,e,n){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Xc,n)}catch{}switch(n.tag){case 5:St||Bi(n,e);case 6:var r=ot,s=Sn;ot=null,Lr(t,e,n),ot=r,Sn=s,ot!==null&&(Sn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(Sn?(t=ot,n=n.stateNode,t.nodeType===8?Th(t.parentNode,n):t.nodeType===1&&Th(t,n),La(t)):Th(ot,n.stateNode));break;case 4:r=ot,s=Sn,ot=n.stateNode.containerInfo,Sn=!0,Lr(t,e,n),ot=r,Sn=s;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Uf(n,e,o),s=s.next}while(s!==r)}Lr(t,e,n);break;case 1:if(!St&&(Bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Oe(n,e,a)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,Lr(t,e,n),St=r):Lr(t,e,n);break;default:Lr(t,e,n)}}function Rv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Wk),e.forEach(function(r){var s=tC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,Sn=!1;break e;case 3:ot=a.stateNode.containerInfo,Sn=!0;break e;case 4:ot=a.stateNode.containerInfo,Sn=!0;break e}a=a.return}if(ot===null)throw Error(F(160));AE(i,o,s),ot=null,Sn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Oe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NE(e,t),e=e.sibling}function NE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),Ln(t),r&4){try{va(3,t,t.return),id(3,t)}catch(R){Oe(t,t.return,R)}try{va(5,t,t.return)}catch(R){Oe(t,t.return,R)}}break;case 1:xn(e,t),Ln(t),r&512&&n!==null&&Bi(n,n.return);break;case 5:if(xn(e,t),Ln(t),r&512&&n!==null&&Bi(n,n.return),t.flags&32){var s=t.stateNode;try{ba(s,"")}catch(R){Oe(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&J0(s,i),hf(a,o);var c=hf(a,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?rw(s,p):f==="dangerouslySetInnerHTML"?tw(s,p):f==="children"?ba(s,p):Op(s,f,p,c)}switch(a){case"input":af(s,i);break;case"textarea":Z0(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?Ki(s,!!i.multiple,E,!1):y!==!!i.multiple&&(i.defaultValue!=null?Ki(s,!!i.multiple,i.defaultValue,!0):Ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fa]=i}catch(R){Oe(t,t.return,R)}}break;case 6:if(xn(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Oe(t,t.return,R)}}break;case 3:if(xn(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{La(e.containerInfo)}catch(R){Oe(t,t.return,R)}break;case 4:xn(e,t),Ln(t);break;case 13:xn(e,t),Ln(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fm=Fe())),r&4&&Rv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(St=(c=St)||f,xn(e,t),St=c):xn(e,t),Ln(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(p=q=f;q!==null;){switch(y=q,E=y.child,y.tag){case 0:case 11:case 14:case 15:va(4,y,y.return);break;case 1:Bi(y,y.return);var k=y.stateNode;if(typeof k.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){Oe(r,n,R)}}break;case 5:Bi(y,y.return);break;case 22:if(y.memoizedState!==null){Nv(p);continue}}E!==null?(E.return=y,q=E):Nv(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=nw("display",o))}catch(R){Oe(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(R){Oe(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:xn(e,t),Ln(t),r&4&&Rv(t);break;case 21:break;default:xn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RE(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ba(s,""),r.flags&=-33);var i=Cv(t);Bf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Cv(t);zf(t,a,o);break;default:throw Error(F(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kk(t,e,n){q=t,bE(t)}function bE(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||gu;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||St;a=gu;var c=St;if(gu=o,(St=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?bv(s):u!==null?(u.return=o,q=u):bv(s);for(;i!==null;)q=i,bE(i),i=i.sibling;q=s,gu=a,St=c}Av(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Av(t)}}function Av(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||id(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&La(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}St||e.flags&512&&Ff(e)}catch(y){Oe(e,e.return,y)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Nv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function bv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{id(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{Ff(e)}catch(u){Oe(e,i,u)}break;case 5:var o=e.return;try{Ff(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var Gk=Math.ceil,vc=Ir.ReactCurrentDispatcher,dm=Ir.ReactCurrentOwner,dn=Ir.ReactCurrentBatchConfig,le=0,nt=null,We=null,ut=0,Gt=0,$i=_s(0),Ye=0,Ha=null,Js=0,od=0,hm=0,_a=null,zt=null,fm=0,co=1/0,nr=null,_c=!1,$f=null,rs=null,yu=!1,Qr=null,wc=0,wa=0,qf=null,Mu=-1,Vu=0;function Lt(){return le&6?Fe():Mu!==-1?Mu:Mu=Fe()}function ss(t){return t.mode&1?le&2&&ut!==0?ut&-ut:bk.transition!==null?(Vu===0&&(Vu=mw()),Vu):(t=de,t!==0||(t=window.event,t=t===void 0?16:xw(t.type)),t):1}function Rn(t,e,n,r){if(50<wa)throw wa=0,qf=null,Error(F(185));cl(t,n,r),(!(le&2)||t!==nt)&&(t===nt&&(!(le&2)&&(od|=n),Ye===4&&zr(t,ut)),Ht(t,r),n===1&&le===0&&!(e.mode&1)&&(co=Fe()+500,nd&&ws()))}function Ht(t,e){var n=t.callbackNode;bS(t,e);var r=rc(t,t===nt?ut:0);if(r===0)n!==null&&Fy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Fy(n),e===1)t.tag===0?Nk(Pv.bind(null,t)):zw(Pv.bind(null,t)),kk(function(){!(le&6)&&ws()}),n=null;else{switch(gw(r)){case 1:n=Up;break;case 4:n=fw;break;case 16:n=nc;break;case 536870912:n=pw;break;default:n=nc}n=UE(n,PE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PE(t,e){if(Mu=-1,Vu=0,le&6)throw Error(F(327));var n=t.callbackNode;if(Ji()&&t.callbackNode!==n)return null;var r=rc(t,t===nt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ec(t,r);else{e=r;var s=le;le|=2;var i=OE();(nt!==t||ut!==e)&&(nr=null,co=Fe()+500,Ws(t,e));do try{Xk();break}catch(a){DE(t,a)}while(!0);Jp(),vc.current=i,le=s,We!==null?e=0:(nt=null,ut=0,e=Ye)}if(e!==0){if(e===2&&(s=yf(t),s!==0&&(r=s,e=Wf(t,s))),e===1)throw n=Ha,Ws(t,0),zr(t,r),Ht(t,Fe()),n;if(e===6)zr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Qk(s)&&(e=Ec(t,r),e===2&&(i=yf(t),i!==0&&(r=i,e=Wf(t,i))),e===1))throw n=Ha,Ws(t,0),zr(t,r),Ht(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Vs(t,zt,nr);break;case 3:if(zr(t,r),(r&130023424)===r&&(e=fm+500-Fe(),10<e)){if(rc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Lt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Sf(Vs.bind(null,t,zt,nr),e);break}Vs(t,zt,nr);break;case 4:if(zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gk(r/1960))-r,10<r){t.timeoutHandle=Sf(Vs.bind(null,t,zt,nr),r);break}Vs(t,zt,nr);break;case 5:Vs(t,zt,nr);break;default:throw Error(F(329))}}}return Ht(t,Fe()),t.callbackNode===n?PE.bind(null,t):null}function Wf(t,e){var n=_a;return t.current.memoizedState.isDehydrated&&(Ws(t,e).flags|=256),t=Ec(t,e),t!==2&&(e=zt,zt=n,e!==null&&Hf(e)),t}function Hf(t){zt===null?zt=t:zt.push.apply(zt,t)}function Qk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!An(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~hm,e&=~od,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function Pv(t){if(le&6)throw Error(F(327));Ji();var e=rc(t,0);if(!(e&1))return Ht(t,Fe()),null;var n=Ec(t,e);if(t.tag!==0&&n===2){var r=yf(t);r!==0&&(e=r,n=Wf(t,r))}if(n===1)throw n=Ha,Ws(t,0),zr(t,e),Ht(t,Fe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vs(t,zt,nr),Ht(t,Fe()),null}function pm(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(co=Fe()+500,nd&&ws())}}function Zs(t){Qr!==null&&Qr.tag===0&&!(le&6)&&Ji();var e=le;le|=1;var n=dn.transition,r=de;try{if(dn.transition=null,de=1,t)return t()}finally{de=r,dn.transition=n,le=e,!(le&6)&&ws()}}function mm(){Gt=$i.current,xe($i)}function Ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sk(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Qp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lc();break;case 3:lo(),xe(qt),xe(At),sm();break;case 5:rm(r);break;case 4:lo();break;case 13:xe(ke);break;case 19:xe(ke);break;case 10:Zp(r.type._context);break;case 22:case 23:mm()}n=n.return}if(nt=t,We=t=is(t.current,null),ut=Gt=e,Ye=0,Ha=null,hm=od=Js=0,zt=_a=null,Bs!==null){for(e=0;e<Bs.length;e++)if(n=Bs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Bs=null}return t}function DE(t,e){do{var n=We;try{if(Jp(),Ou.current=yc,gc){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}gc=!1}if(Xs=0,et=Ke=Re=null,ya=!1,$a=0,dm.current=null,n===null||n.return===null){Ye=1,Ha=e,We=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=ut,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=_v(o);if(E!==null){E.flags&=-257,wv(E,o,a,i,e),E.mode&1&&vv(i,c,e),e=E,u=c;var k=e.updateQueue;if(k===null){var R=new Set;R.add(u),e.updateQueue=R}else k.add(u);break e}else{if(!(e&1)){vv(i,c,e),gm();break e}u=Error(F(426))}}else if(Te&&a.mode&1){var C=_v(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),wv(C,o,a,i,e),Yp(uo(u,a));break e}}i=u=uo(u,a),Ye!==4&&(Ye=2),_a===null?_a=[i]:_a.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=gE(i,u,e);hv(i,w);break e;case 1:a=u;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(rs===null||!rs.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=yE(i,a,e);hv(i,b);break e}}i=i.return}while(i!==null)}jE(n)}catch(O){e=O,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function OE(){var t=vc.current;return vc.current=yc,t===null?yc:t}function gm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),nt===null||!(Js&268435455)&&!(od&268435455)||zr(nt,ut)}function Ec(t,e){var n=le;le|=2;var r=OE();(nt!==t||ut!==e)&&(nr=null,Ws(t,e));do try{Yk();break}catch(s){DE(t,s)}while(!0);if(Jp(),le=n,vc.current=r,We!==null)throw Error(F(261));return nt=null,ut=0,Ye}function Yk(){for(;We!==null;)LE(We)}function Xk(){for(;We!==null&&!xS();)LE(We)}function LE(t){var e=VE(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?jE(t):We=e,dm.current=null}function jE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qk(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,We=null;return}}else if(n=$k(n,e,Gt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ye===0&&(Ye=5)}function Vs(t,e,n){var r=de,s=dn.transition;try{dn.transition=null,de=1,Jk(t,e,n,r)}finally{dn.transition=s,de=r}return null}function Jk(t,e,n,r){do Ji();while(Qr!==null);if(le&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(PS(t,i),t===nt&&(We=nt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yu||(yu=!0,UE(nc,function(){return Ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=dn.transition,dn.transition=null;var o=de;de=1;var a=le;le|=4,dm.current=null,Hk(t,n),NE(n,t),vk(Tf),sc=!!xf,Tf=xf=null,t.current=n,Kk(n),TS(),le=a,de=o,dn.transition=i}else t.current=n;if(yu&&(yu=!1,Qr=t,wc=s),i=t.pendingLanes,i===0&&(rs=null),kS(n.stateNode),Ht(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_c)throw _c=!1,t=$f,$f=null,t;return wc&1&&t.tag!==0&&Ji(),i=t.pendingLanes,i&1?t===qf?wa++:(wa=0,qf=t):wa=0,ws(),null}function Ji(){if(Qr!==null){var t=gw(wc),e=dn.transition,n=de;try{if(dn.transition=null,de=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,wc=0,le&6)throw Error(F(331));var s=le;for(le|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(q=c;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:va(8,f,i)}var p=f.child;if(p!==null)p.return=f,q=p;else for(;q!==null;){f=q;var y=f.sibling,E=f.return;if(CE(f),f===c){q=null;break}if(y!==null){y.return=E,q=y;break}q=E}}}var k=i.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var C=R.sibling;R.sibling=null,R=C}while(R!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:va(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,q=w;break e}q=i.return}}var v=t.current;for(q=v;q!==null;){o=q;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,q=_;else e:for(o=v;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:id(9,a)}}catch(O){Oe(a,a.return,O)}if(a===o){q=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,q=b;break e}q=a.return}}if(le=s,ws(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Xc,t)}catch{}r=!0}return r}finally{de=n,dn.transition=e}}return!1}function Dv(t,e,n){e=uo(n,e),e=gE(t,e,1),t=ns(t,e,1),e=Lt(),t!==null&&(cl(t,1,e),Ht(t,e))}function Oe(t,e,n){if(t.tag===3)Dv(t,t,n);else for(;e!==null;){if(e.tag===3){Dv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rs===null||!rs.has(r))){t=uo(n,t),t=yE(e,t,1),e=ns(e,t,1),t=Lt(),e!==null&&(cl(e,1,t),Ht(e,t));break}}e=e.return}}function Zk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ut&n)===n&&(Ye===4||Ye===3&&(ut&130023424)===ut&&500>Fe()-fm?Ws(t,0):hm|=n),Ht(t,e)}function ME(t,e){e===0&&(t.mode&1?(e=au,au<<=1,!(au&130023424)&&(au=4194304)):e=1);var n=Lt();t=pr(t,e),t!==null&&(cl(t,e,n),Ht(t,n))}function eC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ME(t,n)}function tC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),ME(t,n)}var VE;VE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)$t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $t=!1,Bk(t,e,n);$t=!!(t.flags&131072)}else $t=!1,Te&&e.flags&1048576&&Bw(e,dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ju(t,e),t=e.pendingProps;var s=io(e,At.current);Xi(e,n),s=om(null,e,r,t,s,n);var i=am();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wt(r)?(i=!0,uc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tm(e),s.updater=sd,e.stateNode=s,s._reactInternals=e,Pf(e,r,t,n),e=Lf(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&Gp(e),Ot(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ju(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rC(r),t=In(r,t),s){case 0:e=Of(null,e,r,t,n);break e;case 1:e=Tv(null,e,r,t,n);break e;case 11:e=Ev(null,e,r,t,n);break e;case 14:e=xv(null,e,r,In(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Of(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Tv(t,e,r,s,n);case 3:e:{if(EE(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Gw(t,e),pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=uo(Error(F(423)),e),e=Iv(t,e,r,n,s);break e}else if(r!==s){s=uo(Error(F(424)),e),e=Iv(t,e,r,n,s);break e}else for(Qt=ts(e.stateNode.containerInfo.firstChild),Jt=e,Te=!0,kn=null,n=Hw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oo(),r===s){e=mr(t,e,n);break e}Ot(t,e,r,n)}e=e.child}return e;case 5:return Qw(e),t===null&&Af(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,If(r,s)?o=null:i!==null&&If(r,i)&&(e.flags|=32),wE(t,e),Ot(t,e,o,n),e.child;case 6:return t===null&&Af(e),null;case 13:return xE(t,e,n);case 4:return nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ao(e,null,r,n):Ot(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),Ev(t,e,r,s,n);case 7:return Ot(t,e,e.pendingProps,n),e.child;case 8:return Ot(t,e,e.pendingProps.children,n),e.child;case 12:return Ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(hc,r._currentValue),r._currentValue=o,i!==null)if(An(i.value,o)){if(i.children===s.children&&!qt.current){e=mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ur(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ot(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xi(e,n),s=fn(s),r=r(s),e.flags|=1,Ot(t,e,r,n),e.child;case 14:return r=e.type,s=In(r,e.pendingProps),s=In(r.type,s),xv(t,e,r,s,n);case 15:return vE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:In(r,s),ju(t,e),e.tag=1,Wt(r)?(t=!0,uc(e)):t=!1,Xi(e,n),mE(e,r,s),Pf(e,r,s,n),Lf(null,e,r,!0,t,n);case 19:return TE(t,e,n);case 22:return _E(t,e,n)}throw Error(F(156,e.tag))};function UE(t,e){return hw(t,e)}function nC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new nC(t,e,n,r)}function ym(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rC(t){if(typeof t=="function")return ym(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jp)return 11;if(t===Mp)return 14}return 2}function is(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ym(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Di:return Hs(n.children,s,i,e);case Lp:o=8,s|=8;break;case tf:return t=cn(12,n,e,s|2),t.elementType=tf,t.lanes=i,t;case nf:return t=cn(13,n,e,s),t.elementType=nf,t.lanes=i,t;case rf:return t=cn(19,n,e,s),t.elementType=rf,t.lanes=i,t;case Q0:return ad(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K0:o=10;break e;case G0:o=9;break e;case jp:o=11;break e;case Mp:o=14;break e;case Mr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=cn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hs(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function ad(t,e,n,r){return t=cn(22,t,r,e),t.elementType=Q0,t.lanes=n,t.stateNode={isHidden:!1},t}function bh(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function Ph(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hh(0),this.expirationTimes=hh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vm(t,e,n,r,s,i,o,a,u){return t=new sC(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=cn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tm(i),t}function iC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FE(t){if(!t)return ds;t=t._reactInternals;e:{if(ci(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Wt(n))return Fw(t,n,e)}return e}function zE(t,e,n,r,s,i,o,a,u){return t=vm(n,r,!0,t,s,i,o,a,u),t.context=FE(null),n=t.current,r=Lt(),s=ss(n),i=ur(r,s),i.callback=e??null,ns(n,i,s),t.current.lanes=s,cl(t,s,r),Ht(t,r),t}function ld(t,e,n,r){var s=e.current,i=Lt(),o=ss(s);return n=FE(n),e.context===null?e.context=n:e.pendingContext=n,e=ur(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ns(s,e,o),t!==null&&(Rn(t,s,o,i),Du(t,s,o)),o}function xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _m(t,e){Ov(t,e),(t=t.alternate)&&Ov(t,e)}function oC(){return null}var BE=typeof reportError=="function"?reportError:function(t){console.error(t)};function wm(t){this._internalRoot=t}ud.prototype.render=wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ld(t,e,null,null)};ud.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zs(function(){ld(null,t,null,null)}),e[fr]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var e=_w();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fr.length&&e!==0&&e<Fr[n].priority;n++);Fr.splice(n,0,t),n===0&&Ew(t)}};function Em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lv(){}function aC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=xc(o);i.call(c)}}var o=zE(e,r,t,0,null,!1,!1,"",Lv);return t._reactRootContainer=o,t[fr]=o.current,Va(t.nodeType===8?t.parentNode:t),Zs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=xc(u);a.call(c)}}var u=vm(t,0,!1,null,null,!1,!1,"",Lv);return t._reactRootContainer=u,t[fr]=u.current,Va(t.nodeType===8?t.parentNode:t),Zs(function(){ld(e,u,n,r)}),u}function dd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=xc(o);a.call(u)}}ld(e,o,t,s)}else o=aC(n,e,t,s,r);return xc(o)}yw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=sa(e.pendingLanes);n!==0&&(Fp(e,n|1),Ht(e,Fe()),!(le&6)&&(co=Fe()+500,ws()))}break;case 13:Zs(function(){var r=pr(t,1);if(r!==null){var s=Lt();Rn(r,t,1,s)}}),_m(t,1)}};zp=function(t){if(t.tag===13){var e=pr(t,134217728);if(e!==null){var n=Lt();Rn(e,t,134217728,n)}_m(t,134217728)}};vw=function(t){if(t.tag===13){var e=ss(t),n=pr(t,e);if(n!==null){var r=Lt();Rn(n,t,e,r)}_m(t,e)}};_w=function(){return de};ww=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};pf=function(t,e,n){switch(e){case"input":if(af(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=td(r);if(!s)throw Error(F(90));X0(r),af(r,s)}}}break;case"textarea":Z0(t,n);break;case"select":e=n.value,e!=null&&Ki(t,!!n.multiple,e,!1)}};ow=pm;aw=Zs;var lC={usingClientEntryPoint:!1,Events:[hl,Mi,td,sw,iw,pm]},Zo={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uC={bundleType:Zo.bundleType,version:Zo.version,rendererPackageName:Zo.rendererPackageName,rendererConfig:Zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cw(t),t===null?null:t.stateNode},findFiberByHostInstance:Zo.findFiberByHostInstance||oC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Xc=vu.inject(uC),zn=vu}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lC;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Em(e))throw Error(F(200));return iC(t,e,null,n)};en.createRoot=function(t,e){if(!Em(t))throw Error(F(299));var n=!1,r="",s=BE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=vm(t,1,!1,null,null,n,!1,r,s),t[fr]=e.current,Va(t.nodeType===8?t.parentNode:t),new wm(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=cw(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return Zs(t)};en.hydrate=function(t,e,n){if(!cd(e))throw Error(F(200));return dd(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Em(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=BE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zE(e,null,t,1,n??null,s,!1,i,o),t[fr]=e.current,Va(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ud(e)};en.render=function(t,e,n){if(!cd(e))throw Error(F(200));return dd(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!cd(t))throw Error(F(40));return t._reactRootContainer?(Zs(function(){dd(null,null,t,!1,function(){t._reactRootContainer=null,t[fr]=null})}),!0):!1};en.unstable_batchedUpdates=pm;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!cd(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return dd(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(t){console.error(t)}}$E(),$0.exports=en;var qi=$0.exports,jv=qi;Zh.createRoot=jv.createRoot,Zh.hydrateRoot=jv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ka.apply(this,arguments)}var Yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yr||(Yr={}));const Mv="popstate";function cC(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:u=""}=di(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Kf("",{pathname:o,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof i=="string"?i:Tc(i))}function r(s,i){hd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return hC(e,n,r,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dC(){return Math.random().toString(36).substr(2,8)}function Vv(t,e){return{usr:t.state,key:t.key,idx:e}}function Kf(t,e,n,r){return n===void 0&&(n=null),Ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?di(e):e,{state:n,key:e&&e.key||r||dC()})}function Tc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function di(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Yr.Pop,u=null,c=f();c==null&&(c=0,o.replaceState(Ka({},o.state,{idx:c}),""));function f(){return(o.state||{idx:null}).idx}function p(){a=Yr.Pop;let C=f(),w=C==null?null:C-c;c=C,u&&u({action:a,location:R.location,delta:w})}function y(C,w){a=Yr.Push;let v=Kf(R.location,C,w);n&&n(v,C),c=f()+1;let _=Vv(v,c),b=R.createHref(v);try{o.pushState(_,"",b)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(b)}i&&u&&u({action:a,location:R.location,delta:1})}function E(C,w){a=Yr.Replace;let v=Kf(R.location,C,w);n&&n(v,C),c=f();let _=Vv(v,c),b=R.createHref(v);o.replaceState(_,"",b),i&&u&&u({action:a,location:R.location,delta:0})}function k(C){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof C=="string"?C:Tc(C);return v=v.replace(/ $/,"%20"),Ae(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let R={get action(){return a},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Mv,p),u=C,()=>{s.removeEventListener(Mv,p),u=null}},createHref(C){return e(s,C)},createURL:k,encodeLocation(C){let w=k(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:E,go(C){return o.go(C)}};return R}var Uv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uv||(Uv={}));function fC(t,e,n){return n===void 0&&(n="/"),pC(t,e,n)}function pC(t,e,n,r){let s=typeof e=="string"?di(e):e,i=ho(s.pathname||"/",n);if(i==null)return null;let o=qE(t);mC(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=kC(i);a=IC(o[u],c)}return a}function qE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ae(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=os([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Ae(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),qE(i.children,e,f,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:xC(c,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of WE(i.path))s(i,o,u)}),e}function WE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=WE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function mC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gC=/^:[\w-]+$/,yC=3,vC=2,_C=1,wC=10,EC=-2,Fv=t=>t==="*";function xC(t,e){let n=t.split("/"),r=n.length;return n.some(Fv)&&(r+=EC),e&&(r+=vC),n.filter(s=>!Fv(s)).reduce((s,i)=>s+(gC.test(i)?yC:i===""?_C:wC),r)}function TC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function IC(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Gf({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},f),y=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:os([i,p.pathname]),pathnameBase:bC(os([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=os([i,p.pathnameBase]))}return o}function Gf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=SC(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,f,p)=>{let{paramName:y,isOptional:E}=f;if(y==="*"){let R=a[p]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const k=a[p];return E&&!k?c[y]=void 0:c[y]=(k||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function SC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function kC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ho(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const CC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RC=t=>CC.test(t);function AC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?di(t):t,i;if(n)if(RC(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),hd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=zv(n.substring(1),"/"):i=zv(n,e)}else i=e;return{pathname:i,search:PC(r),hash:DC(s)}}function zv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Dh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xm(t,e){let n=NC(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=di(t):(s=Ka({},t),Ae(!s.pathname||!s.pathname.includes("?"),Dh("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),Dh("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),Dh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}a=p>=0?e[p]:"/"}let u=AC(s,a),c=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const os=t=>t.join("/").replace(/\/\/+/g,"/"),bC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const HE=["post","put","patch","delete"];new Set(HE);const LC=["get",...HE];new Set(LC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ga(){return Ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ga.apply(this,arguments)}const fd=x.createContext(null),KE=x.createContext(null),Sr=x.createContext(null),pd=x.createContext(null),kr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),GE=x.createContext(null);function jC(t,e){let{relative:n}=e===void 0?{}:e;Io()||Ae(!1);let{basename:r,navigator:s}=x.useContext(Sr),{hash:i,pathname:o,search:a}=md(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:os([r,o])),s.createHref({pathname:u,search:a,hash:i})}function Io(){return x.useContext(pd)!=null}function So(){return Io()||Ae(!1),x.useContext(pd).location}function QE(t){x.useContext(Sr).static||x.useLayoutEffect(t)}function YE(){let{isDataRoute:t}=x.useContext(kr);return t?XC():MC()}function MC(){Io()||Ae(!1);let t=x.useContext(fd),{basename:e,future:n,navigator:r}=x.useContext(Sr),{matches:s}=x.useContext(kr),{pathname:i}=So(),o=JSON.stringify(xm(s,n.v7_relativeSplatPath)),a=x.useRef(!1);return QE(()=>{a.current=!0}),x.useCallback(function(c,f){if(f===void 0&&(f={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=Tm(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:os([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}const VC=x.createContext(null);function UC(t){let e=x.useContext(kr).outlet;return e&&x.createElement(VC.Provider,{value:t},e)}function md(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Sr),{matches:s}=x.useContext(kr),{pathname:i}=So(),o=JSON.stringify(xm(s,r.v7_relativeSplatPath));return x.useMemo(()=>Tm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function FC(t,e){return zC(t,e)}function zC(t,e,n,r){Io()||Ae(!1);let{navigator:s}=x.useContext(Sr),{matches:i}=x.useContext(kr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=So(),f;if(e){var p;let C=typeof e=="string"?di(e):e;u==="/"||(p=C.pathname)!=null&&p.startsWith(u)||Ae(!1),f=C}else f=c;let y=f.pathname||"/",E=y;if(u!=="/"){let C=u.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=fC(t,{pathname:E}),R=HC(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:os([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:os([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&R?x.createElement(pd.Provider,{value:{location:Ga({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Yr.Pop}},R):R}function BC(){let t=YC(),e=OC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const $C=x.createElement(BC,null);class qC extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(kr.Provider,{value:this.props.routeContext},x.createElement(GE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WC(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(fd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(kr.Provider,{value:e},r)}function HC(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);f>=0||Ae(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:y,errors:E}=n,k=p.route.loader&&y[p.route.id]===void 0&&(!E||E[p.route.id]===void 0);if(p.route.lazy||k){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,y)=>{let E,k=!1,R=null,C=null;n&&(E=a&&p.route.id?a[p.route.id]:void 0,R=p.route.errorElement||$C,u&&(c<0&&y===0?(JC("route-fallback"),k=!0,C=null):c===y&&(k=!0,C=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,y+1)),v=()=>{let _;return E?_=R:k?_=C:p.route.Component?_=x.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=f,x.createElement(WC,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:_})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?x.createElement(qC,{location:n.location,revalidation:n.revalidation,component:R,error:E,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var XE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XE||{}),JE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(JE||{});function KC(t){let e=x.useContext(fd);return e||Ae(!1),e}function GC(t){let e=x.useContext(KE);return e||Ae(!1),e}function QC(t){let e=x.useContext(kr);return e||Ae(!1),e}function ZE(t){let e=QC(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function YC(){var t;let e=x.useContext(GE),n=GC(),r=ZE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XC(){let{router:t}=KC(XE.UseNavigateStable),e=ZE(JE.UseNavigateStable),n=x.useRef(!1);return QE(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ga({fromRouteId:e},i)))},[t,e])}const Bv={};function JC(t,e,n){Bv[t]||(Bv[t]=!0)}function ZC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Im(t){let{to:e,replace:n,state:r,relative:s}=t;Io()||Ae(!1);let{future:i,static:o}=x.useContext(Sr),{matches:a}=x.useContext(kr),{pathname:u}=So(),c=YE(),f=Tm(e,xm(a,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return x.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function eR(t){return UC(t.context)}function Tn(t){Ae(!1)}function tR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Yr.Pop,navigator:i,static:o=!1,future:a}=t;Io()&&Ae(!1);let u=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:u,navigator:i,static:o,future:Ga({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=di(r));let{pathname:f="/",search:p="",hash:y="",state:E=null,key:k="default"}=r,R=x.useMemo(()=>{let C=ho(f,u);return C==null?null:{location:{pathname:C,search:p,hash:y,state:E,key:k},navigationType:s}},[u,f,p,y,E,k,s]);return R==null?null:x.createElement(Sr.Provider,{value:c},x.createElement(pd.Provider,{children:n,value:R}))}function nR(t){let{children:e,location:n}=t;return FC(Qf(e),n)}new Promise(()=>{});function Qf(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let i=[...e,s];if(r.type===x.Fragment){n.push.apply(n,Qf(r.props.children,i));return}r.type!==Tn&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ic(){return Ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ic.apply(this,arguments)}function ex(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function rR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sR(t,e){return t.button===0&&(!e||e==="_self")&&!rR(t)}const iR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],aR="6";try{window.__reactRouterVersion=aR}catch{}const lR=x.createContext({isTransitioning:!1}),uR="startTransition",$v=Z1[uR];function cR(t){let{basename:e,children:n,future:r,window:s}=t,i=x.useRef();i.current==null&&(i.current=cC({window:s,v5Compat:!0}));let o=i.current,[a,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},f=x.useCallback(p=>{c&&$v?$v(()=>u(p)):u(p)},[u,c]);return x.useLayoutEffect(()=>o.listen(f),[o,f]),x.useEffect(()=>ZC(r),[r]),x.createElement(tR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const dR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fu=x.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:f,viewTransition:p}=e,y=ex(e,iR),{basename:E}=x.useContext(Sr),k,R=!1;if(typeof c=="string"&&hR.test(c)&&(k=c,dR))try{let _=new URL(window.location.href),b=c.startsWith("//")?new URL(_.protocol+c):new URL(c),O=ho(b.pathname,E);b.origin===_.origin&&O!=null?c=O+b.search+b.hash:R=!0}catch{}let C=jC(c,{relative:s}),w=pR(c,{replace:o,state:a,target:u,preventScrollReset:f,relative:s,viewTransition:p});function v(_){r&&r(_),_.defaultPrevented||w(_)}return x.createElement("a",Ic({},y,{href:k||C,onClick:R||i?r:v,ref:n,target:u}))}),qv=x.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:c,children:f}=e,p=ex(e,oR),y=md(u,{relative:p.relative}),E=So(),k=x.useContext(KE),{navigator:R,basename:C}=x.useContext(Sr),w=k!=null&&mR(y)&&c===!0,v=R.encodeLocation?R.encodeLocation(y).pathname:y.pathname,_=E.pathname,b=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;s||(_=_.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&C&&(b=ho(b,C)||b);const O=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=_===v||!o&&_.startsWith(v)&&_.charAt(O)==="/",S=b!=null&&(b===v||!o&&b.startsWith(v)&&b.charAt(v.length)==="/"),g={isActive:j,isPending:S,isTransitioning:w},I=j?r:void 0,A;typeof i=="function"?A=i(g):A=[i,j?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(g):a;return x.createElement(Fu,Ic({},p,{"aria-current":I,className:A,ref:n,style:P,to:u,viewTransition:c}),typeof f=="function"?f(g):f)});var Yf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yf||(Yf={}));var Wv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wv||(Wv={}));function fR(t){let e=x.useContext(fd);return e||Ae(!1),e}function pR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,u=YE(),c=So(),f=md(t,{relative:o});return x.useCallback(p=>{if(sR(p,n)){p.preventDefault();let y=r!==void 0?r:Tc(c)===Tc(f);u(t,{replace:y,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,f,r,s,n,t,i,o,a])}function mR(t,e){e===void 0&&(e={});let n=x.useContext(lR);n==null&&Ae(!1);let{basename:r}=fR(Yf.useViewTransitionState),s=md(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ho(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ho(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gf(s.pathname,o)!=null||Gf(s.pathname,i)!=null}let gR={data:""},yR=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||gR},vR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_R=/\/\*[^]*?\*\/|  +/g,Hv=/\n+/g,Br=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Br(o,i):i+"{"+Br(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Br(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Br.p?Br.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},tr={},tx=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+tx(t[n]);return e}return t},wR=(t,e,n,r,s)=>{let i=tx(t),o=tr[i]||(tr[i]=(u=>{let c=0,f=11;for(;c<u.length;)f=101*f+u.charCodeAt(c++)>>>0;return"go"+f})(i));if(!tr[o]){let u=i!==t?t:(c=>{let f,p,y=[{}];for(;f=vR.exec(c.replace(_R,""));)f[4]?y.shift():f[3]?(p=f[3].replace(Hv," ").trim(),y.unshift(y[0][p]=y[0][p]||{})):y[0][f[1]]=f[2].replace(Hv," ").trim();return y[0]})(t);tr[o]=Br(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&tr.g?tr.g:null;return n&&(tr.g=tr[o]),((u,c,f,p)=>{p?c.data=c.data.replace(p,u):c.data.indexOf(u)===-1&&(c.data=f?u+c.data:c.data+u)})(tr[o],e,r,a),o},ER=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":Br(a,""):a===!1?"":a}return r+s+(o??"")},"");function gd(t){let e=this||{},n=t.call?t(e.p):t;return wR(n.unshift?n.raw?ER(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,yR(e.target),e.g,e.o,e.k)}let nx,Xf,Jf;gd.bind({g:1});let gr=gd.bind({k:1});function xR(t,e,n,r){Br.p=e,nx=t,Xf=n,Jf=r}function Es(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),u=a.className||s.className;n.p=Object.assign({theme:Xf&&Xf()},a),n.o=/ *go\d+/.test(u),a.className=gd.apply(n,r)+(u?" "+u:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Jf&&c[0]&&Jf(a),nx(c,a)}return s}}var TR=t=>typeof t=="function",Sc=(t,e)=>TR(t)?t(e):t,IR=(()=>{let t=0;return()=>(++t).toString()})(),rx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),SR=20,Sm="default",sx=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return sx(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},zu=[],ix={toasts:[],pausedAt:void 0,settings:{toastLimit:SR}},Vn={},ox=(t,e=Sm)=>{Vn[e]=sx(Vn[e]||ix,t),zu.forEach(([n,r])=>{n===e&&r(Vn[e])})},ax=t=>Object.keys(Vn).forEach(e=>ox(t,e)),kR=t=>Object.keys(Vn).find(e=>Vn[e].toasts.some(n=>n.id===t)),yd=(t=Sm)=>e=>{ox(e,t)},CR={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},RR=(t={},e=Sm)=>{let[n,r]=x.useState(Vn[e]||ix),s=x.useRef(Vn[e]);x.useEffect(()=>(s.current!==Vn[e]&&r(Vn[e]),zu.push([e,r]),()=>{let o=zu.findIndex(([a])=>a===e);o>-1&&zu.splice(o,1)}),[e]);let i=n.toasts.map(o=>{var a,u,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||CR[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:i}},AR=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||IR()}),pl=t=>(e,n)=>{let r=AR(e,t,n);return yd(r.toasterId||kR(r.id))({type:2,toast:r}),r.id},Qe=(t,e)=>pl("blank")(t,e);Qe.error=pl("error");Qe.success=pl("success");Qe.loading=pl("loading");Qe.custom=pl("custom");Qe.dismiss=(t,e)=>{let n={type:3,toastId:t};e?yd(e)(n):ax(n)};Qe.dismissAll=t=>Qe.dismiss(void 0,t);Qe.remove=(t,e)=>{let n={type:4,toastId:t};e?yd(e)(n):ax(n)};Qe.removeAll=t=>Qe.remove(void 0,t);Qe.promise=(t,e,n)=>{let r=Qe.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Sc(e.success,s):void 0;return i?Qe.success(i,{id:r,...n,...n==null?void 0:n.success}):Qe.dismiss(r),s}).catch(s=>{let i=e.error?Sc(e.error,s):void 0;i?Qe.error(i,{id:r,...n,...n==null?void 0:n.error}):Qe.dismiss(r)}),t};var NR=1e3,bR=(t,e="default")=>{let{toasts:n,pausedAt:r}=RR(t,e),s=x.useRef(new Map).current,i=x.useCallback((p,y=NR)=>{if(s.has(p))return;let E=setTimeout(()=>{s.delete(p),o({type:4,toastId:p})},y);s.set(p,E)},[]);x.useEffect(()=>{if(r)return;let p=Date.now(),y=n.map(E=>{if(E.duration===1/0)return;let k=(E.duration||0)+E.pauseDuration-(p-E.createdAt);if(k<0){E.visible&&Qe.dismiss(E.id);return}return setTimeout(()=>Qe.dismiss(E.id,e),k)});return()=>{y.forEach(E=>E&&clearTimeout(E))}},[n,r,e]);let o=x.useCallback(yd(e),[e]),a=x.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=x.useCallback((p,y)=>{o({type:1,toast:{id:p,height:y}})},[o]),c=x.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),f=x.useCallback((p,y)=>{let{reverseOrder:E=!1,gutter:k=8,defaultPosition:R}=y||{},C=n.filter(_=>(_.position||R)===(p.position||R)&&_.height),w=C.findIndex(_=>_.id===p.id),v=C.filter((_,b)=>b<w&&_.visible).length;return C.filter(_=>_.visible).slice(...E?[v+1]:[0,v]).reduce((_,b)=>_+(b.height||0)+k,0)},[n]);return x.useEffect(()=>{n.forEach(p=>{if(p.dismissed)i(p.id,p.removeDelay);else{let y=s.get(p.id);y&&(clearTimeout(y),s.delete(p.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:u,startPause:a,endPause:c,calculateOffset:f}}},PR=gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DR=gr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OR=gr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LR=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${PR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OR} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,jR=gr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MR=Es("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${jR} 1s linear infinite;
`,VR=gr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,UR=gr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FR=Es("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${UR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,zR=Es("div")`
  position: absolute;
`,BR=Es("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$R=gr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qR=Es("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$R} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,WR=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(qR,null,e):e:n==="blank"?null:x.createElement(BR,null,x.createElement(MR,{...r}),n!=="loading"&&x.createElement(zR,null,n==="error"?x.createElement(LR,{...r}):x.createElement(FR,{...r})))},HR=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KR=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GR="0%{opacity:0;} 100%{opacity:1;}",QR="0%{opacity:1;} 100%{opacity:0;}",YR=Es("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,XR=Es("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JR=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=rx()?[GR,QR]:[HR(n),KR(n)];return{animation:e?`${gr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${gr(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZR=x.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?JR(t.position||e||"top-center",t.visible):{opacity:0},i=x.createElement(WR,{toast:t}),o=x.createElement(XR,{...t.ariaProps},Sc(t.message,t));return x.createElement(YR,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):x.createElement(x.Fragment,null,i,o))});xR(x.createElement);var eA=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=x.useCallback(o=>{if(o){let a=()=>{let u=o.getBoundingClientRect().height;r(t,u)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:i,className:e,style:n},s)},tA=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},nA=gd`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_u=16,rA=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:u,handlers:c}=bR(n,i);return x.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:_u,left:_u,right:_u,bottom:_u,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(f=>{let p=f.position||e,y=c.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),E=tA(p,y);return x.createElement(eA,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?nA:"",style:E},f.type==="custom"?Sc(f.message,f):s?s(f):x.createElement(ZR,{toast:f,position:p}))}))},H=Qe,Kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},sA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ux={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|a>>4;let y=(a&15)<<2|c>>6,E=c&63;u||(E=64,o||(y=64)),r.push(n[f],n[p],n[y],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||p==null)throw new iA;const y=i<<2|a>>4;if(r.push(y),c!==64){const E=a<<4&240|c>>2;if(r.push(E),p!==64){const k=c<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oA=function(t){const e=lx(t);return ux.encodeByteArray(e,!0)},kc=function(t){return oA(t).replace(/\./g,"")},cx=function(t){try{return ux.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=()=>aA().__FIREBASE_DEFAULTS__,uA=()=>{if(typeof process>"u"||typeof Kv>"u")return;const t=Kv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cx(t[1]);return e&&JSON.parse(e)},vd=()=>{try{return lA()||uA()||cA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dx=t=>{var e,n;return(n=(e=vd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hx=t=>{const e=dx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fx=()=>{var t;return(t=vd())===null||t===void 0?void 0:t.config},px=t=>{var e;return(e=vd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kc(JSON.stringify(n)),kc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nt())}function fA(){var t;const e=(t=vd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const t=Nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vA(){return!fA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _A(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EA,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ml.prototype.create)}}class ml{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Yn(s,a,r)}}function xA(t,e){return t.replace(TA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const TA=/\{\$([^}]+)}/g;function IA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Gv(i)&&Gv(o)){if(!Cc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Gv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function aa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SA(t,e){const n=new kA(t,e);return n.subscribe.bind(n)}class kA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Oh),s.error===void 0&&(s.error=Oh),s.complete===void 0&&(s.complete=Oh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NA(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AA(t){return t===Us?void 0:t}function NA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const PA={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},DA=se.INFO,OA={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},LA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=OA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class km{constructor(e){this.name=e,this._logLevel=DA,this._logHandler=LA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const jA=(t,e)=>e.some(n=>t instanceof n);let Qv,Yv;function MA(){return Qv||(Qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VA(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gx=new WeakMap,Zf=new WeakMap,yx=new WeakMap,Lh=new WeakMap,Cm=new WeakMap;function UA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(as(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gx.set(n,t)}).catch(()=>{}),Cm.set(e,t),e}function FA(t){if(Zf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zf.set(t,e)}let ep={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return as(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zA(t){ep=t(ep)}function BA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jh(this),e,...n);return yx.set(r,e.sort?e.sort():[e]),as(r)}:VA().includes(t)?function(...e){return t.apply(jh(this),e),as(gx.get(this))}:function(...e){return as(t.apply(jh(this),e))}}function $A(t){return typeof t=="function"?BA(t):(t instanceof IDBTransaction&&FA(t),jA(t,MA())?new Proxy(t,ep):t)}function as(t){if(t instanceof IDBRequest)return UA(t);if(Lh.has(t))return Lh.get(t);const e=$A(t);return e!==t&&(Lh.set(t,e),Cm.set(e,t)),e}const jh=t=>Cm.get(t);function qA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=as(o);return r&&o.addEventListener("upgradeneeded",u=>{r(as(o.result),u.oldVersion,u.newVersion,as(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WA=["get","getKey","getAll","getAllKeys","count"],HA=["put","add","delete","clear"],Mh=new Map;function Xv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mh.get(e))return Mh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||WA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return Mh.set(e,i),i}zA(t=>({...t,get:(e,n,r)=>Xv(e,n)||t.get(e,n,r),has:(e,n)=>!!Xv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tp="@firebase/app",Jv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new km("@firebase/app"),QA="@firebase/app-compat",YA="@firebase/analytics-compat",XA="@firebase/analytics",JA="@firebase/app-check-compat",ZA="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",rN="@firebase/data-connect",sN="@firebase/database-compat",iN="@firebase/functions",oN="@firebase/functions-compat",aN="@firebase/installations",lN="@firebase/installations-compat",uN="@firebase/messaging",cN="@firebase/messaging-compat",dN="@firebase/performance",hN="@firebase/performance-compat",fN="@firebase/remote-config",pN="@firebase/remote-config-compat",mN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",vN="@firebase/vertexai-preview",_N="@firebase/firestore-compat",wN="firebase",EN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="[DEFAULT]",xN={[tp]:"fire-core",[QA]:"fire-core-compat",[XA]:"fire-analytics",[YA]:"fire-analytics-compat",[ZA]:"fire-app-check",[JA]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[rN]:"fire-data-connect",[sN]:"fire-rtdb-compat",[iN]:"fire-fn",[oN]:"fire-fn-compat",[aN]:"fire-iid",[lN]:"fire-iid-compat",[uN]:"fire-fcm",[cN]:"fire-fcm-compat",[dN]:"fire-perf",[hN]:"fire-perf-compat",[fN]:"fire-rc",[pN]:"fire-rc-compat",[mN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[_N]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[wN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=new Map,TN=new Map,rp=new Map;function Zv(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(rp.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;rp.set(e,t);for(const n of Rc.values())Zv(n,t);for(const n of TN.values())Zv(n,t);return!0}function _d(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new ml("app","Firebase",IN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=EN;function vx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:np,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ls.create("bad-app-name",{appName:String(s)});if(n||(n=fx()),!n)throw ls.create("no-options");const i=Rc.get(s);if(i){if(Cc(n,i.options)&&Cc(r,i.config))return i;throw ls.create("duplicate-app",{appName:s})}const o=new bA(s);for(const u of rp.values())o.addComponent(u);const a=new SN(n,r,o);return Rc.set(s,a),a}function Rm(t=np){const e=Rc.get(t);if(!e&&t===np&&fx())return vx();if(!e)throw ls.create("no-app",{appName:t});return e}function $n(t,e,n){var r;let s=(r=xN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(a.join(" "));return}ei(new hs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firebase-heartbeat-database",CN=1,Qa="firebase-heartbeat-store";let Vh=null;function _x(){return Vh||(Vh=qA(kN,CN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ls.create("idb-open",{originalErrorMessage:t.message})})),Vh}async function RN(t){try{const n=(await _x()).transaction(Qa),r=await n.objectStore(Qa).get(wx(t));return await n.done,r}catch(e){if(e instanceof Yn)yr.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function e_(t,e){try{const r=(await _x()).transaction(Qa,"readwrite");await r.objectStore(Qa).put(e,wx(t)),await r.done}catch(n){if(n instanceof Yn)yr.warn(n.message);else{const r=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(r.message)}}}function wx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=1024,NN=30*24*60*60*1e3;class bN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=t_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=NN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t_(),{heartbeatsToSend:r,unsentEntries:s}=PN(this._heartbeatsCache.heartbeats),i=kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return yr.warn(n),""}}}function t_(){return new Date().toISOString().substring(0,10)}function PN(t,e=AN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),n_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),n_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _A()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return e_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return e_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function n_(t){return kc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){ei(new hs("platform-logger",e=>new KA(e),"PRIVATE")),ei(new hs("heartbeat",e=>new bN(e),"PRIVATE")),$n(tp,Jv,t),$n(tp,Jv,"esm2017"),$n("fire-js","")}ON("");function Am(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Ex(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LN=Ex,xx=new ml("auth","Firebase",Ex());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new km("@firebase/auth");function jN(t,...e){Ac.logLevel<=se.WARN&&Ac.warn(`Auth (${hi}): ${t}`,...e)}function Bu(t,...e){Ac.logLevel<=se.ERROR&&Ac.error(`Auth (${hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,...e){throw Nm(t,...e)}function qn(t,...e){return Nm(t,...e)}function Tx(t,e,n){const r=Object.assign(Object.assign({},LN()),{[e]:n});return new ml("auth","Firebase",r).create(e,{appName:t.name})}function cr(t){return Tx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xx.create(t,...e)}function Q(t,e,...n){if(!t)throw Nm(e,...n)}function or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function vr(t,e){t||or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function MN(){return r_()==="http:"||r_()==="https:"}function r_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MN()||mA()||"connection"in navigator)?navigator.onLine:!0}function UN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=hA()||gA()}get(){return VN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new yl(3e4,6e4);function xs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cr(t,e,n,r,s={}){return Sx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=gl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return pA()||(c.referrerPolicy="no-referrer"),Ix.fetch()(kx(t,t.config.apiHost,n,a),c)})}async function Sx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FN),e);try{const s=new $N(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw wu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw wu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw wu(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Tx(t,f,c);Nn(t,f)}}catch(s){if(s instanceof Yn)throw s;Nn(t,"network-request-failed",{message:String(s)})}}async function vl(t,e,n,r,s={}){const i=await Cr(t,e,n,r,s);return"mfaPendingCredential"in i&&Nn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function kx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?bm(t.config,s):`${t.config.apiScheme}://${s}`}function BN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $N{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),zN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qn(t,e,r);return s.customData._tokenResponse=n,s}function s_(t){return t!==void 0&&t.enterprise!==void 0}class qN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function WN(t,e){return Cr(t,"GET","/v2/recaptchaConfig",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return Cr(t,"POST","/v1/accounts:delete",e)}async function Cx(t,e){return Cr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KN(t,e=!1){const n=Ie(t),r=await n.getIdToken(e),s=Pm(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ea(Uh(s.auth_time)),issuedAtTime:Ea(Uh(s.iat)),expirationTime:Ea(Uh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uh(t){return Number(t)*1e3}function Pm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const s=cx(n);return s?JSON.parse(s):(Bu("Failed to decode base64 JWT payload"),null)}catch(s){return Bu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function i_(t){const e=Pm(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&GN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ea(this.lastLoginAt),this.creationTime=Ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fo(t,Cx(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Rx(i.providerUserInfo):[],a=XN(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ip(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function YN(t){const e=Ie(t);await Nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Rx(t){return t.map(e=>{var{providerId:n}=e,r=Am(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){const n=await Sx(t,{},async()=>{const r=gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=kx(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ix.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZN(t,e){return Cr(t,"POST","/v2/accounts:revokeToken",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=i_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await JN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Zi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zi,this.toJSON())}_performRefresh(){return or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ip(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fo(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KN(this,e)}reload(){return YN(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(cr(this.auth));const e=await this.getIdToken();return await fo(this,HN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:_,emailVerified:b,isAnonymous:O,providerData:j,stsTokenManager:S}=n;Q(_&&S,e,"internal-error");const g=Zi.fromJSON(this.name,S);Q(typeof _=="string",e,"internal-error"),jr(p,e.name),jr(y,e.name),Q(typeof b=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),jr(E,e.name),jr(k,e.name),jr(R,e.name),jr(C,e.name),jr(w,e.name),jr(v,e.name);const I=new ar({uid:_,auth:e,email:y,emailVerified:b,displayName:p,isAnonymous:O,photoURL:k,phoneNumber:E,tenantId:R,stsTokenManager:g,createdAt:w,lastLoginAt:v});return j&&Array.isArray(j)&&(I.providerData=j.map(A=>Object.assign({},A))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Zi;s.updateFromServerResponse(n);const i=new ar({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Rx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Zi;a.updateFromIdToken(r);const u=new ar({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ip(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;function lr(t){vr(t instanceof Function,"Expected a class definition");let e=o_.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,o_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ax.type="NONE";const a_=Ax;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e,n){return`firebase:${t}:${e}:${n}`}class eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$u(this.userKey,s.apiKey,i),this.fullPersistenceKey=$u("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new eo(lr(a_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||lr(a_);const o=$u(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const f=await c._get(o);if(f){const p=ar._fromJSON(e,f);c!==i&&(a=p),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new eo(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new eo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lx(e))return"Blackberry";if(jx(e))return"Webos";if(bx(e))return"Safari";if((e.includes("chrome/")||Px(e))&&!e.includes("edge/"))return"Chrome";if(Ox(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nx(t=Nt()){return/firefox\//i.test(t)}function bx(t=Nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Px(t=Nt()){return/crios\//i.test(t)}function Dx(t=Nt()){return/iemobile/i.test(t)}function Ox(t=Nt()){return/android/i.test(t)}function Lx(t=Nt()){return/blackberry/i.test(t)}function jx(t=Nt()){return/webos/i.test(t)}function Dm(t=Nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eb(t=Nt()){var e;return Dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tb(){return yA()&&document.documentMode===10}function Mx(t=Nt()){return Dm(t)||Ox(t)||jx(t)||Lx(t)||/windows phone/i.test(t)||Dx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t,e=[]){let n;switch(t){case"Browser":n=l_(Nt());break;case"Worker":n=`${l_(Nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${hi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(t,e={}){return Cr(t,"GET","/v2/passwordPolicy",xs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=6;class ib{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u_(this),this.idTokenSubscription=new u_(this),this.beforeStateQueue=new nb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=lr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cx(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Un(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(cr(this));const n=e?Ie(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rb(this),n=new ib(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ml("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&lr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&jN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fi(t){return Ie(t)}class u_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SA(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ab(t){wd=t}function Ux(t){return wd.loadJS(t)}function lb(){return wd.recaptchaEnterpriseScript}function ub(){return wd.gapiScript}function cb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const db="recaptcha-enterprise",hb="NO_RECAPTCHA";class fb{constructor(e){this.type=db,this.auth=fi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{WN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new qN(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;s_(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(hb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&s_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lb();u.length!==0&&(u+=a),Ux(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function c_(t,e,n,r=!1){const s=new fb(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function op(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await c_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await c_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e){const n=_d(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Cc(i,e??{}))return s;Nn(s,"already-initialized")}return n.initialize({options:e})}function mb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gb(t,e,n){const r=fi(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Fx(e),{host:o,port:a}=yb(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),vb()}function Fx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yb(t){const e=Fx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:d_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:d_(o)}}}function d_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}}async function _b(t,e){return Cr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e){return vl(t,"POST","/v1/accounts:signInWithPassword",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(t,e){return vl(t,"POST","/v1/accounts:signInWithEmailLink",xs(t,e))}async function xb(t,e){return vl(t,"POST","/v1/accounts:signInWithEmailLink",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Om{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ya(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ya(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,n,"signInWithPassword",wb);case"emailLink":return Eb(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,r,"signUpPassword",_b);case"emailLink":return xb(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t,e){return vl(t,"POST","/v1/accounts:signInWithIdp",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="http://localhost";class ti extends Om{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Am(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ti(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,to(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:Tb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sb(t){const e=oa(aa(t)).link,n=e?oa(aa(e)).deep_link_id:null,r=oa(aa(t)).deep_link_id;return(r?oa(aa(r)).link:null)||r||n||e||t}class Lm{constructor(e){var n,r,s,i,o,a;const u=oa(aa(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Ib((s=u.mode)!==null&&s!==void 0?s:null);Q(c&&f&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Sb(e);try{return new Lm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,n){return Ya._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lm.parseLink(n);return Q(r,"argument-error"),Ya._fromEmailAndCode(e,r.code,r.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends zx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends _l{constructor(){super("facebook.com")}static credential(e){return ti._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ti._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends _l{constructor(){super("github.com")}static credential(e){return ti._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends _l{constructor(){super("twitter.com")}static credential(e,n){return ti._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(t,e){return vl(t,"POST","/v1/accounts:signUp",xs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ar._fromIdTokenResponse(e,r,s),o=h_(r);return new ni({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=h_(r);return new ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function h_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Yn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bc(e,n,r,s)}}function Bx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(t,i,e,r):i})}async function Cb(t,e,n=!1){const r=await fo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ni._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(t,e,n=!1){const{auth:r}=t;if(Un(r.app))return Promise.reject(cr(r));const s="reauthenticate";try{const i=await fo(t,Bx(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=Pm(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),ni._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Nn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(t,e,n=!1){if(Un(t.app))return Promise.reject(cr(t));const r="signIn",s=await Bx(t,r,e),i=await ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Ab(t,e){return $x(fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(t){const e=fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Nb(t,e,n){if(Un(t.app))return Promise.reject(cr(t));const r=fi(t),o=await op(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kb).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&qx(t),u}),a=await ni._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function bb(t,e,n){return Un(t.app)?Promise.reject(cr(t)):Ab(Ie(t),ko.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qx(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(t,e){return Cr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ie(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await fo(r,Pb(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Ob(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function Lb(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function jb(t,e,n,r){return Ie(t).onAuthStateChanged(e,n,r)}function Mb(t){return Ie(t).signOut()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=1e3,Ub=10;class Hx extends Wx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ub):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Vb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hx.type="LOCAL";const Fb=Hx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends Wx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Kx.type="SESSION";const Gx=Kx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ed(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await zb(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=jm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const y=p;if(y.data.eventId===c)switch(y.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(y.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return window}function $b(t){Wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(){return typeof Wn().WorkerGlobalScope<"u"&&typeof Wn().importScripts=="function"}async function qb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Hb(){return Qx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="firebaseLocalStorageDb",Kb=1,Dc="firebaseLocalStorage",Xx="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xd(t,e){return t.transaction([Dc],e?"readwrite":"readonly").objectStore(Dc)}function Gb(){const t=indexedDB.deleteDatabase(Yx);return new wl(t).toPromise()}function ap(){const t=indexedDB.open(Yx,Kb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dc,{keyPath:Xx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dc)?e(r):(r.close(),await Gb(),e(await ap()))})})}async function f_(t,e,n){const r=xd(t,!0).put({[Xx]:e,value:n});return new wl(r).toPromise()}async function Qb(t,e){const n=xd(t,!1).get(e),r=await new wl(n).toPromise();return r===void 0?null:r.value}function p_(t,e){const n=xd(t,!0).delete(e);return new wl(n).toPromise()}const Yb=800,Xb=3;class Jx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Xb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ed._getInstance(Hb()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qb(),!this.activeServiceWorker)return;this.sender=new Bb(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ap();return await f_(e,Pc,"1"),await p_(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Qb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xd(s,!1).getAll();return new wl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Yb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jx.type="LOCAL";const Jb=Jx;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e){return e?lr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Om{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eP(t){return $x(t.auth,new Mm(t),t.bypassAuthState)}function tP(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),Rb(n,new Mm(t),t.bypassAuthState)}async function nP(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),Cb(n,new Mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eP;case"linkViaPopup":case"linkViaRedirect":return nP;case"reauthViaPopup":case"reauthViaRedirect":return tP;default:Nn(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new yl(2e3,1e4);class Wi extends Zx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rP.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="pendingRedirect",qu=new Map;class iP extends Zx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=qu.get(this.auth._key());if(!e){try{const r=await oP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}qu.set(this.auth._key(),e)}return this.bypassAuthState||qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oP(t,e){const n=uP(e),r=lP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function aP(t,e){qu.set(t._key(),e)}function lP(t){return lr(t._redirectPersistence)}function uP(t){return $u(sP,t.config.apiKey,t.name)}async function cP(t,e,n=!1){if(Un(t.app))return Promise.reject(cr(t));const r=fi(t),s=Zb(r,e),o=await new iP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=10*60*1e3;class hP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dP&&this.cachedEventUids.clear(),this.cachedEventUids.has(m_(e))}saveEventToCache(e){this.cachedEventUids.add(m_(e)),this.lastProcessedEventTime=Date.now()}}function m_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t,e={}){return Cr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gP=/^https?/;async function yP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pP(t);for(const n of e)try{if(vP(n))return}catch{}Nn(t,"unauthorized-domain")}function vP(t){const e=sp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gP.test(n))return!1;if(mP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new yl(3e4,6e4);function g_(){const t=Wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wP(t){return new Promise((e,n)=>{var r,s,i;function o(){g_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g_(),n(qn(t,"network-request-failed"))},timeout:_P.get()})}if(!((s=(r=Wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Wn().gapi)===null||i===void 0)&&i.load)o();else{const a=cb("iframefcb");return Wn()[a]=()=>{gapi.load?o():n(qn(t,"network-request-failed"))},Ux(`${ub()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function EP(t){return Wu=Wu||wP(t),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=new yl(5e3,15e3),TP="__/auth/iframe",IP="emulator/auth/iframe",SP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CP(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bm(e,IP):`https://${t.config.authDomain}/${TP}`,r={apiKey:e.apiKey,appName:t.name,v:hi},s=kP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${gl(r).slice(1)}`}async function RP(t){const e=await EP(t),n=Wn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:CP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),a=Wn().setTimeout(()=>{i(o)},xP.get());function u(){Wn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NP=500,bP=600,PP="_blank",DP="http://localhost";class y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OP(t,e,n,r=NP,s=bP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},AP),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Nt().toLowerCase();n&&(a=Px(c)?PP:n),Nx(c)&&(e=e||DP,u.scrollbars="yes");const f=Object.entries(u).reduce((y,[E,k])=>`${y}${E}=${k},`,"");if(eb(c)&&a!=="_self")return LP(e||"",a),new y_(null);const p=window.open(e||"",a,f);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new y_(p)}function LP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="__/auth/handler",MP="emulator/auth/handler",VP=encodeURIComponent("fac");async function v_(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:hi,eventId:s};if(e instanceof zx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",IA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof _l){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),c=u?`#${VP}=${encodeURIComponent(u)}`:"";return`${UP(t)}?${gl(a).slice(1)}${c}`}function UP({config:t}){return t.emulator?bm(t,MP):`https://${t.authDomain}/${jP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class FP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gx,this._completeRedirectFn=cP,this._overrideRedirectResult=aP}async _openPopup(e,n,r,s){var i;vr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await v_(e,n,r,sp(),s);return OP(e,o,jm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await v_(e,n,r,sp(),s);return $b(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(vr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await RP(e),r=new hP(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fh,{type:Fh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Fh];o!==void 0&&n(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Mx()||bx()||Dm()}}const zP=FP;var __="@firebase/auth",w_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qP(t){ei(new hs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vx(t)},c=new ob(r,s,i,u);return mb(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new hs("auth-internal",e=>{const n=fi(e.getProvider("auth").getImmediate());return(r=>new BP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n(__,w_,$P(t)),$n(__,w_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=5*60,HP=px("authIdTokenMaxAge")||WP;let E_=null;const KP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>HP)return;const s=n==null?void 0:n.token;E_!==s&&(E_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GP(t=Rm()){const e=_d(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pb(t,{popupRedirectResolver:zP,persistence:[Jb,Fb,Gx]}),r=px("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=KP(i.toString());Lb(n,o,()=>o(n.currentUser)),Ob(n,a=>o(a))}}const s=dx("auth");return s&&gb(n,`http://${s}`),n}function QP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ab({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",QP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qP("Browser");var x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,tT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,g){function I(){}I.prototype=g.prototype,S.D=g.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(A,P,D){for(var N=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)N[Se-2]=arguments[Se];return g.prototype[P].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,g,I){I||(I=0);var A=Array(16);if(typeof g=="string")for(var P=0;16>P;++P)A[P]=g.charCodeAt(I++)|g.charCodeAt(I++)<<8|g.charCodeAt(I++)<<16|g.charCodeAt(I++)<<24;else for(P=0;16>P;++P)A[P]=g[I++]|g[I++]<<8|g[I++]<<16|g[I++]<<24;g=S.g[0],I=S.g[1],P=S.g[2];var D=S.g[3],N=g+(D^I&(P^D))+A[0]+3614090360&4294967295;g=I+(N<<7&4294967295|N>>>25),N=D+(P^g&(I^P))+A[1]+3905402710&4294967295,D=g+(N<<12&4294967295|N>>>20),N=P+(I^D&(g^I))+A[2]+606105819&4294967295,P=D+(N<<17&4294967295|N>>>15),N=I+(g^P&(D^g))+A[3]+3250441966&4294967295,I=P+(N<<22&4294967295|N>>>10),N=g+(D^I&(P^D))+A[4]+4118548399&4294967295,g=I+(N<<7&4294967295|N>>>25),N=D+(P^g&(I^P))+A[5]+1200080426&4294967295,D=g+(N<<12&4294967295|N>>>20),N=P+(I^D&(g^I))+A[6]+2821735955&4294967295,P=D+(N<<17&4294967295|N>>>15),N=I+(g^P&(D^g))+A[7]+4249261313&4294967295,I=P+(N<<22&4294967295|N>>>10),N=g+(D^I&(P^D))+A[8]+1770035416&4294967295,g=I+(N<<7&4294967295|N>>>25),N=D+(P^g&(I^P))+A[9]+2336552879&4294967295,D=g+(N<<12&4294967295|N>>>20),N=P+(I^D&(g^I))+A[10]+4294925233&4294967295,P=D+(N<<17&4294967295|N>>>15),N=I+(g^P&(D^g))+A[11]+2304563134&4294967295,I=P+(N<<22&4294967295|N>>>10),N=g+(D^I&(P^D))+A[12]+1804603682&4294967295,g=I+(N<<7&4294967295|N>>>25),N=D+(P^g&(I^P))+A[13]+4254626195&4294967295,D=g+(N<<12&4294967295|N>>>20),N=P+(I^D&(g^I))+A[14]+2792965006&4294967295,P=D+(N<<17&4294967295|N>>>15),N=I+(g^P&(D^g))+A[15]+1236535329&4294967295,I=P+(N<<22&4294967295|N>>>10),N=g+(P^D&(I^P))+A[1]+4129170786&4294967295,g=I+(N<<5&4294967295|N>>>27),N=D+(I^P&(g^I))+A[6]+3225465664&4294967295,D=g+(N<<9&4294967295|N>>>23),N=P+(g^I&(D^g))+A[11]+643717713&4294967295,P=D+(N<<14&4294967295|N>>>18),N=I+(D^g&(P^D))+A[0]+3921069994&4294967295,I=P+(N<<20&4294967295|N>>>12),N=g+(P^D&(I^P))+A[5]+3593408605&4294967295,g=I+(N<<5&4294967295|N>>>27),N=D+(I^P&(g^I))+A[10]+38016083&4294967295,D=g+(N<<9&4294967295|N>>>23),N=P+(g^I&(D^g))+A[15]+3634488961&4294967295,P=D+(N<<14&4294967295|N>>>18),N=I+(D^g&(P^D))+A[4]+3889429448&4294967295,I=P+(N<<20&4294967295|N>>>12),N=g+(P^D&(I^P))+A[9]+568446438&4294967295,g=I+(N<<5&4294967295|N>>>27),N=D+(I^P&(g^I))+A[14]+3275163606&4294967295,D=g+(N<<9&4294967295|N>>>23),N=P+(g^I&(D^g))+A[3]+4107603335&4294967295,P=D+(N<<14&4294967295|N>>>18),N=I+(D^g&(P^D))+A[8]+1163531501&4294967295,I=P+(N<<20&4294967295|N>>>12),N=g+(P^D&(I^P))+A[13]+2850285829&4294967295,g=I+(N<<5&4294967295|N>>>27),N=D+(I^P&(g^I))+A[2]+4243563512&4294967295,D=g+(N<<9&4294967295|N>>>23),N=P+(g^I&(D^g))+A[7]+1735328473&4294967295,P=D+(N<<14&4294967295|N>>>18),N=I+(D^g&(P^D))+A[12]+2368359562&4294967295,I=P+(N<<20&4294967295|N>>>12),N=g+(I^P^D)+A[5]+4294588738&4294967295,g=I+(N<<4&4294967295|N>>>28),N=D+(g^I^P)+A[8]+2272392833&4294967295,D=g+(N<<11&4294967295|N>>>21),N=P+(D^g^I)+A[11]+1839030562&4294967295,P=D+(N<<16&4294967295|N>>>16),N=I+(P^D^g)+A[14]+4259657740&4294967295,I=P+(N<<23&4294967295|N>>>9),N=g+(I^P^D)+A[1]+2763975236&4294967295,g=I+(N<<4&4294967295|N>>>28),N=D+(g^I^P)+A[4]+1272893353&4294967295,D=g+(N<<11&4294967295|N>>>21),N=P+(D^g^I)+A[7]+4139469664&4294967295,P=D+(N<<16&4294967295|N>>>16),N=I+(P^D^g)+A[10]+3200236656&4294967295,I=P+(N<<23&4294967295|N>>>9),N=g+(I^P^D)+A[13]+681279174&4294967295,g=I+(N<<4&4294967295|N>>>28),N=D+(g^I^P)+A[0]+3936430074&4294967295,D=g+(N<<11&4294967295|N>>>21),N=P+(D^g^I)+A[3]+3572445317&4294967295,P=D+(N<<16&4294967295|N>>>16),N=I+(P^D^g)+A[6]+76029189&4294967295,I=P+(N<<23&4294967295|N>>>9),N=g+(I^P^D)+A[9]+3654602809&4294967295,g=I+(N<<4&4294967295|N>>>28),N=D+(g^I^P)+A[12]+3873151461&4294967295,D=g+(N<<11&4294967295|N>>>21),N=P+(D^g^I)+A[15]+530742520&4294967295,P=D+(N<<16&4294967295|N>>>16),N=I+(P^D^g)+A[2]+3299628645&4294967295,I=P+(N<<23&4294967295|N>>>9),N=g+(P^(I|~D))+A[0]+4096336452&4294967295,g=I+(N<<6&4294967295|N>>>26),N=D+(I^(g|~P))+A[7]+1126891415&4294967295,D=g+(N<<10&4294967295|N>>>22),N=P+(g^(D|~I))+A[14]+2878612391&4294967295,P=D+(N<<15&4294967295|N>>>17),N=I+(D^(P|~g))+A[5]+4237533241&4294967295,I=P+(N<<21&4294967295|N>>>11),N=g+(P^(I|~D))+A[12]+1700485571&4294967295,g=I+(N<<6&4294967295|N>>>26),N=D+(I^(g|~P))+A[3]+2399980690&4294967295,D=g+(N<<10&4294967295|N>>>22),N=P+(g^(D|~I))+A[10]+4293915773&4294967295,P=D+(N<<15&4294967295|N>>>17),N=I+(D^(P|~g))+A[1]+2240044497&4294967295,I=P+(N<<21&4294967295|N>>>11),N=g+(P^(I|~D))+A[8]+1873313359&4294967295,g=I+(N<<6&4294967295|N>>>26),N=D+(I^(g|~P))+A[15]+4264355552&4294967295,D=g+(N<<10&4294967295|N>>>22),N=P+(g^(D|~I))+A[6]+2734768916&4294967295,P=D+(N<<15&4294967295|N>>>17),N=I+(D^(P|~g))+A[13]+1309151649&4294967295,I=P+(N<<21&4294967295|N>>>11),N=g+(P^(I|~D))+A[4]+4149444226&4294967295,g=I+(N<<6&4294967295|N>>>26),N=D+(I^(g|~P))+A[11]+3174756917&4294967295,D=g+(N<<10&4294967295|N>>>22),N=P+(g^(D|~I))+A[2]+718787259&4294967295,P=D+(N<<15&4294967295|N>>>17),N=I+(D^(P|~g))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+g&4294967295,S.g[1]=S.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,g){g===void 0&&(g=S.length);for(var I=g-this.blockSize,A=this.B,P=this.h,D=0;D<g;){if(P==0)for(;D<=I;)s(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<g;)if(A[P++]=S.charCodeAt(D++),P==this.blockSize){s(this,A),P=0;break}}else for(;D<g;)if(A[P++]=S[D++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=g},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var g=1;g<S.length-8;++g)S[g]=0;var I=8*this.o;for(g=S.length-8;g<S.length;++g)S[g]=I&255,I/=256;for(this.u(S),S=Array(16),g=I=0;4>g;++g)for(var A=0;32>A;A+=8)S[I++]=this.g[g]>>>A&255;return S};function i(S,g){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=g(S)}function o(S,g){this.h=g;for(var I=[],A=!0,P=S.length-1;0<=P;P--){var D=S[P]|0;A&&D==g||(I[P]=D,A=!1)}this.g=I}var a={};function u(S){return-128<=S&&128>S?i(S,function(g){return new o([g|0],0>g?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return C(c(-S));for(var g=[],I=1,A=0;S>=I;A++)g[A]=S/I|0,I*=4294967296;return new o(g,0)}function f(S,g){if(S.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S.charAt(0)=="-")return C(f(S.substring(1),g));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(g,8)),A=p,P=0;P<S.length;P+=8){var D=Math.min(8,S.length-P),N=parseInt(S.substring(P,P+D),g);8>D?(D=c(Math.pow(g,D)),A=A.j(D).add(c(N))):(A=A.j(I),A=A.add(c(N)))}return A}var p=u(0),y=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-C(this).m();for(var S=0,g=1,I=0;I<this.g.length;I++){var A=this.i(I);S+=(0<=A?A:4294967296+A)*g,g*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k(this))return"0";if(R(this))return"-"+C(this).toString(S);for(var g=c(Math.pow(S,6)),I=this,A="";;){var P=b(I,g).g;I=w(I,P.j(g));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=P,k(I))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function k(S){if(S.h!=0)return!1;for(var g=0;g<S.g.length;g++)if(S.g[g]!=0)return!1;return!0}function R(S){return S.h==-1}t.l=function(S){return S=w(this,S),R(S)?-1:k(S)?0:1};function C(S){for(var g=S.g.length,I=[],A=0;A<g;A++)I[A]=~S.g[A];return new o(I,~S.h).add(y)}t.abs=function(){return R(this)?C(this):this},t.add=function(S){for(var g=Math.max(this.g.length,S.g.length),I=[],A=0,P=0;P<=g;P++){var D=A+(this.i(P)&65535)+(S.i(P)&65535),N=(D>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);A=N>>>16,D&=65535,N&=65535,I[P]=N<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(S,g){return S.add(C(g))}t.j=function(S){if(k(this)||k(S))return p;if(R(this))return R(S)?C(this).j(C(S)):C(C(this).j(S));if(R(S))return C(this.j(C(S)));if(0>this.l(E)&&0>S.l(E))return c(this.m()*S.m());for(var g=this.g.length+S.g.length,I=[],A=0;A<2*g;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<S.g.length;P++){var D=this.i(A)>>>16,N=this.i(A)&65535,Se=S.i(P)>>>16,nn=S.i(P)&65535;I[2*A+2*P]+=N*nn,v(I,2*A+2*P),I[2*A+2*P+1]+=D*nn,v(I,2*A+2*P+1),I[2*A+2*P+1]+=N*Se,v(I,2*A+2*P+1),I[2*A+2*P+2]+=D*Se,v(I,2*A+2*P+2)}for(A=0;A<g;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=g;A<2*g;A++)I[A]=0;return new o(I,0)};function v(S,g){for(;(S[g]&65535)!=S[g];)S[g+1]+=S[g]>>>16,S[g]&=65535,g++}function _(S,g){this.g=S,this.h=g}function b(S,g){if(k(g))throw Error("division by zero");if(k(S))return new _(p,p);if(R(S))return g=b(C(S),g),new _(C(g.g),C(g.h));if(R(g))return g=b(S,C(g)),new _(C(g.g),g.h);if(30<S.g.length){if(R(S)||R(g))throw Error("slowDivide_ only works with positive integers.");for(var I=y,A=g;0>=A.l(S);)I=O(I),A=O(A);var P=j(I,1),D=j(A,1);for(A=j(A,2),I=j(I,2);!k(A);){var N=D.add(A);0>=N.l(S)&&(P=P.add(I),D=N),A=j(A,1),I=j(I,1)}return g=w(S,P.j(g)),new _(P,g)}for(P=p;0<=S.l(g);){for(I=Math.max(1,Math.floor(S.m()/g.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(I),N=D.j(g);R(N)||0<N.l(S);)I-=A,D=c(I),N=D.j(g);k(D)&&(D=y),P=P.add(D),S=w(S,N)}return new _(P,S)}t.A=function(S){return b(this,S).h},t.and=function(S){for(var g=Math.max(this.g.length,S.g.length),I=[],A=0;A<g;A++)I[A]=this.i(A)&S.i(A);return new o(I,this.h&S.h)},t.or=function(S){for(var g=Math.max(this.g.length,S.g.length),I=[],A=0;A<g;A++)I[A]=this.i(A)|S.i(A);return new o(I,this.h|S.h)},t.xor=function(S){for(var g=Math.max(this.g.length,S.g.length),I=[],A=0;A<g;A++)I[A]=this.i(A)^S.i(A);return new o(I,this.h^S.h)};function O(S){for(var g=S.g.length+1,I=[],A=0;A<g;A++)I[A]=S.i(A)<<1|S.i(A-1)>>>31;return new o(I,S.h)}function j(S,g){var I=g>>5;g%=32;for(var A=S.g.length-I,P=[],D=0;D<A;D++)P[D]=0<g?S.i(D+I)>>>g|S.i(D+I+1)<<32-g:S.i(D+I);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Ks=o}).apply(typeof x_<"u"?x_:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nT,la,rT,Hu,lp,sT,iT,oT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in m))break e;m=m[L]}l=l[l.length-1],T=m[l],h=h(T),h!=T&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,T=!1,L={next:function(){if(!T&&m<l.length){var M=m++;return{value:h(M,l[M]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,m){return l.call.apply(l.bind,arguments)}function p(l,h,m){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function y(l,h,m){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function E(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function k(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(T,L,M){for(var z=Array(arguments.length-2),me=2;me<arguments.length;me++)z[me-2]=arguments[me];return h.prototype[L].apply(T,z)}}function R(l){const h=l.length;if(0<h){const m=Array(h);for(let T=0;T<h;T++)m[T]=l[T];return m}return[]}function C(l,h){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(u(T)){const L=l.length||0,M=T.length||0;l.length=L+M;for(let z=0;z<M;z++)l[L+z]=T[z]}else l.push(T)}}class w{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(l){return/^[\s\xa0]*$/.test(l)}function _(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var O=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function j(l,h,m){for(const T in l)h.call(m,l[T],T,l)}function S(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function g(l){const h={};for(const m in l)h[m]=l[m];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,h){let m,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(m in T)l[m]=T[m];for(let M=0;M<I.length;M++)m=I[M],Object.prototype.hasOwnProperty.call(T,m)&&(l[m]=T[m])}}function P(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function D(l){a.setTimeout(()=>{throw l},0)}function N(){var l=K;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Se{constructor(){this.h=this.g=null}add(h,m){const T=nn.get();T.set(h,m),this.h?this.h.next=T:this.g=T,this.h=T}}var nn=new w(()=>new pt,l=>l.reset());class pt{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,B=!1,K=new Se,X=()=>{const l=a.Promise.resolve(void 0);pe=()=>{l.then(ye)}};var ye=()=>{for(var l;l=N();){try{l.h.call(l.g)}catch(m){D(m)}var h=nn;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ft=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,h),a.removeEventListener("test",m,h)}catch{}return l}();function rn(l,h){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{b(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Me[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&rn.aa.h.call(this)}}k(rn,fe);var Me={2:"touch",3:"pen",4:"mouse"};rn.prototype.h=function(){rn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),Pl=0;function Dl(l,h,m,T,L){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!T,this.ha=L,this.key=++Pl,this.da=this.fa=!1}function mt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Rr(l){this.src=l,this.g={},this.h=0}Rr.prototype.add=function(l,h,m,T,L){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var z=yi(l,h,T,L);return-1<z?(h=l[z],m||(h.fa=!1)):(h=new Dl(h,this.src,M,!!T,L),h.fa=m,l.push(h)),h};function gn(l,h){var m=h.type;if(m in l.g){var T=l.g[m],L=Array.prototype.indexOf.call(T,h,void 0),M;(M=0<=L)&&Array.prototype.splice.call(T,L,1),M&&(mt(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function yi(l,h,m,T){for(var L=0;L<l.length;++L){var M=l[L];if(!M.da&&M.listener==h&&M.capture==!!m&&M.ha==T)return L}return-1}var yn="closure_lm_"+(1e6*Math.random()|0),Ar={};function Xn(l,h,m,T,L){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Xn(l,h[M],m,T,L);return null}return m=jl(m),l&&l[sn]?l.K(h,m,c(T)?!!T.capture:!1,L):Ol(l,h,m,!1,T,L)}function Ol(l,h,m,T,L,M){if(!h)throw Error("Invalid event type");var z=c(L)?!!L.capture:!!L,me=wi(l);if(me||(l[yn]=me=new Rr(l)),m=me.add(h,m,T,z,M),m.proxy)return m;if(T=Ll(),m.proxy=T,T.src=l,T.listener=m,l.addEventListener)Ft||(L=z),L===void 0&&(L=!1),l.addEventListener(h.toString(),T,L);else if(l.attachEvent)l.attachEvent(Rs(h.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ll(){function l(m){return h.call(l.src,l.listener,m)}const h=_i;return l}function vi(l,h,m,T,L){if(Array.isArray(h))for(var M=0;M<h.length;M++)vi(l,h[M],m,T,L);else T=c(T)?!!T.capture:!!T,m=jl(m),l&&l[sn]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],m=yi(M,m,T,L),-1<m&&(mt(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=wi(l))&&(h=l.g[h.toString()],l=-1,h&&(l=yi(h,m,T,L)),(m=-1<l?h[l]:null)&&on(m))}function on(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[sn])gn(h.i,l);else{var m=l.type,T=l.proxy;h.removeEventListener?h.removeEventListener(m,T,l.capture):h.detachEvent?h.detachEvent(Rs(m),T):h.addListener&&h.removeListener&&h.removeListener(T),(m=wi(h))?(gn(m,l),m.h==0&&(m.src=null,h[yn]=null)):mt(l)}}}function Rs(l){return l in Ar?Ar[l]:Ar[l]="on"+l}function _i(l,h){if(l.da)l=!0;else{h=new rn(h,this);var m=l.listener,T=l.ha||l.src;l.fa&&on(l),l=m.call(T,h)}return l}function wi(l){return l=l[yn],l instanceof Rr?l:null}var Ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function jl(l){return typeof l=="function"?l:(l[Ei]||(l[Ei]=function(h){return l.handleEvent(h)}),l[Ei])}function Je(){re.call(this),this.i=new Rr(this),this.M=this,this.F=null}k(Je,re),Je.prototype[sn]=!0,Je.prototype.removeEventListener=function(l,h,m,T){vi(this,l,h,m,T)};function Pe(l,h){var m,T=l.F;if(T)for(m=[];T;T=T.F)m.push(T);if(l=l.M,T=h.type||h,typeof h=="string")h=new fe(h,l);else if(h instanceof fe)h.target=h.target||l;else{var L=h;h=new fe(T,l),A(h,L)}if(L=!0,m)for(var M=m.length-1;0<=M;M--){var z=h.g=m[M];L=vn(z,T,!0,h)&&L}if(z=h.g=l,L=vn(z,T,!0,h)&&L,L=vn(z,T,!1,h)&&L,m)for(M=0;M<m.length;M++)z=h.g=m[M],L=vn(z,T,!1,h)&&L}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],T=0;T<m.length;T++)mt(m[T]);delete l.g[h],l.h--}}this.F=null},Je.prototype.K=function(l,h,m,T){return this.i.add(String(l),h,!1,m,T)},Je.prototype.L=function(l,h,m,T){return this.i.add(String(l),h,!0,m,T)};function vn(l,h,m,T){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,M=0;M<h.length;++M){var z=h[M];if(z&&!z.da&&z.capture==m){var me=z.listener,it=z.ha||z.src;z.fa&&gn(l.i,z),L=me.call(it,T)!==!1&&L}}return L&&!T.defaultPrevented}function Nr(l,h,m){if(typeof l=="function")m&&(l=y(l,m));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function jo(l){l.g=Nr(()=>{l.g=null,l.i&&(l.i=!1,jo(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class On extends re{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:jo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(l){re.call(this),this.h=l,this.g={}}k(br,re);var Ml=[];function Vl(l){j(l.g,function(h,m){this.g.hasOwnProperty(m)&&on(h)},l),l.g={}}br.prototype.N=function(){br.aa.N.call(this),Vl(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=a.JSON.stringify,Ul=a.JSON.parse,Gd=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function xi(){}xi.prototype.h=null;function Fl(l){return l.h||(l.h=l.i())}function zl(){}var Ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $e(){fe.call(this,"d")}k($e,fe);function rt(){fe.call(this,"c")}k(rt,fe);var Ve={},_n=null;function st(){return _n=_n||new Je}Ve.La="serverreachability";function gt(l){fe.call(this,Ve.La,l)}k(gt,fe);function yt(l){const h=st();Pe(h,new gt(h))}Ve.STAT_EVENT="statevent";function Jn(l,h){fe.call(this,Ve.STAT_EVENT,l),this.stat=h}k(Jn,fe);function ae(l){const h=st();Pe(h,new Jn(h,l))}Ve.Ma="timingevent";function wn(l,h){fe.call(this,Ve.Ma,l),this.size=h}k(wn,fe);function vt(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function bt(){this.g=!0}bt.prototype.xa=function(){this.g=!1};function bs(l,h,m,T,L,M){l.info(function(){if(l.g)if(M)for(var z="",me=M.split("&"),it=0;it<me.length;it++){var ue=me[it].split("=");if(1<ue.length){var _t=ue[0];ue=ue[1];var wt=_t.split("_");z=2<=wt.length&&wt[1]=="type"?z+(_t+"="+ue+"&"):z+(_t+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+h+`
`+m+`
`+z})}function Ps(l,h,m,T,L,M,z){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+h+`
`+m+`
`+M+" "+z})}function Pt(l,h,m,T){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Mo(l,m)+(T?" "+T:"")})}function Ds(l,h){l.info(function(){return"TIMEOUT: "+h})}bt.prototype.info=function(){};function Mo(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var T=m[l];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return As(m)}catch{return h}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$g={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qd;function $l(){}k($l,xi),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},Qd=new $l;function Pr(l,h,m,T){this.j=l,this.i=h,this.l=m,this.R=T||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qg}function qg(){this.i=null,this.g="",this.h=!1}var Wg={},Yd={};function Xd(l,h,m){l.L=1,l.v=Kl(Zn(h)),l.m=m,l.P=!0,Hg(l,null)}function Hg(l,h){l.F=Date.now(),ql(l),l.A=Zn(l.v);var m=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),oy(m.i,"t",T),l.C=0,m=l.j.J,l.h=new qg,l.g=Iy(l.j,m?h:null,!l.m),0<l.O&&(l.M=new On(y(l.Y,l,l.g),l.O)),h=l.U,m=l.g,T=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ml[0]=L.toString()),L=Ml);for(var M=0;M<L.length;M++){var z=Xn(m,L[M],T||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?g(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),yt(),bs(l.i,l.u,l.A,l.l,l.R,l.m)}Pr.prototype.ca=function(l){l=l.target;const h=this.M;h&&er(l)==3?h.j():this.Y(l)},Pr.prototype.Y=function(l){try{if(l==this.g)e:{const wt=er(this.g);var h=this.g.Ba();const Si=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||fy(this.g)))){this.J||wt!=4||h==7||(h==8||0>=Si?yt(3):yt(2)),Jd(this);var m=this.g.Z();this.X=m;t:if(Kg(this)){var T=fy(this.g);l="";var L=T.length,M=er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Os(this),Vo(this);var z="";break t}this.h.i=new a.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(T[h],{stream:!(M&&h==L-1)});T.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,Ps(this.i,this.u,this.A,this.l,this.R,wt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var me,it=this.g;if((me=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(me)){var ue=me;break t}}ue=null}if(m=ue)Pt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zd(this,m);else{this.o=!1,this.s=3,ae(12),Os(this),Vo(this);break e}}if(this.P){m=!0;let En;for(;!this.J&&this.C<z.length;)if(En=y1(this,z),En==Yd){wt==4&&(this.s=4,ae(14),m=!1),Pt(this.i,this.l,null,"[Incomplete Response]");break}else if(En==Wg){this.s=4,ae(15),Pt(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Pt(this.i,this.l,En,null),Zd(this,En);if(Kg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||z.length!=0||this.h.h||(this.s=1,ae(16),m=!1),this.o=this.o&&m,!m)Pt(this.i,this.l,z,"[Invalid Chunked Response]"),Os(this),Vo(this);else if(0<z.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),ih(_t),_t.M=!0,ae(11))}}else Pt(this.i,this.l,z,null),Zd(this,z);wt==4&&Os(this),this.o&&!this.J&&(wt==4?wy(this.j,this):(this.o=!1,ql(this)))}else O1(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),Os(this),Vo(this)}}}catch{}finally{}};function Kg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function y1(l,h){var m=l.C,T=h.indexOf(`
`,m);return T==-1?Yd:(m=Number(h.substring(m,T)),isNaN(m)?Wg:(T+=1,T+m>h.length?Yd:(h=h.slice(T,T+m),l.C=T+m,h)))}Pr.prototype.cancel=function(){this.J=!0,Os(this)};function ql(l){l.S=Date.now()+l.I,Gg(l,l.I)}function Gg(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=vt(y(l.ba,l),h)}function Jd(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Pr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ds(this.i,this.A),this.L!=2&&(yt(),ae(17)),Os(this),this.s=2,Vo(this)):Gg(this,this.S-l)};function Vo(l){l.j.G==0||l.J||wy(l.j,l)}function Os(l){Jd(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Vl(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Zd(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||eh(m.h,l))){if(!l.K&&eh(m.h,l)&&m.G==3){try{var T=m.Da.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Zl(m),Xl(m);else break e;sh(m),ae(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=vt(y(m.Za,m),6e3));if(1>=Xg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else js(m,11)}else if((l.K||m.g==l)&&Zl(m),!v(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let ue=L[h];if(m.T=ue[0],ue=ue[1],m.G==2)if(ue[0]=="c"){m.K=ue[1],m.ia=ue[2];const _t=ue[3];_t!=null&&(m.la=_t,m.j.info("VER="+m.la));const wt=ue[4];wt!=null&&(m.Aa=wt,m.j.info("SVER="+m.Aa));const Si=ue[5];Si!=null&&typeof Si=="number"&&0<Si&&(T=1.5*Si,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const En=l.g;if(En){const tu=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tu){var M=T.h;M.g||tu.indexOf("spdy")==-1&&tu.indexOf("quic")==-1&&tu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(th(M,M.h),M.h=null))}if(T.D){const oh=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;oh&&(T.ya=oh,_e(T.I,T.D,oh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var z=l;if(T.qa=Ty(T,T.J?T.ia:null,T.W),z.K){Jg(T.h,z);var me=z,it=T.L;it&&(me.I=it),me.B&&(Jd(me),ql(me)),T.g=z}else vy(T);0<m.i.length&&Jl(m)}else ue[0]!="stop"&&ue[0]!="close"||js(m,7);else m.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?js(m,7):rh(m):ue[0]!="noop"&&m.l&&m.l.ta(ue),m.v=0)}}yt(4)}catch{}}var v1=class{constructor(l,h){this.g=l,this.map=h}};function Qg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Xg(l){return l.h?1:l.g?l.g.size:0}function eh(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function th(l,h){l.g?l.g.add(h):l.h=h}function Jg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Qg.prototype.cancel=function(){if(this.i=Zg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Zg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return R(l.i)}function _1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,T=0;T<m;T++)h.push(l[T]);return h}h=[],m=0;for(T in l)h[m++]=l[T];return h}function w1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const T in l)h[m++]=T;return h}}}function ey(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=w1(l),T=_1(l),L=T.length,M=0;M<L;M++)h.call(void 0,T[M],m&&m[M],l)}var ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function E1(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var T=l[m].indexOf("="),L=null;if(0<=T){var M=l[m].substring(0,T);L=l[m].substring(T+1)}else M=l[m];h(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ls(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ls){this.h=l.h,Wl(this,l.j),this.o=l.o,this.g=l.g,Hl(this,l.s),this.l=l.l;var h=l.i,m=new zo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),ny(this,m),this.m=l.m}else l&&(h=String(l).match(ty))?(this.h=!1,Wl(this,h[1]||"",!0),this.o=Uo(h[2]||""),this.g=Uo(h[3]||"",!0),Hl(this,h[4]),this.l=Uo(h[5]||"",!0),ny(this,h[6]||"",!0),this.m=Uo(h[7]||"")):(this.h=!1,this.i=new zo(null,this.h))}Ls.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Fo(h,ry,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Fo(h,ry,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Fo(m,m.charAt(0)=="/"?I1:T1,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Fo(m,k1)),l.join("")};function Zn(l){return new Ls(l)}function Wl(l,h,m){l.j=m?Uo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Hl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function ny(l,h,m){h instanceof zo?(l.i=h,C1(l.i,l.h)):(m||(h=Fo(h,S1)),l.i=new zo(h,l.h))}function _e(l,h,m){l.i.set(h,m)}function Kl(l){return _e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Uo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fo(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,x1),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function x1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ry=/[#\/\?@]/g,T1=/[#\?:]/g,I1=/[#\?]/g,S1=/[#\?@]/g,k1=/#/g;function zo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Dr(l){l.g||(l.g=new Map,l.h=0,l.i&&E1(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=zo.prototype,t.add=function(l,h){Dr(this),this.i=null,l=Ti(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function sy(l,h){Dr(l),h=Ti(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function iy(l,h){return Dr(l),h=Ti(l,h),l.g.has(h)}t.forEach=function(l,h){Dr(this),this.g.forEach(function(m,T){m.forEach(function(L){l.call(h,L,T,this)},this)},this)},t.na=function(){Dr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let T=0;T<h.length;T++){const L=l[T];for(let M=0;M<L.length;M++)m.push(h[T])}return m},t.V=function(l){Dr(this);let h=[];if(typeof l=="string")iy(this,l)&&(h=h.concat(this.g.get(Ti(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return Dr(this),this.i=null,l=Ti(this,l),iy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function oy(l,h,m){sy(l,h),0<m.length&&(l.i=null,l.g.set(Ti(l,h),R(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var T=h[m];const M=encodeURIComponent(String(T)),z=this.V(T);for(T=0;T<z.length;T++){var L=M;z[T]!==""&&(L+="="+encodeURIComponent(String(z[T]))),l.push(L)}}return this.i=l.join("&")};function Ti(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function C1(l,h){h&&!l.j&&(Dr(l),l.i=null,l.g.forEach(function(m,T){var L=T.toLowerCase();T!=L&&(sy(this,T),oy(this,L,m))},l)),l.j=h}function R1(l,h){const m=new bt;if(a.Image){const T=new Image;T.onload=E(Or,m,"TestLoadImage: loaded",!0,h,T),T.onerror=E(Or,m,"TestLoadImage: error",!1,h,T),T.onabort=E(Or,m,"TestLoadImage: abort",!1,h,T),T.ontimeout=E(Or,m,"TestLoadImage: timeout",!1,h,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else h(!1)}function A1(l,h){const m=new bt,T=new AbortController,L=setTimeout(()=>{T.abort(),Or(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:T.signal}).then(M=>{clearTimeout(L),M.ok?Or(m,"TestPingServer: ok",!0,h):Or(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),Or(m,"TestPingServer: error",!1,h)})}function Or(l,h,m,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(m)}catch{}}function N1(){this.g=new Gd}function b1(l,h,m){const T=m||"";try{ey(l,function(L,M){let z=L;c(L)&&(z=As(L)),h.push(T+M+"="+encodeURIComponent(z))})}catch(L){throw h.push(T+"type="+encodeURIComponent("_badmap")),L}}function Gl(l){this.l=l.Ub||null,this.j=l.eb||!1}k(Gl,xi),Gl.prototype.g=function(){return new Ql(this.l,this.j)},Gl.prototype.i=function(l){return function(){return l}}({});function Ql(l,h){Je.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ql,Je),t=Ql.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,$o(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$o(this)),this.g&&(this.readyState=3,$o(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ay(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ay(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Bo(this):$o(this),this.readyState==3&&ay(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bo(this))},t.Qa=function(l){this.g&&(this.response=l,Bo(this))},t.ga=function(){this.g&&Bo(this)};function Bo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$o(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function $o(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ly(l){let h="";return j(l,function(m,T){h+=T,h+=":",h+=m,h+=`\r
`}),h}function nh(l,h,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=ly(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):_e(l,h,m))}function De(l){Je.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(De,Je);var P1=/^https?$/i,D1=["POST","PUT"];t=De.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qd.g(),this.v=this.o?Fl(this.o):Fl(Qd),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){uy(this,M);return}if(l=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)m.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())m.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(D1,h,void 0))||T||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of m)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hy(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){uy(this,M)}};function uy(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,cy(l),Yl(l)}function cy(l){l.A||(l.A=!0,Pe(l,"complete"),Pe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Pe(this,"complete"),Pe(this,"abort"),Yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yl(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dy(this):this.bb())},t.bb=function(){dy(this)};function dy(l){if(l.h&&typeof o<"u"&&(!l.v[1]||er(l)!=4||l.Z()!=2)){if(l.u&&er(l)==4)Nr(l.Ea,0,l);else if(Pe(l,"readystatechange"),er(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var T;if(T=z===0){var L=String(l.D).match(ty)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),T=!P1.test(L?L.toLowerCase():"")}m=T}if(m)Pe(l,"complete"),Pe(l,"success");else{l.m=6;try{var M=2<er(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",cy(l)}}finally{Yl(l)}}}}function Yl(l,h){if(l.g){hy(l);const m=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Pe(l,"ready");try{m.onreadystatechange=T}catch{}}}function hy(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function er(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Ul(h)}};function fy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function O1(l){const h={};l=(l.g&&2<=er(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(v(l[T]))continue;var m=P(l[T]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=h[L]||[];h[L]=M,M.push(m)}S(h,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function py(l){this.Aa=0,this.i=[],this.j=new bt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,l),this.cb=qo("retryDelaySeedMs",1e4,l),this.Wa=qo("forwardChannelMaxRetries",2,l),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Qg(l&&l.concurrentRequestLimit),this.Da=new N1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=py.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,T){ae(0),this.W=l,this.H=h||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=Ty(this,null,this.W),Jl(this)};function rh(l){if(my(l),l.G==3){var h=l.U++,m=Zn(l.I);if(_e(m,"SID",l.K),_e(m,"RID",h),_e(m,"TYPE","terminate"),Wo(l,m),h=new Pr(l,l.j,h),h.L=2,h.v=Kl(Zn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=h.v,m=!0),m||(h.g=Iy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ql(h)}xy(l)}function Xl(l){l.g&&(ih(l),l.g.cancel(),l.g=null)}function my(l){Xl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Zl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Jl(l){if(!Yg(l.h)&&!l.s){l.s=!0;var h=l.Ga;pe||X(),B||(pe(),B=!0),K.add(h,l),l.B=0}}function L1(l,h){return Xg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=vt(y(l.Ga,l,h),Ey(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Pr(this,this.j,l);let M=this.o;if(this.S&&(M?(M=g(M),A(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(h+=T,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=yy(this,L,h),m=Zn(this.I),_e(m,"RID",l),_e(m,"CVER",22),this.D&&_e(m,"X-HTTP-Session-Id",this.D),Wo(this,m),M&&(this.O?h="headers="+encodeURIComponent(String(ly(M)))+"&"+h:this.m&&nh(m,this.m,M)),th(this.h,L),this.Ua&&_e(m,"TYPE","init"),this.P?(_e(m,"$req",h),_e(m,"SID","null"),L.T=!0,Xd(L,m,null)):Xd(L,m,h),this.G=2}}else this.G==3&&(l?gy(this,l):this.i.length==0||Yg(this.h)||gy(this))};function gy(l,h){var m;h?m=h.l:m=l.U++;const T=Zn(l.I);_e(T,"SID",l.K),_e(T,"RID",m),_e(T,"AID",l.T),Wo(l,T),l.m&&l.o&&nh(T,l.m,l.o),m=new Pr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=yy(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),th(l.h,m),Xd(m,T,h)}function Wo(l,h){l.H&&j(l.H,function(m,T){_e(h,T,m)}),l.l&&ey({},function(m,T){_e(h,T,m)})}function yy(l,h,m){m=Math.min(l.i.length,m);var T=l.l?y(l.l.Na,l.l,l):null;e:{var L=l.i;let M=-1;for(;;){const z=["count="+m];M==-1?0<m?(M=L[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let me=!0;for(let it=0;it<m;it++){let ue=L[it].g;const _t=L[it].map;if(ue-=M,0>ue)M=Math.max(0,L[it].g-100),me=!1;else try{b1(_t,z,"req"+ue+"_")}catch{T&&T(_t)}}if(me){T=z.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,T}function vy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;pe||X(),B||(pe(),B=!0),K.add(h,l),l.v=0}}function sh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=vt(y(l.Fa,l),Ey(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,_y(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=vt(y(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),Xl(this),_y(this))};function ih(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function _y(l){l.g=new Pr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Zn(l.qa);_e(h,"RID","rpc"),_e(h,"SID",l.K),_e(h,"AID",l.T),_e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&_e(h,"TO",l.ja),_e(h,"TYPE","xmlhttp"),Wo(l,h),l.m&&l.o&&nh(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Kl(Zn(h)),m.m=null,m.P=!0,Hg(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Xl(this),sh(this),ae(19))};function Zl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function wy(l,h){var m=null;if(l.g==h){Zl(l),ih(l),l.g=null;var T=2}else if(eh(l.h,h))m=h.D,Jg(l.h,h),T=1;else return;if(l.G!=0){if(h.o)if(T==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;T=st(),Pe(T,new wn(T,m)),Jl(l)}else vy(l);else if(L=h.s,L==3||L==0&&0<h.X||!(T==1&&L1(l,h)||T==2&&sh(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),L){case 1:js(l,5);break;case 4:js(l,10);break;case 3:js(l,6);break;default:js(l,2)}}}function Ey(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function js(l,h){if(l.j.info("Error code "+h),h==2){var m=y(l.fb,l),T=l.Xa;const L=!T;T=new Ls(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wl(T,"https"),Kl(T),L?R1(T.toString(),m):A1(T.toString(),m)}else ae(2);l.G=0,l.l&&l.l.sa(h),xy(l),my(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function xy(l){if(l.G=0,l.ka=[],l.l){const h=Zg(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Ty(l,h,m){var T=m instanceof Ls?Zn(m):new Ls(m);if(T.g!="")h&&(T.g=h+"."+T.g),Hl(T,T.s);else{var L=a.location;T=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var M=new Ls(null);T&&Wl(M,T),h&&(M.g=h),L&&Hl(M,L),m&&(M.l=m),T=M}return m=l.D,h=l.ya,m&&h&&_e(T,m,h),_e(T,"VER",l.la),Wo(l,T),T}function Iy(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new De(new Gl({eb:m})):new De(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sy(){}t=Sy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function eu(){}eu.prototype.g=function(l,h){return new Kt(l,h)};function Kt(l,h){Je.call(this),this.g=new py(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!v(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ii(this)}k(Kt,Je),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){rh(this.g)},Kt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=As(l),l=m);h.i.push(new v1(h.Ya++,l)),h.G==3&&Jl(h)},Kt.prototype.N=function(){this.g.l=null,delete this.j,rh(this.g),delete this.g,Kt.aa.N.call(this)};function ky(l){$e.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}k(ky,$e);function Cy(){rt.call(this),this.status=1}k(Cy,rt);function Ii(l){this.g=l}k(Ii,Sy),Ii.prototype.ua=function(){Pe(this.g,"a")},Ii.prototype.ta=function(l){Pe(this.g,new ky(l))},Ii.prototype.sa=function(l){Pe(this.g,new Cy)},Ii.prototype.ra=function(){Pe(this.g,"b")},eu.prototype.createWebChannel=eu.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,oT=function(){return new eu},iT=function(){return st()},sT=Ve,lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,Hu=Bl,$g.COMPLETE="complete",rT=$g,zl.EventType=Ns,Ns.OPEN="a",Ns.CLOSE="b",Ns.ERROR="c",Ns.MESSAGE="d",Je.prototype.listen=Je.prototype.K,la=zl,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,nT=De}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const T_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new km("@firebase/firestore");function ea(){return ri.logLevel}function W(t,...e){if(ri.logLevel<=se.DEBUG){const n=e.map(Vm);ri.debug(`Firestore (${Co}): ${t}`,...n)}}function _r(t,...e){if(ri.logLevel<=se.ERROR){const n=e.map(Vm);ri.error(`Firestore (${Co}): ${t}`,...n)}}function po(t,...e){if(ri.logLevel<=se.WARN){const n=e.map(Vm);ri.warn(`Firestore (${Co}): ${t}`,...n)}}function Vm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+t;throw _r(e),new Error(e)}function he(t,e){t||Y()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class XP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JP{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new dr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new aT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new It(e)}}class ZP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class e2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ZP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){he(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new t2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=r2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function mo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Xe(0,0))}static max(){return new J(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends Xa{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const s2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Xa{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return s2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ee.fromString(e))}static fromName(e){return new G(Ee.fromString(e).popFirst(5))}static empty(){return new G(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ee(e.slice()))}}function i2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new fs(s,G.empty(),e)}function o2(t){return new fs(t.readTime,t.key,-1)}class fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fs(J.min(),G.empty(),-1)}static max(){return new fs(J.max(),G.empty(),-1)}}function a2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==l2)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++a,a===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function c2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Um.oe=-1;function Td(t){return t==null}function Oc(t){return t===0&&1/t==-1/0}function d2(t){return typeof t=="number"&&Number.isInteger(t)&&!Oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new S_(this.data.getIterator())}getIteratorFrom(e){return new S_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class S_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new ct(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cT("Invalid base64 string: "+i):i}}(e);return new ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const h2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(t){if(he(!!t),typeof t=="string"){let e=0;const n=h2.exec(t);if(he(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function si(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zm(t){const e=t.mapValue.fields.__previous_value__;return Fm(e)?zm(e):e}function Ja(t){const e=ps(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu={mapValue:{}};function ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fm(t)?4:m2(t)?9007199254740991:p2(t)?10:11:Y()}function Gn(t,e){if(t===e)return!0;const n=ii(t);if(n!==ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ps(s.timestampValue),a=ps(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return si(s.bytesValue).isEqual(si(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),a=Ue(i.doubleValue);return o===a?Oc(o)===Oc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return mo(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(I_(o)!==I_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Gn(o[u],a[u])))return!1;return!0}(t,e);default:return Y()}}function el(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function go(t,e){if(t===e)return 0;const n=ii(t),r=ii(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return k_(t.timestampValue,e.timestampValue);case 4:return k_(Ja(t),Ja(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=si(i),u=si(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const f=ce(a[c],u[c]);if(f!==0)return f}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(Ue(i.latitude),Ue(o.latitude));return a!==0?a:ce(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,f;const p=i.fields||{},y=o.fields||{},E=(a=p.value)===null||a===void 0?void 0:a.arrayValue,k=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=ce(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:C_(E,k)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Tu.mapValue&&o===Tu.mapValue)return 0;if(i===Tu.mapValue)return 1;if(o===Tu.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=ce(u[p],f[p]);if(y!==0)return y;const E=go(a[u[p]],c[f[p]]);if(E!==0)return E}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function k_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=ps(t),r=ps(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function C_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=go(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function yo(t){return up(t)}function up(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ps(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=up(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${up(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function R_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cp(t){return!!t&&"integerValue"in t}function Bm(t){return!!t&&"arrayValue"in t}function A_(t){return!!t&&"nullValue"in t}function N_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ku(t){return!!t&&"mapValue"in t}function p2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function m2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xa(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=xa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ku(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Bt(xa(this.value))}}function dT(t){const e=[];return pi(t.fields,(n,r)=>{const s=new lt([n]);if(Ku(r)){const i=dT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kt(e,0,J.min(),J.min(),J.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,s){return new kt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new kt(e,2,n,J.min(),J.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,J.min(),J.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.position=e,this.inclusive=n}}function b_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=go(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function P_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n="asc"){this.field=e,this.dir=n}}function g2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{}class He extends hT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new v2(e,n,r):n==="array-contains"?new E2(e,r):n==="in"?new x2(e,r):n==="not-in"?new T2(e,r):n==="array-contains-any"?new I2(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _2(e,r):new w2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(go(n,this.value)):n!==null&&ii(this.value)===ii(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bn extends hT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new bn(e,n)}matches(e){return fT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fT(t){return t.op==="and"}function pT(t){return y2(t)&&fT(t)}function y2(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function dp(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+yo(t.value);if(pT(t))return t.filters.map(e=>dp(e)).join(",");{const e=t.filters.map(n=>dp(n)).join(",");return`${t.op}(${e})`}}function mT(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Gn(r.value,s.value)}(t,e):t instanceof bn?function(r,s){return s instanceof bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&mT(o,s.filters[a]),!0):!1}(t,e):void Y()}function gT(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${yo(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(gT).join(" ,")+"}"}(t):"Filter"}class v2 extends He{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class _2 extends He{constructor(e,n){super(e,"in",n),this.keys=yT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class w2 extends He{constructor(e,n){super(e,"not-in",n),this.keys=yT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class E2 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&el(n.arrayValue,this.value)}}class x2 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}}class T2 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!el(this.value.arrayValue,n)}}class I2 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>el(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function D_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new S2(t,e,n,r,s,i,o)}function $m(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yo(r)).join(",")),e.ue=n}return e.ue}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!g2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!P_(t.startAt,e.startAt)&&P_(t.endAt,e.endAt)}function hp(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function k2(t,e,n,r,s,i,o,a){return new Ro(t,e,n,r,s,i,o,a)}function Wm(t){return new Ro(t)}function O_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vT(t){return t.collectionGroup!==null}function Ta(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ct(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new tl(i,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new tl(lt.keyField(),r))}return e.ce}function Hn(t){const e=Z(t);return e.le||(e.le=C2(e,Ta(t))),e.le}function C2(t,e){if(t.limitType==="F")return D_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new tl(s.field,i)});const n=t.endAt?new Lc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lc(t.startAt.position,t.startAt.inclusive):null;return D_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function fp(t,e){const n=t.filters.concat([e]);return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jc(t,e,n){return new Ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Id(t,e){return qm(Hn(t),Hn(e))&&t.limitType===e.limitType}function _T(t){return`${$m(Hn(t))}|lt:${t.limitType}`}function Ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gT(s)).join(", ")}]`),Td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>yo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>yo(s)).join(",")),`Target(${r})`}(Hn(t))}; limitType=${t.limitType})`}function Sd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ta(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=b_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Ta(r),s)||r.endAt&&!function(o,a,u){const c=b_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Ta(r),s))}(t,e)}function R2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wT(t){return(e,n)=>{let r=!1;for(const s of Ta(t)){const i=A2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function A2(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?go(u,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new be(G.comparator);function wr(){return N2}const ET=new be(G.comparator);function ua(...t){let e=ET;for(const n of t)e=e.insert(n.key,n);return e}function xT(t){let e=ET;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qs(){return Ia()}function TT(){return Ia()}function Ia(){return new Ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const b2=new be(G.comparator),P2=new ct(G.comparator);function ne(...t){let e=P2;for(const n of t)e=e.add(n);return e}const D2=new ct(ce);function O2(){return D2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oc(e)?"-0":e}}function IT(t){return{integerValue:""+t}}function L2(t,e){return d2(e)?IT(e):Hm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function j2(t,e,n){return t instanceof nl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Fm(i)&&(i=zm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof rl?kT(t,e):t instanceof sl?CT(t,e):function(s,i){const o=ST(s,i),a=L_(o)+L_(s.Pe);return cp(o)&&cp(s.Pe)?IT(a):Hm(s.serializer,a)}(t,e)}function M2(t,e,n){return t instanceof rl?kT(t,e):t instanceof sl?CT(t,e):n}function ST(t,e){return t instanceof Mc?function(r){return cp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class nl extends kd{}class rl extends kd{constructor(e){super(),this.elements=e}}function kT(t,e){const n=RT(e);for(const r of t.elements)n.some(s=>Gn(s,r))||n.push(r);return{arrayValue:{values:n}}}class sl extends kd{constructor(e){super(),this.elements=e}}function CT(t,e){let n=RT(e);for(const r of t.elements)n=n.filter(s=>!Gn(s,r));return{arrayValue:{values:n}}}class Mc extends kd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function L_(t){return Ue(t.integerValue||t.doubleValue)}function RT(t){return Bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.field=e,this.transform=n}}function U2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof rl&&s instanceof rl||r instanceof sl&&s instanceof sl?mo(r.elements,s.elements,Gn):r instanceof Mc&&s instanceof Mc?Gn(r.Pe,s.Pe):r instanceof nl&&s instanceof nl}(t.transform,e.transform)}class F2{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cd{}function AT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Km(t.key,hn.none()):new Tl(t.key,t.data,hn.none());{const n=t.data,r=Bt.empty();let s=new ct(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ts(t.key,r,new Yt(s.toArray()),hn.none())}}function z2(t,e,n){t instanceof Tl?function(s,i,o){const a=s.value.clone(),u=M_(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ts?function(s,i,o){if(!Gu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=M_(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(NT(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sa(t,e,n,r){return t instanceof Tl?function(i,o,a,u){if(!Gu(i.precondition,o))return a;const c=i.value.clone(),f=V_(i.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ts?function(i,o,a,u){if(!Gu(i.precondition,o))return a;const c=V_(i.fieldTransforms,u,o),f=o.data;return f.setAll(NT(i)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return Gu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function B2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ST(r.transform,s||null);i!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,i))}return n||null}function j_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mo(r,s,(i,o)=>U2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tl extends Cd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Cd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function NT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function M_(t,e,n){const r=new Map;he(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,M2(o,a,n[s]))}return r}function V_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,j2(i,o,e))}return r}class Km extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $2 extends Cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&z2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=AT(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,(n,r)=>j_(n,r))&&mo(this.baseMutations,e.baseMutations,(n,r)=>j_(n,r))}}class Gm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length);let s=function(){return b2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Gm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,ie;function K2(t){switch(t){default:return Y();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function bT(t){if(t===void 0)return _r("GRPC error has no .code"),V.UNKNOWN;switch(t){case qe.OK:return V.OK;case qe.CANCELLED:return V.CANCELLED;case qe.UNKNOWN:return V.UNKNOWN;case qe.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case qe.INTERNAL:return V.INTERNAL;case qe.UNAVAILABLE:return V.UNAVAILABLE;case qe.UNAUTHENTICATED:return V.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case qe.NOT_FOUND:return V.NOT_FOUND;case qe.ALREADY_EXISTS:return V.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return V.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case qe.ABORTED:return V.ABORTED;case qe.OUT_OF_RANGE:return V.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return V.UNIMPLEMENTED;case qe.DATA_LOSS:return V.DATA_LOSS;default:return Y()}}(ie=qe||(qe={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=new Ks([4294967295,4294967295],0);function U_(t){const e=G2().encode(t),n=new tT;return n.update(e),new Uint8Array(n.digest())}function F_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ks([n,r],0),new Ks([s,i],0)]}class Qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ca(`Invalid padding: ${n}`);if(r<0)throw new ca(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ca(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ks.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ks.fromNumber(r)));return s.compare(Q2)===1&&(s=new Ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=U_(e),[r,s]=F_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=U_(e),[r,s]=F_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rd(J.min(),s,new be(ce),wr(),ne())}}class Il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class PT{constructor(e,n){this.targetId=e,this.me=n}}class DT{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class z_{constructor(){this.fe=0,this.ge=$_(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=$_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Y2{constructor(e){this.Le=e,this.Be=new Map,this.ke=wr(),this.qe=B_(),this.Qe=new be(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(hp(i))if(r===0){const o=new G(i.path);this.Ue(n,o,kt.newNoDocument(o,J.min()))}else he(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=si(r).toUint8Array()}catch(u){if(u instanceof cT)return po("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Qm(o,s,i)}catch(u){return po(u instanceof ca?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&hp(a.target)){const u=new G(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,kt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Rd(e,n,this.Qe,this.ke,r);return this.ke=wr(),this.qe=B_(),this.Qe=new be(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new z_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function B_(){return new be(G.comparator)}function $_(){return new be(G.comparator)}const X2={asc:"ASCENDING",desc:"DESCENDING"},J2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z2={and:"AND",or:"OR"};class eD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pp(t,e){return t.useProto3Json||Td(e)?e:{value:e}}function Vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tD(t,e){return Vc(t,e.toTimestamp())}function Kn(t){return he(!!t),J.fromTimestamp(function(n){const r=ps(n);return new Xe(r.seconds,r.nanos)}(t))}function Ym(t,e){return mp(t,e).canonicalString()}function mp(t,e){const n=function(s){return new Ee(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LT(t){const e=Ee.fromString(t);return he(FT(e)),e}function gp(t,e){return Ym(t.databaseId,e.path)}function zh(t,e){const n=LT(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(MT(n))}function jT(t,e){return Ym(t.databaseId,e)}function nD(t){const e=LT(t);return e.length===4?Ee.emptyPath():MT(e)}function yp(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MT(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function q_(t,e,n){return{name:gp(t,e),fields:n.value.mapValue.fields}}function rD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,f){return c.useProto3Json?(he(f===void 0||typeof f=="string"),ft.fromBase64String(f||"")):(he(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ft.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const f=c.code===void 0?V.UNKNOWN:bT(c.code);return new $(f,c.message||"")}(o);n=new DT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zh(t,r.document.name),i=Kn(r.document.updateTime),o=r.document.createTime?Kn(r.document.createTime):J.min(),a=new Bt({mapValue:{fields:r.document.fields}}),u=kt.newFoundDocument(s,i,o,a),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Qu(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zh(t,r.document),i=r.readTime?Kn(r.readTime):J.min(),o=kt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Qu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zh(t,r.document),i=r.removedTargetIds||[];n=new Qu([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new H2(s,i),a=r.targetId;n=new PT(a,o)}}return n}function sD(t,e){let n;if(e instanceof Tl)n={update:q_(t,e.key,e.value)};else if(e instanceof Km)n={delete:gp(t,e.key)};else if(e instanceof Ts)n={update:q_(t,e.key,e.data),updateMask:fD(e.fieldMask)};else{if(!(e instanceof $2))return Y();n={verify:gp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof nl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:tD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function iD(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Kn(s.updateTime):Kn(i);return o.isEqual(J.min())&&(o=Kn(i)),new F2(o,s.transformResults||[])}(n,e))):[]}function oD(t,e){return{documents:[jT(t,e.path)]}}function aD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jT(t,s);const i=function(c){if(c.length!==0)return UT(bn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(f=>function(y){return{field:Ai(y.field),direction:cD(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=pp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function lD(t){let e=nD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const y=VT(p);return y instanceof bn&&pT(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(k){return new tl(Ni(k.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Td(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,E=p.values||[];return new Lc(E,y)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const y=!p.before,E=p.values||[];return new Lc(E,y)}(n.endAt)),k2(e,s,o,i,a,"F",u,c)}function uD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ni(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ni(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ni(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ni(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return He.create(Ni(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(r=>VT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function cD(t){return X2[t]}function dD(t){return J2[t]}function hD(t){return Z2[t]}function Ai(t){return{fieldPath:t.canonicalString()}}function Ni(t){return lt.fromServerFormat(t.fieldPath)}function UT(t){return t instanceof He?function(n){if(n.op==="=="){if(N_(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NAN"}};if(A_(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(N_(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NAN"}};if(A_(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ai(n.field),op:dD(n.op),value:n.value}}}(t):t instanceof bn?function(n){const r=n.getFilters().map(s=>UT(s));return r.length===1?r[0]:{compositeFilter:{op:hD(n.op),filters:r}}}(t):Y()}function fD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,s,i=J.min(),o=J.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.ct=e}}function mD(t){const e=lD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.un=new yD}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(fs.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class yD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vo(0)}static kn(){return new vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.changes=new Ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Sa(r.mutation,s,Yt.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=qs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ua();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=wr();const o=Ia(),a=function(){return Ia()}();return n.forEach((u,c)=>{const f=r.get(c.key);s.has(c.key)&&(f===void 0||f.mutation instanceof Ts)?i=i.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Sa(f.mutation,c,f.mutation.getFieldMask(),Xe.now())):o.set(c.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var p;return a.set(c,new _D(f,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ia();let s=new be((o,a)=>o-a),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||Yt.empty();f=a.applyToLocalView(c,f),r.set(u,f);const p=(s.get(a.batchId)||ne()).add(u);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,f=u.value,p=TT();f.forEach(y=>{if(!i.has(y)){const E=AT(n.get(y),r.get(y));E!==null&&p.set(y,E),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(qs());let a=-1,u=i;return o.next(c=>U.forEach(c,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ne())).next(f=>({batchId:a,changes:xT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=ua();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ua();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,u=>{const c=function(p,y){return new Ro(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,kt.newInvalidDocument(f)))});let a=ua();return o.forEach((u,c)=>{const f=i.get(u);f!==void 0&&Sa(f.mutation,c,Yt.empty(),Xe.now()),Sd(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Kn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:mD(s.bundledQuery),readTime:Kn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.overlays=new be(G.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=qs(),i=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=i.get(c.largestBatchId);f===null&&(f=qs(),i=i.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const a=qs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>a.set(c,f)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W2(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Tr=new ct(Ze.Er),this.dr=new ct(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ee([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ee([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(Ze.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q2(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Ze(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(ce);return n.forEach(s=>{const i=new Ze(s,0),o=new Ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new Ze(new G(i),0);let a=new ct(ce);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ze(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.Mr=e,this.docs=function(){return new be(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=wr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():kt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=wr();const o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||a2(o2(f),r)<=0||(s.has(f.key)||Sd(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kD(this)}getSize(e){return U.resolve(this.size)}}class kD extends vD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.persistence=e,this.Nr=new Ao(n=>$m(n),qm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xm,this.targetCount=0,this.kr=vo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new vo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Um(0),this.Kr=!1,this.Kr=!0,this.$r=new TD,this.referenceDelegate=e(this),this.Ur=new CD(this),this.indexManager=new gD,this.remoteDocumentCache=function(s){return new SD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new pD(n),this.Gr=new ED(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ID(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new AD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class AD extends u2{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Jr=new Xm,this.Yr=null}static Zr(e){return new Jm(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vA()?8:c2(Nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ND;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(ea()<=se.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(ea()<=se.DEBUG&&W("QueryEngine","Query:",Ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(ea()<=se.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):U.resolve())}Yi(e,n){if(O_(n))return U.resolve(null);let r=Hn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=jc(n,null,"F"),r=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,jc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return O_(n)||s.isEqual(J.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(ea()<=se.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ri(n)),this.rs(e,o,n,i2(s,-1)).next(a=>a))})}ts(e,n){let r=new ct(wT(e));return n.forEach((s,i)=>{Sd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return ea()<=se.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ri(n)),this.Ji.getDocumentsMatchingQuery(e,n,fs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(ce),this._s=new Ao(i=>$m(i),qm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function DD(t,e,n,r){return new PD(t,e,n,r)}async function zT(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ne();for(const c of s){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of i){a.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function OD(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,f){const p=c.batch,y=p.keys();let E=U.resolve();return y.forEach(k=>{E=E.next(()=>f.getEntry(u,k)).next(R=>{const C=c.docVersions.get(k);he(C!==null),R.version.compareTo(C)<0&&(p.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),f.addEntry(R)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function BT(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function LD(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((f,p)=>{const y=s.get(p);if(!y)return;a.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let E=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?E=E.withResumeToken(ft.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(p,E),function(R,C,w){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(y,E,f)&&a.push(n.Ur.updateTargetData(i,E))});let u=wr(),c=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(jD(i,o,e.documentUpdates).next(f=>{u=f.Ps,c=f.Is})),!r.isEqual(J.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function jD(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=wr();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function MD(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VD(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Xr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function vp(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xl(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function W_(t,e,n){const r=Z(t);let s=J.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const p=Z(u),y=p._s.get(f);return y!==void 0?U.resolve(p.os.get(y)):p.Ur.getTargetData(c,f)}(r,o,Hn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ne())).next(a=>(UD(r,R2(e),a),{documents:a,Ts:i})))}function UD(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class H_{constructor(){this.activeTargetIds=O2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FD{constructor(){this.so=new H_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new H_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu=null;function Bh(){return Iu===null?Iu=function(){return 268435456+Math.round(2147483648*Math.random())}():Iu++,"0x"+Iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class qD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Bh(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(f=>(W("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw po("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=BD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bh();return new Promise((o,a)=>{const u=new nT;u.setWithCredentials(!0),u.listenOnce(rT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hu.NO_ERROR:const f=u.getResponseJson();W(Tt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Hu.TIMEOUT:W(Tt,`RPC '${e}' ${i} timed out`),a(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const p=u.getStatus();if(W(Tt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y==null?void 0:y.error;if(E&&E.status&&E.message){const k=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(E.status);a(new $(k,E.message))}else a(new $(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(V.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(Tt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(Tt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Bh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oT(),a=iT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");W(Tt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let y=!1,E=!1;const k=new $D({Io:C=>{E?W(Tt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(y||(W(Tt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),y=!0),W(Tt,`RPC '${e}' stream ${s} sending:`,C),p.send(C))},To:()=>p.close()}),R=(C,w,v)=>{C.listen(w,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return R(p,la.EventType.OPEN,()=>{E||(W(Tt,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),R(p,la.EventType.CLOSE,()=>{E||(E=!0,W(Tt,`RPC '${e}' stream ${s} transport closed`),k.So())}),R(p,la.EventType.ERROR,C=>{E||(E=!0,po(Tt,`RPC '${e}' stream ${s} transport errored:`,C),k.So(new $(V.UNAVAILABLE,"The operation could not be completed")))}),R(p,la.EventType.MESSAGE,C=>{var w;if(!E){const v=C.data[0];he(!!v);const _=v,b=_.error||((w=_[0])===null||w===void 0?void 0:w.error);if(b){W(Tt,`RPC '${e}' stream ${s} received error:`,b);const O=b.status;let j=function(I){const A=qe[I];if(A!==void 0)return bT(A)}(O),S=b.message;j===void 0&&(j=V.INTERNAL,S="Unknown error status: "+O+" with message "+b.message),E=!0,k.So(new $(j,S)),p.close()}else W(Tt,`RPC '${e}' stream ${s} received:`,v),k.bo(v)}}),R(a,sT.STAT_EVENT,C=>{C.stat===lp.PROXY?W(Tt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===lp.NOPROXY&&W(Tt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){return new eD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $T(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WD extends qT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=rD(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Kn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yp(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=hp(u)?{documents:oD(i,u)}:{query:aD(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=OT(i,o.resumeToken);const c=pp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Vc(i,o.snapshotVersion.toTimestamp());const c=pp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=uD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yp(this.serializer),n.removeTarget=e,this.a_(n)}}class HD extends qT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=iD(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,mp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,mp(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class GD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_r(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{mi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Z(u);c.L_.add(4),await Sl(c),c.q_.set("Unknown"),c.L_.delete(4),await Nd(c)}(this))})}),this.q_=new GD(r,s)}}async function Nd(t){if(mi(t))for(const e of t.B_)await e(!0)}async function Sl(t){for(const e of t.B_)await e(!1)}function WT(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),rg(n)?ng(n):No(n).r_()&&tg(n,e))}function eg(t,e){const n=Z(t),r=No(n);n.N_.delete(e),r.r_()&&HT(n,e),n.N_.size===0&&(r.r_()?r.o_():mi(n)&&n.q_.set("Unknown"))}function tg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).A_(e)}function HT(t,e){t.Q_.xe(e),No(t).R_(e)}function ng(t){t.Q_=new Y2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),No(t).start(),t.q_.v_()}function rg(t){return mi(t)&&!No(t).n_()&&t.N_.size>0}function mi(t){return Z(t).L_.size===0}function KT(t){t.Q_=void 0}async function YD(t){t.q_.set("Online")}async function XD(t){t.N_.forEach((e,n)=>{tg(t,e)})}async function JD(t,e){KT(t),rg(t)?(t.q_.M_(e),ng(t)):t.q_.set("Unknown")}async function ZD(t,e,n){if(t.q_.set("Online"),e instanceof DT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uc(t,r)}else if(e instanceof Qu?t.Q_.Ke(e):e instanceof PT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await BT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(c);f&&i.N_.set(c,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(ft.EMPTY_BYTE_STRING,f.snapshotVersion)),HT(i,u);const p=new Xr(f.target,u,c,f.sequenceNumber);tg(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Uc(t,r)}}async function Uc(t,e,n){if(!xl(e))throw e;t.L_.add(1),await Sl(t),t.q_.set("Offline"),n||(n=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Nd(t)})}function GT(t,e){return e().catch(n=>Uc(t,n,e))}async function bd(t){const e=Z(t),n=ms(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eO(e);)try{const s=await MD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,tO(e,s)}catch(s){await Uc(e,s)}QT(e)&&YT(e)}function eO(t){return mi(t)&&t.O_.length<10}function tO(t,e){t.O_.push(e);const n=ms(t);n.r_()&&n.V_&&n.m_(e.mutations)}function QT(t){return mi(t)&&!ms(t).n_()&&t.O_.length>0}function YT(t){ms(t).start()}async function nO(t){ms(t).p_()}async function rO(t){const e=ms(t);for(const n of t.O_)e.m_(n.mutations)}async function sO(t,e,n){const r=t.O_.shift(),s=Gm.from(r,e,n);await GT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await bd(t)}async function iO(t,e){e&&ms(t).V_&&await async function(r,s){if(function(o){return K2(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();ms(r).s_(),await GT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bd(r)}}(t,e),QT(t)&&YT(t)}async function G_(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=mi(n);n.L_.add(3),await Sl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Nd(n)}async function oO(t,e){const n=Z(t);e?(n.L_.delete(2),await Nd(n)):e||(n.L_.add(2),await Sl(n),n.q_.set("Unknown"))}function No(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new WD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:YD.bind(null,t),Ro:XD.bind(null,t),mo:JD.bind(null,t),d_:ZD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),rg(t)?ng(t):t.q_.set("Unknown")):(await t.K_.stop(),KT(t))})),t.K_}function ms(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new HD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nO.bind(null,t),mo:iO.bind(null,t),f_:rO.bind(null,t),g_:sO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await bd(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new sg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ig(t,e){if(_r("AsyncQueue",`${e}: ${t}`),xl(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=ua(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new no;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.W_=new be(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _o{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _o(e,n,no.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lO{constructor(){this.queries=Y_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Y_(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function Y_(){return new Ao(t=>_T(t),Id)}async function XT(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new aO,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ig(o,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&og(n)}async function JT(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uO(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&og(n)}function cO(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function og(t){t.Y_.forEach(e=>{e.next()})}var _p,X_;(X_=_p||(_p={})).ea="default",X_.Cache="cache";class ZT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.key=e}}class tI{constructor(e){this.key=e}}class dO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=wT(e),this.Ra=new no(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Q_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const y=s.get(f),E=Sd(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;y&&E?y.data.isEqual(E.data)?k!==R&&(r.track({type:3,doc:E}),C=!0):this.ga(y,E)||(r.track({type:2,doc:E}),C=!0,(u&&this.Aa(E,u)>0||c&&this.Aa(E,c)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),C=!0):y&&!E&&(r.track({type:1,doc:y}),C=!0,(u||c)&&(a=!0)),C&&(E?(o=o.add(E),i=R?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(E,k){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return R(E)-R(k)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new _o(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Q_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new tI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new eI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _o.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class hO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fO{constructor(e){this.key=e,this.va=!1}}class pO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ao(a=>_T(a),Id),this.Ma=new Map,this.xa=new Set,this.Oa=new be(G.comparator),this.Na=new Map,this.La=new Xm,this.Ba={},this.ka=new Map,this.qa=vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mO(t,e,n=!0){const r=aI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await nI(r,e,n,!0),s}async function gO(t,e){const n=aI(t);await nI(n,e,!0,!1)}async function nI(t,e,n,r){const s=await VD(t.localStore,Hn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await yO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&WT(t.remoteStore,s),a}async function yO(t,e,n,r,s){t.Ka=(p,y,E)=>async function(R,C,w,v){let _=C.view.ma(w);_.ns&&(_=await W_(R.localStore,C.query,!1).then(({documents:S})=>C.view.ma(S,_)));const b=v&&v.targetChanges.get(C.targetId),O=v&&v.targetMismatches.get(C.targetId)!=null,j=C.view.applyChanges(_,R.isPrimaryClient,b,O);return Z_(R,C.targetId,j.wa),j.snapshot}(t,p,y,E);const i=await W_(t.localStore,e,!0),o=new dO(e,i.Ts),a=o.ma(i.documents),u=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);Z_(t,n,c.wa);const f=new hO(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function vO(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Id(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&eg(r.remoteStore,s.targetId),wp(r,s.targetId)}).catch(El)):(wp(r,s.targetId),await vp(r.localStore,s.targetId,!0))}async function _O(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eg(n.remoteStore,r.targetId))}async function wO(t,e,n){const r=CO(t);try{const s=await function(o,a){const u=Z(o),c=Xe.now(),f=a.reduce((E,k)=>E.add(k.key),ne());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let k=wr(),R=ne();return u.cs.getEntries(E,f).next(C=>{k=C,k.forEach((w,v)=>{v.isValidDocument()||(R=R.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,k)).next(C=>{p=C;const w=[];for(const v of a){const _=B2(v,p.get(v.key).overlayedDocument);_!=null&&w.push(new Ts(v.key,_,dT(_.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,w,a)}).next(C=>{y=C;const w=C.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(E,C.batchId,w)})}).then(()=>({batchId:y.batchId,changes:xT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new be(ce)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await kl(r,s.changes),await bd(r.remoteStore)}catch(s){const i=ig(s,"Failed to persist write");n.reject(i)}}async function rI(t,e){const n=Z(t);try{const r=await LD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?he(o.va):s.removedDocuments.size>0&&(he(o.va),o.va=!1))}),await kl(n,r,e)}catch(r){await El(r)}}function J_(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=Z(o);u.onlineState=a;let c=!1;u.queries.forEach((f,p)=>{for(const y of p.j_)y.Z_(a)&&(c=!0)}),c&&og(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EO(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new be(G.comparator);o=o.insert(i,kt.newNoDocument(i,J.min()));const a=ne().add(i),u=new Rd(J.min(),new Map,new be(ce),o,a);await rI(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),ag(r)}else await vp(r.localStore,e,!1).then(()=>wp(r,e,n)).catch(El)}async function xO(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await OD(n.localStore,e);iI(n,r,null),sI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kl(n,s)}catch(s){await El(s)}}async function TO(t,e,n){const r=Z(t);try{const s=await function(o,a){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,a).next(p=>(he(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(r.localStore,e);iI(r,e,n),sI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kl(r,s)}catch(s){await El(s)}}function sI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function iI(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||oI(t,r)})}function oI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(eg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ag(t))}function Z_(t,e,n){for(const r of n)r instanceof eI?(t.La.addReference(r.key,e),IO(t,r)):r instanceof tI?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||oI(t,r.key)):Y()}function IO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),ag(t))}function ag(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new fO(n)),t.Oa=t.Oa.insert(n,r),WT(t.remoteStore,new Xr(Hn(Wm(n.path)),r,"TargetPurposeLimboResolution",Um.oe))}}async function kl(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var f;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=Zm.Wi(u.targetId,c);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const f=Z(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(c,y=>U.forEach(y.$i,E=>f.persistence.referenceDelegate.addReference(p,y.targetId,E)).next(()=>U.forEach(y.Ui,E=>f.persistence.referenceDelegate.removeReference(p,y.targetId,E)))))}catch(p){if(!xl(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const y=p.targetId;if(!p.fromCache){const E=f.os.get(y),k=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(y,R)}}}(r.localStore,i))}async function SO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await zT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kl(n,r.hs)}}function kO(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function aI(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EO.bind(null,e),e.Ca.d_=uO.bind(null,e.eventManager),e.Ca.$a=cO.bind(null,e.eventManager),e}function CO(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TO.bind(null,e),e}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return DD(this.persistence,new bD,e.initialUser,this.serializer)}Ga(e){return new RD(Jm.Zr,this.serializer)}Wa(e){return new FD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class Ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SO.bind(null,this.syncEngine),await oO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lO}()}createDatastore(e){const n=Ad(e.databaseInfo.databaseId),r=function(i){return new qD(i)}(e.databaseInfo);return function(i,o,a,u){return new KD(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new QD(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>J_(this.syncEngine,n,0),function(){return K_.D()?new K_:new zD}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,f){const p=new pO(s,i,o,a,u,c);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Sl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=lT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ig(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await zT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function e0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AO(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>G_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>G_(e.remoteStore,s)),t._onlineComponents=e}async function AO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await qh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;po("Error using user provided cache. Falling back to memory cache: "+n),await qh(t,new Fc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await qh(t,new Fc);return t._offlineComponents}async function uI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await e0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await e0(t,new Ep))),t._onlineComponents}function NO(t){return uI(t).then(e=>e.syncEngine)}async function cI(t){const e=await uI(t),n=e.eventManager;return n.onListen=mO.bind(null,e.syncEngine),n.onUnlisten=vO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_O.bind(null,e.syncEngine),n}function bO(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const f=new lI({next:y=>{f.Za(),o.enqueueAndForget(()=>JT(i,p));const E=y.docs.has(a);!E&&y.fromCache?c.reject(new $(V.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&u.source==="server"?c.reject(new $(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(y)},error:y=>c.reject(y)}),p=new ZT(Wm(a.path),f,{includeMetadataChanges:!0,_a:!0});return XT(i,p)}(await cI(t),t.asyncQueue,e,n,r)),r.promise}function PO(t,e,n={}){const r=new dr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const f=new lI({next:y=>{f.Za(),o.enqueueAndForget(()=>JT(i,p)),y.fromCache&&u.source==="server"?c.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(y)},error:y=>c.reject(y)}),p=new ZT(a,f,{includeMetadataChanges:!0,_a:!0});return XT(i,p)}(await cI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DO(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n0(t){if(!G.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function r0(t){if(G.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pd(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function OO(t,e){if(e<=0)throw new $(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YP;switch(r.type){case"firstParty":return new e2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=t0.get(n);r&&(W("ComponentProvider","Removing Datastore"),t0.delete(n),r.terminate())}(this),Promise.resolve()}}function LO(t,e,n,r={}){var s;const i=(t=Pn(t,Dd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=It.MOCK_USER;else{a=mx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new It(c)}t._authCredentials=new XP(new aT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Is(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class us extends Is{constructor(e,n,r){super(e,n,Wm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new G(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function dt(t,e,...n){if(t=Ie(t),hI("collection","path",e),t instanceof Dd){const r=Ee.fromString(e,...n);return r0(r),new us(t,null,r)}{if(!(t instanceof jt||t instanceof us))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return r0(r),new us(t.firestore,null,r)}}function Be(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=lT.newId()),hI("doc","path",e),t instanceof Dd){const r=Ee.fromString(e,...n);return n0(r),new jt(t,null,new G(r))}{if(!(t instanceof jt||t instanceof us))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return n0(r),new jt(t.firestore,t instanceof us?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $T(this,"async_queue_retry"),this.Vu=()=>{const r=$h();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xl(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _r("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=sg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class gi extends Dd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new i0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i0(e),this._firestoreClient=void 0,await e}}}function jO(t,e){const n=typeof t=="object"?t:Rm(),r=typeof t=="string"?t:"(default)",s=_d(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=hx("firestore");i&&LO(s,...i)}return s}function lg(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MO(t),t._firestoreClient}function MO(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,f){return new f2(a,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,dI(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new RO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wo(ft.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wo(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=/^__.*__$/;class UO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tl(e,this.data,n,this.fieldTransforms)}}class fI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class dg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pI(this.Cu)&&VO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class FO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ad(e)}Qu(e,n,r,s=!1){return new dg({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jd(t){const e=t._freezeSettings(),n=Ad(t._databaseId);return new FO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mI(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);fg("Data must be an object, but it was:",o,r);const a=gI(r,o);let u,c;if(i.merge)u=new Yt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const y=xp(e,p,n);if(!o.contains(y))throw new $(V.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);vI(f,y)||f.push(y)}u=new Yt(f),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new UO(new Bt(a),u,c)}class Md extends Ld{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}class hg extends Ld{_toFieldTransform(e){return new V2(e.path,new nl)}isEqual(e){return e instanceof hg}}function zO(t,e,n,r){const s=t.Qu(1,e,n);fg("Data must be an object, but it was:",s,r);const i=[],o=Bt.empty();pi(r,(u,c)=>{const f=pg(e,u,n);c=Ie(c);const p=s.Nu(f);if(c instanceof Md)i.push(f);else{const y=Cl(c,p);y!=null&&(i.push(f),o.set(f,y))}});const a=new Yt(i);return new fI(o,a,s.fieldTransforms)}function BO(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[xp(e,r,n)],u=[s];if(i.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)a.push(xp(e,i[y])),u.push(i[y+1]);const c=[],f=Bt.empty();for(let y=a.length-1;y>=0;--y)if(!vI(c,a[y])){const E=a[y];let k=u[y];k=Ie(k);const R=o.Nu(E);if(k instanceof Md)c.push(E);else{const C=Cl(k,R);C!=null&&(c.push(E),f.set(E,C))}}const p=new Yt(c);return new fI(f,p,o.fieldTransforms)}function $O(t,e,n,r=!1){return Cl(n,t.Qu(r?4:3,e))}function Cl(t,e){if(yI(t=Ie(t)))return fg("Unsupported field value:",e,t),gI(t,e);if(t instanceof Ld)return function(r,s){if(!pI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=Cl(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Vc(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vc(s.serializer,i)}}if(r instanceof ug)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wo)return{bytesValue:OT(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ym(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof cg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Hm(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Pd(r)}`)}(t,e)}function gI(t,e){const n={};return uT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,s)=>{const i=Cl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof ug||t instanceof wo||t instanceof jt||t instanceof Ld||t instanceof cg)}function fg(t,e,n){if(!yI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Pd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xp(t,e,n){if((e=Ie(e))instanceof Od)return e._internalPath;if(typeof e=="string")return pg(t,e);throw zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const qO=new RegExp("[~\\*/\\[\\]]");function pg(t,e,n){if(e.search(qO)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Od(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(V.INVALID_ARGUMENT,a+t+u)}function vI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WO extends _I{data(){return super.data()}}function mg(t,e){return typeof e=="string"?pg(t,e):e instanceof Od?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}class yg extends gg{}function Ss(t,e,...n){let r=[];e instanceof gg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof _g).length,a=i.filter(u=>u instanceof vg).length;if(o>1||o>0&&a>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vg extends yg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vg(e,n,r)}_apply(e){const n=this._parse(e);return wI(e._query,n),new Is(e.firestore,e.converter,fp(e._query,n))}_parse(e){const n=jd(e.firestore);return function(i,o,a,u,c,f,p){let y;if(c.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){a0(p,f);const E=[];for(const k of p)E.push(o0(u,i,k));y={arrayValue:{values:E}}}else y=o0(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||a0(p,f),y=$O(a,o,p,f==="in"||f==="not-in");return He.create(c,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class _g extends gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _g(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)wI(o,u),o=fp(o,u)}(e._query,n),new Is(e.firestore,e.converter,fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends yg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tl(i,o)}(e._query,this._field,this._direction);return new Is(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ro(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ks(t,e="asc"){const n=e,r=mg("orderBy",t);return wg._create(r,n)}class Eg extends yg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Eg(e,n,r)}_apply(e){return new Is(e.firestore,e.converter,jc(e._query,this._limit,this._limitType))}}function KO(t){return OO("limit",t),Eg._create("limit",t,"F")}function o0(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vT(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!G.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return R_(t,new G(r))}if(n instanceof jt)return R_(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pd(n)}.`)}function a0(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GO{convertValue(e,n="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ue(o.doubleValue));return new cg(i)}convertGeoPoint(e){return new ug(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const n=ps(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);he(FT(r));const s=new Za(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||_r(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xI extends _I{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yu extends xI{data(e={}){return super.data(e)}}class QO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yu(this._firestore,this._userDataWriter,r.key,r,new da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Yu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Yu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,f=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:YO(a.type),doc:u,oldIndex:c,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){t=Pn(t,jt);const e=Pn(t.firestore,gi);return bO(lg(e),t._key).then(n=>JO(e,t,n))}class TI extends GO{constructor(e){super(),this.firestore=e}convertBytes(e){return new wo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function Er(t){t=Pn(t,Is);const e=Pn(t.firestore,gi),n=lg(e),r=new TI(e);return HO(t._query),PO(n,t._query).then(s=>new QO(e,r,t,s))}function XO(t,e,n){t=Pn(t,jt);const r=Pn(t.firestore,gi),s=EI(t.converter,e);return Vd(r,[mI(jd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hn.none())])}function oi(t,e,n,...r){t=Pn(t,jt);const s=Pn(t.firestore,gi),i=jd(s);let o;return o=typeof(e=Ie(e))=="string"||e instanceof Od?BO(i,"updateDoc",t._key,e,n,r):zO(i,"updateDoc",t._key,e),Vd(s,[o.toMutation(t._key,hn.exists(!0))])}function Po(t){return Vd(Pn(t.firestore,gi),[new Km(t._key,hn.none())])}function gs(t,e){const n=Pn(t.firestore,gi),r=Be(t),s=EI(t.converter,e);return Vd(n,[mI(jd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}function Vd(t,e){return function(r,s){const i=new dr;return r.asyncQueue.enqueueAndForget(async()=>wO(await NO(r),s,i)),i.promise}(lg(t),e)}function JO(t,e,n){const r=n.docs.get(e._key),s=new TI(t);return new xI(t,s,e._key,r,new da(n.hasPendingWrites,n.fromCache),e.converter)}function ze(){return new hg("serverTimestamp")}(function(e,n=!0){(function(s){Co=s})(hi),ei(new hs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new gi(new JP(r.getProvider("auth-internal")),new n2(r.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(c.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),$n(T_,"4.7.3",e),$n(T_,"4.7.3","esm2017")})();var ZO="firebase",eL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(ZO,eL,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="firebasestorage.googleapis.com",SI="storageBucket",tL=2*60*1e3,nL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends Yn{constructor(e,n,r=0){super(Wh(e),`Firebase Storage: ${n} (${Wh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Le;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Le||(Le={}));function Wh(t){return"storage/"+t}function xg(){const t="An unknown error occurred, please check the error payload for server response.";return new je(Le.UNKNOWN,t)}function rL(t){return new je(Le.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sL(t){return new je(Le.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(Le.UNAUTHENTICATED,t)}function oL(){return new je(Le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aL(t){return new je(Le.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lL(){return new je(Le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uL(){return new je(Le.CANCELED,"User canceled the upload/download.")}function cL(t){return new je(Le.INVALID_URL,"Invalid URL '"+t+"'.")}function dL(t){return new je(Le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hL(){return new je(Le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SI+"' property when initializing the app?")}function fL(){return new je(Le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pL(){return new je(Le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mL(t){return new je(Le.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tp(t){return new je(Le.INVALID_ARGUMENT,t)}function kI(){return new je(Le.APP_DELETED,"The Firebase app was deleted.")}function gL(t){return new je(Le.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ka(t,e){return new je(Le.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ta(t){throw new je(Le.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Xt.makeFromUrl(e,n)}catch{return new Xt(e,"")}if(r.path==="")return r;throw dL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",E=new RegExp(`^https?://${p}/${f}/b/${s}/o${y}`,"i"),k={bucket:1,path:3},R=n===II?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",w=new RegExp(`^https?://${R}/${s}/${C}`,"i"),_=[{regex:a,indices:u,postModify:i},{regex:E,indices:k,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<_.length;b++){const O=_[b],j=O.regex.exec(e);if(j){const S=j[O.indices.bucket];let g=j[O.indices.path];g||(g=""),r=new Xt(S,g),O.postModify(r);break}}if(r==null)throw cL(e);return r}}class yL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function f(...C){c||(c=!0,e.apply(null,C))}function p(C){s=setTimeout(()=>{s=null,t(E,u())},C)}function y(){i&&clearTimeout(i)}function E(C,...w){if(c){y();return}if(C){y(),f.call(null,C,...w);return}if(u()||o){y(),f.call(null,C,...w);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,p(_)}let k=!1;function R(C){k||(k=!0,y(),!c&&(s!==null?(C||(a=2),clearTimeout(s),p(0)):C||(a=1)))}return p(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function _L(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){return t!==void 0}function EL(t){return typeof t=="object"&&!Array.isArray(t)}function Tg(t){return typeof t=="string"||t instanceof String}function l0(t){return Ig()&&t instanceof Blob}function Ig(){return typeof Blob<"u"}function u0(t,e,n,r){if(r<e)throw Tp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Tp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function CI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Gs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gs||(Gs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n,r,s,i,o,a,u,c,f,p,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=f,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,k)=>{this.resolve_=E,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Su(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Gs.NO_ERROR,u=i.getStatus();if(!a||xL(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Gs.ABORT;r(!1,new Su(!1,null,f));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Su(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());wL(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=xg();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?kI():uL();o(u)}else{const u=lL();o(u)}};this.canceled_?n(!1,new Su(!1,null,!0)):this.backoffId_=vL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_L(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Su{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function IL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function CL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function RL(t,e,n,r,s,i,o=!0){const a=CI(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return kL(c,e),IL(c,n),SL(c,i),CL(c,r),new TL(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NL(...t){const e=AL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ig())return new Blob(t);throw new je(Le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){if(typeof atob>"u")throw mL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hh{constructor(e,n){this.data=e,this.contentType=n||null}}function DL(t,e){switch(t){case Fn.RAW:return new Hh(RI(e));case Fn.BASE64:case Fn.BASE64URL:return new Hh(AI(t,e));case Fn.DATA_URL:return new Hh(LL(e),jL(e))}throw xg()}function RI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function OL(t){let e;try{e=decodeURIComponent(t)}catch{throw ka(Fn.DATA_URL,"Malformed data URL.")}return RI(e)}function AI(t,e){switch(t){case Fn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ka(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Fn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ka(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=PL(e)}catch(s){throw s.message.includes("polyfill")?s:ka(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class NI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ka(Fn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ML(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function LL(t){const e=new NI(t);return e.base64?AI(Fn.BASE64,e.rest):OL(e.rest)}function jL(t){return new NI(t).contentType}function ML(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){let r=0,s="";l0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(l0(this.data_)){const r=this.data_,s=bL(r,e,n);return s===null?null:new Kr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Kr(r,!0)}}static getBlob(...e){if(Ig()){const n=e.map(r=>r instanceof Kr?r.data_:r);return new Kr(NL.apply(null,n))}else{const n=e.map(o=>Tg(o)?DL(Fn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Kr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){let e;try{e=JSON.parse(t)}catch{return null}return EL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function UL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t,e){return e}class Dt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||FL}}let ku=null;function zL(t){return!Tg(t)||t.length<2?t:PI(t)}function DI(){if(ku)return ku;const t=[];t.push(new Dt("bucket")),t.push(new Dt("generation")),t.push(new Dt("metageneration")),t.push(new Dt("name","fullPath",!0));function e(i,o){return zL(o)}const n=new Dt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Dt("size");return s.xform=r,t.push(s),t.push(new Dt("timeCreated")),t.push(new Dt("updated")),t.push(new Dt("md5Hash",null,!0)),t.push(new Dt("cacheControl",null,!0)),t.push(new Dt("contentDisposition",null,!0)),t.push(new Dt("contentEncoding",null,!0)),t.push(new Dt("contentLanguage",null,!0)),t.push(new Dt("contentType",null,!0)),t.push(new Dt("metadata","customMetadata",!0)),ku=t,ku}function BL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Xt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function $L(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return BL(r,t),r}function OI(t,e,n){const r=bI(e);return r===null?null:$L(t,r,n)}function qL(t,e,n,r){const s=bI(e);if(s===null||!Tg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const f=t.bucket,p=t.fullPath,y="/b/"+o(f)+"/o/"+o(p),E=Ud(y,n,r),k=CI({alt:"media",token:c});return E+k})[0]}function WL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Sg{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){if(!t)throw xg()}function HL(t,e){function n(r,s){const i=OI(t,s,e);return LI(i!==null),i}return n}function KL(t,e){function n(r,s){const i=OI(t,s,e);return LI(i!==null),qL(i,s,t.host,t._protocol)}return n}function jI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=oL():s=iL():n.getStatus()===402?s=sL(t.bucket):n.getStatus()===403?s=aL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function MI(t){const e=jI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=rL(t.path)),i.serverResponse=s.serverResponse,i}return n}function GL(t,e,n){const r=e.fullServerUrl(),s=Ud(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Sg(s,i,KL(t,n),o);return a.errorHandler=MI(e),a}function QL(t,e){const n=e.fullServerUrl(),r=Ud(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new Sg(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=MI(e),a}function YL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=YL(null,e)),r}function JL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=XL(e,r,s),f=WL(c,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,y=`\r
--`+u+"--",E=Kr.getBlob(p,r,y);if(E===null)throw fL();const k={name:c.fullPath},R=Ud(i,t.host,t._protocol),C="POST",w=t.maxUploadRetryTime,v=new Sg(R,C,HL(t,n),w);return v.urlParams=k,v.headers=o,v.body=E.uploadData(),v.errorHandler=jI(e),v}class ZL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw ta("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ej extends ZL{initXhr(){this.xhr_.responseType="text"}}function kg(){return new ej}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this._service=e,n instanceof Xt?this._location=n:this._location=Xt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ai(e,n)}get root(){const e=new Xt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PI(this._location.path)}get storage(){return this._service}get parent(){const e=VL(this._location.path);if(e===null)return null;const n=new Xt(this._location.bucket,e);return new ai(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw gL(e)}}function tj(t,e,n){t._throwIfRoot("uploadBytes");const r=JL(t.storage,t._location,DI(),new Kr(e,!0),n);return t.storage.makeRequestWithTokens(r,kg).then(s=>({metadata:s,ref:t}))}function nj(t){t._throwIfRoot("getDownloadURL");const e=GL(t.storage,t._location,DI());return t.storage.makeRequestWithTokens(e,kg).then(n=>{if(n===null)throw pL();return n})}function rj(t){t._throwIfRoot("deleteObject");const e=QL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,kg)}function sj(t,e){const n=UL(t._location.path,e),r=new Xt(t._location.bucket,n);return new ai(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){return/^[A-Za-z]+:\/\//.test(t)}function oj(t,e){return new ai(t,e)}function VI(t,e){if(t instanceof Cg){const n=t;if(n._bucket==null)throw hL();const r=new ai(n,n._bucket);return e!=null?VI(r,e):r}else return e!==void 0?sj(t,e):t}function aj(t,e){if(e&&ij(e)){if(t instanceof Cg)return oj(t,e);throw Tp("To use ref(service, url), the first argument must be a Storage instance.")}else return VI(t,e)}function c0(t,e){const n=e==null?void 0:e[SI];return n==null?null:Xt.makeFromBucketSpec(n,t)}function lj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:mx(s,t.app.options.projectId))}class Cg{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=II,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tL,this._maxUploadRetryTime=nL,this._requests=new Set,s!=null?this._bucket=Xt.makeFromBucketSpec(s,this._host):this._bucket=c0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xt.makeFromBucketSpec(this._url,e):this._bucket=c0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ai(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new yL(kI());{const o=RL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const d0="@firebase/storage",h0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="storage";function uj(t,e,n){return t=Ie(t),tj(t,e,n)}function cj(t){return t=Ie(t),nj(t)}function dj(t){return t=Ie(t),rj(t)}function f0(t,e){return t=Ie(t),aj(t,e)}function hj(t=Rm(),e){t=Ie(t);const r=_d(t,UI).getImmediate({identifier:e}),s=hx("storage");return s&&fj(r,...s),r}function fj(t,e,n,r={}){lj(t,e,n,r)}function pj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Cg(n,r,s,e,hi)}function mj(){ei(new hs(UI,pj,"PUBLIC").setMultipleInstances(!0)),$n(d0,h0,""),$n(d0,h0,"esm2017")}mj();const gj={apiKey:"AIzaSyAuJwd1I0hNuRhsORwOKXc4QYTgmJ0qBHA",authDomain:"riverside-ranch.firebaseapp.com",projectId:"riverside-ranch",storageBucket:"riverside-ranch.firebasestorage.app",messagingSenderId:"823902144181",appId:"1:823902144181:web:65fb56bf3dc27cb0b720fc"},Rg=vx(gj),Cu=GP(Rg),ee=jO(Rg),p0=hj(Rg),FI=x.createContext(null),yj="theodorelockheart";function m0(t){return`${t.toLowerCase().replace(/[^a-z0-9]/g,"")}@riverside.ranch`}function vj({children:t}){const[e,n]=x.useState(null),[r,s]=x.useState(null),[i,o]=x.useState(!0);x.useEffect(()=>jb(Cu,async k=>{n(k),k?await a(k.uid):s(null),o(!1)}),[]);async function a(E){const k=await bo(Be(ee,"users",E));k.exists()&&s({id:k.id,...k.data()})}async function u(E,k){const R=m0(E),{user:C}=await bb(Cu,R,k);await a(C.uid)}async function c(E,k,R){const C=m0(E),w=E.toLowerCase().replace(/[^a-z0-9]/g,""),{user:v}=await Nb(Cu,C,R);await Db(v,{displayName:k});const _=w===yj?"admin":"member";await XO(Be(ee,"users",v.uid),{username:w,characterName:k,displayName:k,role:_,createdAt:ze()}),await a(v.uid)}async function f(){await Mb(Cu),n(null),s(null)}const p=e&&r?{uid:e.uid,displayName:r.characterName||r.displayName}:null,y=(r==null?void 0:r.role)==="admin";return d.jsx(FI.Provider,{value:{user:e,profile:r,currentUser:p,loading:i,isAdmin:y,signIn:u,signUp:c,signOut:f},children:t})}function mn(){const t=x.useContext(FI);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const zI=x.createContext(null);function _j({children:t}){const[e,n]=x.useState(()=>{const s=localStorage.getItem("riverside-theme");return s?s==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{document.documentElement.classList.toggle("dark",e),localStorage.setItem("riverside-theme",e?"dark":"light")},[e]);const r=()=>n(s=>!s);return d.jsx(zI.Provider,{value:{dark:e,toggle:r},children:t})}function wj(){const t=x.useContext(zI);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ej={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(t,e)=>{const n=x.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:u,...c},f)=>x.createElement("svg",{ref:f,...Ej,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${xj(t)}`,a].join(" "),...c},[...e.map(([p,y])=>x.createElement(p,y)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=oe("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=oe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=oe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=oe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=oe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=oe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=oe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=oe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=oe("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=oe("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=oe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=oe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=oe("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=oe("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bj=[{to:"/",icon:Nj,label:"Dashboard"},{to:"/orders",icon:Ag,label:"Orders"},{to:"/quotes",icon:BI,label:"Quotes"},{to:"/prices",icon:Ng,label:"Prices"},{to:"/logs",icon:bg,label:"Misc Log"},{to:"/todos",icon:il,label:"Daily Tasks"},{to:"/posters",icon:$I,label:"Posters"}];function $j(){const{profile:t,signOut:e,isAdmin:n}=mn(),{dark:r,toggle:s}=wj(),[i,o]=x.useState(!1),a=({isActive:c})=>`flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c?"bg-wood-700 text-parchment-50 dark:bg-wood-600":"text-wood-700 dark:text-parchment-300 hover:bg-parchment-200 dark:hover:bg-wood-800"}`,u=d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"px-4 py-6 border-b border-parchment-200 dark:border-wood-800",children:[d.jsx("h1",{className:"font-display text-xl font-bold text-wood-800 dark:text-parchment-100",children:"Riverside Ranch"}),d.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400 mt-0.5",children:"Management System"})]}),d.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:[Bj.map(({to:c,icon:f,label:p})=>d.jsxs(qv,{to:c,className:a,onClick:()=>o(!1),children:[d.jsx(f,{size:18}),p]},c)),n&&d.jsxs(qv,{to:"/admin",className:a,onClick:()=>o(!1),children:[d.jsx(qI,{size:18}),"Admin Panel"]})]}),d.jsxs("div",{className:"px-3 py-4 border-t border-parchment-200 dark:border-wood-800 space-y-2",children:[d.jsxs("div",{className:"px-4 py-2",children:[d.jsx("p",{className:"text-sm font-medium truncate",children:(t==null?void 0:t.characterName)||(t==null?void 0:t.displayName)}),d.jsxs("p",{className:"text-xs text-wood-500 dark:text-wood-400",children:["@",t==null?void 0:t.username,"  ",d.jsx("span",{className:"capitalize",children:t==null?void 0:t.role})]})]}),d.jsxs("button",{onClick:s,className:"flex items-center gap-3 w-full px-4 py-2 rounded-lg text-sm hover:bg-parchment-200 dark:hover:bg-wood-800 transition-colors",children:[r?d.jsx(Mj,{size:18}):d.jsx(Lj,{size:18}),r?"Light Mode":"Dark Mode"]}),d.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 rounded-lg text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[d.jsx(Pj,{size:18}),"Sign Out"]})]})]});return d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>o(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-white dark:bg-wood-900 shadow-md border border-parchment-200 dark:border-wood-700",children:d.jsx(Dj,{size:20})}),i&&d.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/40",onClick:()=>o(!1),children:d.jsxs("aside",{className:"w-64 h-full bg-white dark:bg-wood-950 flex flex-col shadow-xl",onClick:c=>c.stopPropagation(),children:[d.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-1",children:d.jsx(Pg,{size:20})}),u]})}),d.jsx("aside",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 bg-white dark:bg-wood-950 border-r border-parchment-200 dark:border-wood-800",children:u})]})}function qj(){const{user:t,loading:e}=mn();return e?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-10 h-10 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin mx-auto"}),d.jsx("p",{className:"mt-3 text-sm text-wood-600 dark:text-wood-400",children:"Loading..."})]})}):t?d.jsxs("div",{className:"min-h-screen",children:[d.jsx($j,{}),d.jsx("main",{className:"lg:pl-64",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16 lg:pt-8",children:d.jsx(eR,{})})})]}):d.jsx(Im,{to:"/login",replace:!0})}function Wj(){const{user:t,loading:e,signIn:n,signUp:r}=mn(),[s,i]=x.useState(!1),[o,a]=x.useState(""),[u,c]=x.useState(""),[f,p]=x.useState(""),[y,E]=x.useState(!1);if(e)return null;if(t)return d.jsx(Im,{to:"/",replace:!0});async function k(R){R.preventDefault(),E(!0);try{if(s){if(o.length<3){H.error("Username must be at least 3 characters"),E(!1);return}await r(o,u,f),H.success("Welcome to Riverside Ranch!")}else await n(o,f),H.success("Welcome back!")}catch(C){C.code==="auth/user-not-found"||C.code==="auth/invalid-credential"?H.error("Invalid username or password"):C.code==="auth/email-already-in-use"?H.error("That username is already taken"):C.code==="auth/weak-password"?H.error("Password must be at least 6 characters"):H.error(C.message)}finally{E(!1)}}return d.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-parchment-50 dark:bg-wood-950",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"w-16 h-16 rounded-2xl bg-wood-800 flex items-center justify-center mx-auto mb-4",children:d.jsx("span",{className:"font-display text-3xl font-bold text-parchment-200",children:"R"})}),d.jsx("h1",{className:"font-display text-3xl font-bold text-wood-800 dark:text-parchment-100",children:"Riverside Ranch"}),d.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400 mt-1",children:"Management System"})]}),d.jsxs("div",{className:"card p-6",children:[d.jsxs("form",{onSubmit:k,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Username"}),d.jsx("input",{type:"text",className:"input",placeholder:"e.g. theodorelockheart",value:o,onChange:R=>a(R.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")),required:!0,minLength:3}),d.jsx("p",{className:"text-xs text-wood-400 mt-1",children:"Letters and numbers only, no spaces"})]}),s&&d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Character Name"}),d.jsx("input",{type:"text",className:"input",placeholder:"e.g. Theodore Lockheart",value:u,onChange:R=>c(R.target.value),required:s}),d.jsx("p",{className:"text-xs text-wood-400 mt-1",children:"Your in-game character name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Password"}),d.jsx("input",{type:"password",className:"input",placeholder:"Enter password",value:f,onChange:R=>p(R.target.value),required:!0,minLength:6})]}),d.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:y,children:y?"Please wait...":s?"Create Account":"Sign In"})]}),d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{onClick:()=>i(!s),className:"text-sm text-wood-600 dark:text-wood-400 hover:underline",children:s?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}function Dg(t){return{id:t.id,...t.data()}}function xr(t){return t.docs.map(Dg)}async function Rt(t,e,n,r,s){await gs(dt(ee,"activity"),{userId:t,userName:e,action:n,entityType:r,entityId:s,createdAt:ze()})}const Hi={async list(){const t=await Er(Ss(dt(ee,"prices"),ks("name","asc")));return xr(t)},async create(t,e){const n=await gs(dt(ee,"prices"),{name:t.name,price:Number(t.price)||0,category:t.category||"",createdAt:ze(),updatedAt:ze()});return await Rt(e.uid,e.displayName,`Added price item: ${t.name}`,"price",n.id),{id:n.id}},async update(t,e,n){await oi(Be(ee,"prices",t),{name:e.name,price:Number(e.price)||0,category:e.category||"",updatedAt:ze()}),await Rt(n.uid,n.displayName,`Updated price item: ${e.name}`,"price",t)},async delete(t,e){await Po(Be(ee,"prices",t)),await Rt(e.uid,e.displayName,"Deleted a price item","price",t)}},bi={async list({status:t,search:e}={}){const n=await Er(Ss(dt(ee,"orders"),ks("createdAt","desc")));let r=xr(n);if(t&&(r=r.filter(s=>s.status===t)),e){const s=e.toLowerCase();r=r.filter(i=>i.customerName.toLowerCase().includes(s)||i.description.toLowerCase().includes(s))}return r},async get(t){const e=await bo(Be(ee,"orders",t));if(!e.exists())throw new Error("Order not found");return Dg(e)},async create(t,e){const n=await gs(dt(ee,"orders"),{customerName:t.customerName,contactInfo:t.contactInfo,description:t.description,items:t.items||[],subtotal:Number(t.subtotal)||0,discount:Number(t.discount)||0,price:Number(t.price)||0,depositPaid:Number(t.depositPaid)||0,notes:t.notes||"",status:"outstanding",assignedTo:t.assignedTo||null,assignedToName:t.assignedToName||null,createdBy:e.uid,createdByName:e.displayName,createdAt:ze(),updatedAt:ze()});return await Rt(e.uid,e.displayName,`Created order for ${t.customerName}`,"order",n.id),{id:n.id}},async update(t,e,n){await oi(Be(ee,"orders",t),{...e,updatedAt:ze()});const r=e.status?`  ${e.status}`:"";await Rt(n.uid,n.displayName,`Updated order${r}`,"order",t)},async delete(t,e){await Po(Be(ee,"orders",t)),await Rt(e.uid,e.displayName,"Deleted an order","order",t)},async stats(){const t=await Er(dt(ee,"orders")),e=xr(t),n=new Date;n.setHours(0,0,0,0);const r=e.filter(a=>a.status==="outstanding").reduce((a,u)=>a+Number(u.price||0),0),s=e.filter(a=>a.status!=="delivered").reduce((a,u)=>a+Number(u.depositPaid||0),0),i=e.filter(a=>{var c,f;return a.status!=="delivered"?!1:(((f=(c=a.updatedAt)==null?void 0:c.toDate)==null?void 0:f.call(c))||new Date(0))>=n}).length,o=e.filter(a=>a.status==="ready").length;return{totalOutstanding:r,totalDeposits:s,completedToday:i,pendingDeliveries:o}}},Ci={async list({status:t,search:e}={}){const n=await Er(Ss(dt(ee,"quotes"),ks("createdAt","desc")));let r=xr(n);if(t&&(r=r.filter(s=>s.status===t)),e){const s=e.toLowerCase();r=r.filter(i=>i.customerName.toLowerCase().includes(s)||i.requestedItems.toLowerCase().includes(s))}return r},async create(t,e){const n=await gs(dt(ee,"quotes"),{customerName:t.customerName,contactInfo:t.contactInfo,requestedItems:t.requestedItems,items:t.items||[],subtotal:Number(t.subtotal)||0,discount:Number(t.discount)||0,estimatedPrice:Number(t.estimatedPrice)||0,notes:t.notes||"",status:"pending",convertedOrderId:null,createdBy:e.uid,createdAt:ze(),updatedAt:ze()});return await Rt(e.uid,e.displayName,`Created quote for ${t.customerName}`,"quote",n.id),{id:n.id}},async update(t,e){await oi(Be(ee,"quotes",t),{...e,updatedAt:ze()})},async delete(t,e){await Po(Be(ee,"quotes",t)),await Rt(e.uid,e.displayName,"Deleted a quote","quote",t)},async convert(t,e){const n=await bo(Be(ee,"quotes",t));if(!n.exists())throw new Error("Quote not found");const r=n.data(),s=await gs(dt(ee,"orders"),{customerName:r.customerName,contactInfo:r.contactInfo,description:r.requestedItems,items:r.items||[],subtotal:r.subtotal||0,discount:r.discount||0,price:r.estimatedPrice,depositPaid:0,notes:r.notes||"",status:"outstanding",assignedTo:null,assignedToName:null,createdBy:e.uid,createdByName:e.displayName,createdAt:ze(),updatedAt:ze()});return await oi(Be(ee,"quotes",t),{status:"accepted",convertedOrderId:s.id,updatedAt:ze()}),await Rt(e.uid,e.displayName,`Converted quote for ${r.customerName} to order`,"quote",t),{id:s.id}}},Xu={async list({category:t,max:e}={}){const n=await Er(Ss(dt(ee,"misc_logs"),ks("createdAt","desc")));let r=xr(n);return t&&t!=="all"&&(r=r.filter(s=>s.category===t)),e&&(r=r.slice(0,e)),r},async create(t,e){const n=await gs(dt(ee,"misc_logs"),{userId:e.uid,userName:e.displayName,description:t.description,amount:t.amount?Number(t.amount):null,category:t.category||"misc",createdAt:ze()});return await Rt(e.uid,e.displayName,`Logged: ${t.description}`,"log",n.id),{id:n.id}},async delete(t,e){await Po(Be(ee,"misc_logs",t)),await Rt(e.uid,e.displayName,"Deleted a log entry","log",t)}},Fs={async list(){const t=await Er(Ss(dt(ee,"todos"),ks("sortOrder","asc")));return xr(t)},async create(t,e){const n=await gs(dt(ee,"todos"),{title:t.title,description:t.description||"",assignedRole:t.assignedRole||null,isCompleted:!1,completedBy:null,completedByName:null,completedAt:null,createdBy:e.uid,createdAt:ze(),updatedAt:ze(),sortOrder:Number(t.sortOrder)||0});return await Rt(e.uid,e.displayName,`Added task: ${t.title}`,"todo",n.id),{id:n.id}},async update(t,e){await oi(Be(ee,"todos",t),{...e,updatedAt:ze()})},async toggle(t,e){const n=await bo(Be(ee,"todos",t));if(!n.exists())throw new Error("Todo not found");const r=n.data(),s=!r.isCompleted,i={isCompleted:s,completedBy:s?e.uid:null,completedByName:s?e.displayName:null,completedAt:s?ze():null,updatedAt:ze()};return await oi(Be(ee,"todos",t),i),await Rt(e.uid,e.displayName,`${s?"Completed":"Unchecked"} task: ${r.title}`,"todo",t),{id:t,...r,...i,completedAt:s?new Date:null}},async delete(t,e){await Po(Be(ee,"todos",t)),await Rt(e.uid,e.displayName,"Deleted a task","todo",t)}},Gh={async list(){const t=await Er(Ss(dt(ee,"posters"),ks("createdAt","desc")));return xr(t)},async upload(t,e,n){const r=`${crypto.randomUUID()}-${t.name}`,s=f0(p0,`posters/${r}`);await uj(s,t,{contentType:t.type});const i=await cj(s),o=await gs(dt(ee,"posters"),{title:e,imageUrl:i,storagePath:`posters/${r}`,uploadedBy:n.uid,createdAt:ze()});return await Rt(n.uid,n.displayName,`Uploaded poster: ${e}`,"poster",o.id),{id:o.id,imageUrl:i}},async delete(t,e){const n=await bo(Be(ee,"posters",t));if(!n.exists())throw new Error("Poster not found");const r=n.data();try{await dj(f0(p0,r.storagePath))}catch{}await Po(Be(ee,"posters",t)),await Rt(e.uid,e.displayName,`Deleted poster: ${r.title}`,"poster",t)}},Hj={async list({max:t=20}={}){const e=await Er(Ss(dt(ee,"activity"),ks("createdAt","desc"),KO(t)));return xr(e)}},KI={async get(t){const e=await bo(Be(ee,"users",t));return e.exists()?Dg(e):null},async list(){const t=await Er(Ss(dt(ee,"users"),ks("displayName")));return xr(t)}};function GI(t){return t?t.toDate?t.toDate():new Date(t):null}function Bd(t){const e=GI(t);return e?e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function Bc(t){const e=GI(t);return e?e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""}function Ct(t){return`$${Number(t||0).toFixed(2)}`}const $c=[{value:"outstanding",label:"Outstanding",color:"badge-outstanding"},{value:"preparing",label:"Preparing",color:"badge-preparing"},{value:"ready",label:"Ready for Delivery",color:"badge-ready"},{value:"delivered",label:"Delivered",color:"badge-delivered"}],Ip=[{value:"pending",label:"Pending",color:"badge-pending"},{value:"accepted",label:"Accepted",color:"badge-accepted"},{value:"rejected",label:"Rejected",color:"badge-rejected"}],g0=[{value:"livestock",label:"Livestock"},{value:"crops",label:"Crops"},{value:"finance",label:"Finance"},{value:"delivery",label:"Delivery"},{value:"misc",label:"Misc"}],y0=[{value:"livestock",label:"Livestock"},{value:"crops",label:"Crops"},{value:"goods",label:"Goods"},{value:"services",label:"Services"},{value:"other",label:"Other"}];function QI(t,e=0){const n=t.reduce((i,o)=>i+(Number(o.price)||0)*(Number(o.quantity)||0),0),r=Math.min(Math.max(Number(e)||0,0),100),s=n*(1-r/100);return{subtotal:n,discount:r,total:s}}function YI(t){return t.map(e=>`${e.quantity}x ${e.name}`).join(", ")}function Kj(t,e){if(!t.length)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(a=>n.map(u=>{const c=a[u]??"";return typeof c=="string"&&c.includes(",")?`"${c}"`:c}).join(","))].join(`
`),s=new Blob([r],{type:"text/csv"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`${e}.csv`,o.click(),URL.revokeObjectURL(i)}function Cs({title:t,description:e,actions:n}){return d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"font-display text-2xl font-bold",children:t}),e&&d.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400 mt-1",children:e})]}),n&&d.jsx("div",{className:"flex items-center gap-2",children:n})]})}function Gj(){const{profile:t,currentUser:e}=mn(),[n,r]=x.useState(null),[s,i]=x.useState([]),[o,a]=x.useState([]),[u,c]=x.useState([]),[f,p]=x.useState([]),[y,E]=x.useState(!0);x.useEffect(()=>{k()},[]);async function k(){try{const w=await Promise.allSettled([bi.list(),Xu.list({max:10}),Fs.list(),Hj.list({max:10})]),[v,_,b,O]=w.map(g=>g.status==="fulfilled"?g.value:[]),j=v,S=new Date;S.setHours(0,0,0,0),r({totalOutstanding:j.filter(g=>g.status==="outstanding").reduce((g,I)=>g+Number(I.price||0),0),totalDeposits:j.filter(g=>g.status!=="delivered").reduce((g,I)=>g+Number(I.depositPaid||0),0),completedToday:j.filter(g=>{var A,P;return g.status!=="delivered"?!1:(((P=(A=g.updatedAt)==null?void 0:A.toDate)==null?void 0:P.call(A))||new Date(0))>=S}).length,pendingDeliveries:j.filter(g=>g.status==="ready").length}),i(j.filter(g=>g.status==="outstanding").slice(0,10)),a(_),c(b),p(O)}catch{H.error("Failed to load dashboard")}finally{E(!1)}}async function R(w){try{const v=await Fs.toggle(w,e);c(_=>_.map(b=>b.id===w?{...b,...v}:b))}catch{H.error("Failed to update task")}}if(y)return d.jsx("div",{className:"flex items-center justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})});const C=[{label:"Outstanding Value",value:Ct(n==null?void 0:n.totalOutstanding),icon:Ng,color:"text-amber-600"},{label:"Completed Today",value:(n==null?void 0:n.completedToday)||0,icon:Ij,color:"text-green-600"},{label:"Deposits Held",value:Ct(n==null?void 0:n.totalDeposits),icon:jj,color:"text-blue-600"},{label:"Pending Deliveries",value:(n==null?void 0:n.pendingDeliveries)||0,icon:Uj,color:"text-wood-600"}];return d.jsxs("div",{children:[d.jsx(Cs,{title:`Welcome back, ${t==null?void 0:t.displayName}`,description:"Here's what's happening at the ranch today."}),d.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:C.map(({label:w,value:v,icon:_,color:b})=>d.jsx("div",{className:"card p-4",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`p-2 rounded-lg bg-parchment-100 dark:bg-wood-800 ${b}`,children:d.jsx(_,{size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400",children:w}),d.jsx("p",{className:"text-lg font-bold",children:v})]})]})},w))}),d.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ag,{size:18,className:"text-wood-500"}),d.jsx("h2",{className:"font-display font-semibold",children:"Outstanding Orders"})]}),d.jsxs(Fu,{to:"/orders",className:"text-xs text-wood-500 hover:text-wood-700 dark:hover:text-wood-300 flex items-center gap-1",children:["View all ",d.jsx(Kh,{size:14})]})]}),d.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:s.length===0?d.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No outstanding orders"}):s.map(w=>d.jsxs("div",{className:"px-5 py-3 flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium",children:w.customerName}),d.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400 truncate max-w-[200px]",children:w.description})]}),d.jsx("p",{className:"text-sm font-semibold",children:Ct(w.price)})]},w.id))})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(il,{size:18,className:"text-wood-500"}),d.jsx("h2",{className:"font-display font-semibold",children:"Daily Tasks"})]}),d.jsxs(Fu,{to:"/todos",className:"text-xs text-wood-500 hover:text-wood-700 dark:hover:text-wood-300 flex items-center gap-1",children:["View all ",d.jsx(Kh,{size:14})]})]}),d.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:u.length===0?d.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No tasks today"}):u.map(w=>d.jsxs("button",{onClick:()=>R(w.id),className:"w-full px-5 py-3 flex items-center gap-3 text-left hover:bg-parchment-50 dark:hover:bg-wood-800/50 transition-colors",children:[w.isCompleted?d.jsx(il,{size:18,className:"text-green-600 shrink-0"}):d.jsx(WI,{size:18,className:"text-wood-400 shrink-0"}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:`text-sm ${w.isCompleted?"line-through text-wood-400":"font-medium"}`,children:w.title}),w.isCompleted&&w.completedByName&&d.jsxs("p",{className:"text-xs text-wood-400",children:["Done by ",w.completedByName]})]})]},w.id))})]}),d.jsxs("div",{className:"card",children:[d.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(bg,{size:18,className:"text-wood-500"}),d.jsx("h2",{className:"font-display font-semibold",children:"Recent Activity Log"})]}),d.jsxs(Fu,{to:"/logs",className:"text-xs text-wood-500 hover:text-wood-700 dark:hover:text-wood-300 flex items-center gap-1",children:["View all ",d.jsx(Kh,{size:14})]})]}),d.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:o.length===0?d.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No log entries yet"}):o.map(w=>d.jsxs("div",{className:"px-5 py-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:"text-sm",children:w.description}),w.amount!=null&&d.jsx("p",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:Ct(w.amount)})]}),d.jsxs("p",{className:"text-xs text-wood-400 mt-0.5",children:[w.userName,"  ",Bc(w.createdAt)]})]},w.id))})]}),d.jsxs("div",{className:"card",children:[d.jsx("div",{className:"px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:d.jsx("h2",{className:"font-display font-semibold",children:"Activity Timeline"})}),d.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:f.length===0?d.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No activity yet"}):f.map(w=>d.jsxs("div",{className:"px-5 py-3",children:[d.jsx("p",{className:"text-sm",children:w.action}),d.jsxs("p",{className:"text-xs text-wood-400 mt-0.5",children:[w.userName,"  ",Bc(w.createdAt)]})]},w.id))})]})]})]})}function Qn({open:t,onClose:e,title:n,children:r,wide:s}){return x.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[d.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:e}),d.jsxs("div",{className:`relative bg-white dark:bg-wood-900 rounded-xl shadow-2xl border border-parchment-200 dark:border-wood-700 w-full ${s?"max-w-2xl":"max-w-lg"} max-h-[90vh] overflow-y-auto`,children:[d.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-parchment-200 dark:border-wood-800",children:[d.jsx("h2",{className:"font-display text-lg font-semibold",children:n}),d.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-parchment-200 dark:hover:bg-wood-800 transition-colors",children:d.jsx(Pg,{size:18})})]}),d.jsx("div",{className:"px-6 py-4",children:r})]})]}):null}function Do({icon:t,title:e,description:n,action:r}){return d.jsxs("div",{className:"text-center py-12",children:[t&&d.jsx(t,{size:40,className:"mx-auto text-wood-300 dark:text-wood-600 mb-3"}),d.jsx("h3",{className:"text-sm font-medium text-wood-600 dark:text-wood-400",children:e}),n&&d.jsx("p",{className:"text-xs text-wood-400 dark:text-wood-500 mt-1",children:n}),r&&d.jsx("div",{className:"mt-4",children:r})]})}function XI({items:t,onChange:e,prices:n,discount:r,onDiscountChange:s}){const[i,o]=x.useState(""),[a,u]=x.useState(!1),c=x.useRef(null);x.useEffect(()=>{function v(_){c.current&&!c.current.contains(_.target)&&u(!1)}return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const f=n.filter(v=>i?v.name.toLowerCase().includes(i.toLowerCase()):!0);function p(v){const _=t.find(b=>b.priceId===v.id);e(_?t.map(b=>b.priceId===v.id?{...b,quantity:b.quantity+1}:b):[...t,{priceId:v.id,name:v.name,price:v.price,quantity:1}]),o(""),u(!1)}function y(v,_){e(t.map(b=>{if(b.priceId!==v)return b;const O=Math.max(1,b.quantity+_);return{...b,quantity:O}}))}function E(v,_){const b=Math.max(1,parseInt(_)||1);e(t.map(O=>O.priceId===v?{...O,quantity:b}:O))}function k(v){e(t.filter(_=>_.priceId!==v))}const R=t.reduce((v,_)=>v+_.price*_.quantity,0),C=R*(Number(r)||0)/100,w=R-C;return d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{ref:c,className:"relative",children:[d.jsx("label",{className:"label",children:"Add Items from Catalog"}),d.jsxs("div",{className:"relative",children:[d.jsx(zd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-wood-400"}),d.jsx("input",{className:"input pl-9",placeholder:"Search catalog...",value:i,onChange:v=>{o(v.target.value),u(!0)},onFocus:()=>u(!0)})]}),a&&d.jsx("div",{className:"absolute z-20 w-full mt-1 bg-white dark:bg-wood-900 border border-parchment-200 dark:border-wood-700 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.length===0?d.jsx("div",{className:"px-4 py-3 text-sm text-wood-400",children:"No items found"}):f.map(v=>d.jsxs("button",{type:"button",className:"w-full text-left px-4 py-2.5 text-sm hover:bg-parchment-100 dark:hover:bg-wood-800 flex items-center justify-between transition-colors",onClick:()=>p(v),children:[d.jsx("span",{children:v.name}),d.jsx("span",{className:"text-wood-500 dark:text-wood-400 font-medium",children:Ct(v.price)})]},v.id))})]}),t.length>0&&d.jsx("div",{className:"overflow-x-auto border border-parchment-200 dark:border-wood-700 rounded-lg",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-parchment-50 dark:bg-wood-800/50 border-b border-parchment-200 dark:border-wood-700",children:[d.jsx("th",{className:"text-left py-2 px-3 font-medium text-wood-500 dark:text-wood-400",children:"Item"}),d.jsx("th",{className:"text-right py-2 px-3 font-medium text-wood-500 dark:text-wood-400",children:"Unit Price"}),d.jsx("th",{className:"text-center py-2 px-3 font-medium text-wood-500 dark:text-wood-400",children:"Qty"}),d.jsx("th",{className:"text-right py-2 px-3 font-medium text-wood-500 dark:text-wood-400",children:"Line Total"}),d.jsx("th",{className:"w-10"})]})}),d.jsx("tbody",{children:t.map(v=>d.jsxs("tr",{className:"border-b border-parchment-100 dark:border-wood-800/50",children:[d.jsx("td",{className:"py-2 px-3",children:v.name}),d.jsx("td",{className:"py-2 px-3 text-right text-wood-500 dark:text-wood-400",children:Ct(v.price)}),d.jsx("td",{className:"py-2 px-3",children:d.jsxs("div",{className:"flex items-center justify-center gap-1",children:[d.jsx("button",{type:"button",onClick:()=>y(v.priceId,-1),className:"p-0.5 rounded hover:bg-parchment-200 dark:hover:bg-wood-700",children:d.jsx(Oj,{size:14})}),d.jsx("input",{type:"number",min:"1",className:"w-12 text-center text-sm border border-parchment-200 dark:border-wood-700 rounded bg-transparent py-0.5",value:v.quantity,onChange:_=>E(v.priceId,_.target.value)}),d.jsx("button",{type:"button",onClick:()=>y(v.priceId,1),className:"p-0.5 rounded hover:bg-parchment-200 dark:hover:bg-wood-700",children:d.jsx(ys,{size:14})})]})}),d.jsx("td",{className:"py-2 px-3 text-right font-medium",children:Ct(v.price*v.quantity)}),d.jsx("td",{className:"py-2 px-1",children:d.jsx("button",{type:"button",onClick:()=>k(v.priceId),className:"p-1 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:d.jsx(Pg,{size:14})})})]},v.priceId))})]})}),t.length>0&&d.jsxs("div",{className:"flex flex-col items-end gap-2 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"text-wood-500 dark:text-wood-400",children:"Subtotal:"}),d.jsx("span",{className:"font-medium w-24 text-right",children:Ct(R)})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"text-wood-500 dark:text-wood-400",children:"Discount (%):"}),d.jsx("input",{type:"number",min:"0",max:"100",step:"1",className:"w-24 text-right text-sm border border-parchment-200 dark:border-wood-700 rounded bg-transparent px-2 py-1",value:r,onChange:v=>s(v.target.value)})]}),Number(r)>0&&d.jsxs("div",{className:"flex items-center gap-4 text-red-500",children:[d.jsx("span",{children:"Discount:"}),d.jsxs("span",{className:"w-24 text-right",children:["-",Ct(C)]})]}),d.jsxs("div",{className:"flex items-center gap-4 text-base font-bold border-t border-parchment-200 dark:border-wood-700 pt-2",children:[d.jsx("span",{children:"Total:"}),d.jsx("span",{className:"w-24 text-right",children:Ct(w)})]})]})]})}function v0({initial:t,onSubmit:e,onCancel:n,submitting:r}){const[s,i]=x.useState({customerName:"",contactInfo:"",notes:"",assignedTo:"",assignedToName:"",...t,depositPaid:(t==null?void 0:t.depositPaid)??""}),[o,a]=x.useState((t==null?void 0:t.items)||[]),[u,c]=x.useState((t==null?void 0:t.discount)??""),[f,p]=x.useState([]),[y,E]=x.useState([]);x.useEffect(()=>{KI.list().then(p).catch(()=>{}),Hi.list().then(E).catch(()=>{})},[]);function k(w){const{name:v,value:_}=w.target;i(b=>({...b,[v]:_}))}function R(w){const v=w.target.value,_=f.find(b=>b.id===v);i(b=>({...b,assignedTo:v||null,assignedToName:(_==null?void 0:_.displayName)||null}))}function C(w){w.preventDefault();const{subtotal:v,total:_}=QI(o,u),b=YI(o);e({...s,items:o,subtotal:v,discount:Number(u)||0,price:_,description:b||s.customerName,depositPaid:parseFloat(s.depositPaid)||0,assignedTo:s.assignedTo||null,assignedToName:s.assignedToName||null})}return d.jsxs("form",{onSubmit:C,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Customer Name *"}),d.jsx("input",{name:"customerName",className:"input",value:s.customerName,onChange:k,required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Contact Info *"}),d.jsx("input",{name:"contactInfo",className:"input",placeholder:"Discord / Telegram / In-game",value:s.contactInfo,onChange:k,required:!0})]})]}),d.jsx(XI,{items:o,onChange:a,prices:y,discount:u,onDiscountChange:c}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Deposit Paid ($)"}),d.jsx("input",{name:"depositPaid",type:"number",step:"0.01",min:"0",className:"input",value:s.depositPaid,onChange:k})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Assigned To"}),d.jsxs("select",{name:"assignedTo",className:"input",value:s.assignedTo||"",onChange:R,children:[d.jsx("option",{value:"",children:"Unassigned"}),f.map(w=>d.jsx("option",{value:w.id,children:w.displayName},w.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Notes"}),d.jsx("textarea",{name:"notes",className:"input",rows:2,value:s.notes,onChange:k})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:r,children:r?"Saving...":t?"Update Order":"Create Order"})]})]})}const $d=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Oo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Og(t){return"nodeType"in t}function Ut(t){var e,n;return t?Oo(t)?t:Og(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Lg(t){const{Document:e}=Ut(t);return t instanceof e}function Rl(t){return Oo(t)?!1:t instanceof Ut(t).HTMLElement}function JI(t){return t instanceof Ut(t).SVGElement}function Lo(t){return t?Oo(t)?t.document:Og(t)?Lg(t)?t:Rl(t)||JI(t)?t.ownerDocument:document:document:document}const Tr=$d?x.useLayoutEffect:x.useEffect;function qd(t){const e=x.useRef(t);return Tr(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Qj(){const t=x.useRef(null),e=x.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=x.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ol(t,e){e===void 0&&(e=[t]);const n=x.useRef(t);return Tr(()=>{n.current!==t&&(n.current=t)},e),n}function Al(t,e){const n=x.useRef();return x.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function qc(t){const e=qd(t),n=x.useRef(null),r=x.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Wc(t){const e=x.useRef();return x.useEffect(()=>{e.current=t},[t]),e.current}let Qh={};function Wd(t,e){return x.useMemo(()=>{if(e)return e;const n=Qh[t]==null?0:Qh[t]+1;return Qh[t]=n,t+"-"+n},[t,e])}function ZI(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[u,c]of a){const f=i[u];f!=null&&(i[u]=f+t*c)}return i},{...e})}}const ro=ZI(1),Hc=ZI(-1);function Yj(t){return"clientX"in t&&"clientY"in t}function jg(t){if(!t)return!1;const{KeyboardEvent:e}=Ut(t.target);return e&&t instanceof e}function Xj(t){if(!t)return!1;const{TouchEvent:e}=Ut(t.target);return e&&t instanceof e}function Kc(t){if(Xj(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Yj(t)?{x:t.clientX,y:t.clientY}:null}const al=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[al.Translate.toString(t),al.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),_0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Jj(t){return t.matches(_0)?t:t.querySelector(_0)}const Zj={display:"none"};function e4(t){let{id:e,value:n}=t;return Ce.createElement("div",{id:e,style:Zj},n)}function t4(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function n4(){const[t,e]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const e1=x.createContext(null);function r4(t){const e=x.useContext(e1);x.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function s4(){const[t]=x.useState(()=>new Set),e=x.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[x.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const i4={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},o4={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function a4(t){let{announcements:e=o4,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=i4}=t;const{announce:i,announcement:o}=n4(),a=Wd("DndLiveRegion"),[u,c]=x.useState(!1);if(x.useEffect(()=>{c(!0)},[]),r4(x.useMemo(()=>({onDragStart(p){let{active:y}=p;i(e.onDragStart({active:y}))},onDragMove(p){let{active:y,over:E}=p;e.onDragMove&&i(e.onDragMove({active:y,over:E}))},onDragOver(p){let{active:y,over:E}=p;i(e.onDragOver({active:y,over:E}))},onDragEnd(p){let{active:y,over:E}=p;i(e.onDragEnd({active:y,over:E}))},onDragCancel(p){let{active:y,over:E}=p;i(e.onDragCancel({active:y,over:E}))}}),[i,e])),!u)return null;const f=Ce.createElement(Ce.Fragment,null,Ce.createElement(e4,{id:r,value:s.draggable}),Ce.createElement(t4,{id:a,announcement:o}));return n?qi.createPortal(f,n):f}var Ge;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ge||(Ge={}));function Gc(){}function l4(t,e){return x.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function u4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Dn=Object.freeze({x:0,y:0});function c4(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function d4(t,e){const n=Kc(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function h4(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function f4(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function w0(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function p4(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const m4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=w0(e),i=[];for(const o of r){const{id:a}=o,u=n.get(a);if(u){const c=w0(u),f=s.reduce((y,E,k)=>y+c4(c[k],E),0),p=Number((f/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:p}})}}return i.sort(h4)};function g4(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const u=e.width*e.height,c=t.width*t.height,f=o*a,p=f/(u+c-f);return Number(p.toFixed(4))}return 0}const y4=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const u=g4(a,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(f4)};function v4(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function t1(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Dn}function _4(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const w4=_4(1);function n1(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function E4(t,e,n){const r=n1(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,u=t.left-o-(1-s)*parseFloat(n),c=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:f,height:p,top:c,right:u+f,bottom:c+p,left:u}}const x4={ignoreTransform:!1};function Nl(t,e){e===void 0&&(e=x4);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:f}=Ut(t).getComputedStyle(t);c&&(n=E4(n,c,f))}const{top:r,left:s,width:i,height:o,bottom:a,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:u}}function E0(t){return Nl(t,{ignoreTransform:!0})}function T4(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function I4(t,e){return e===void 0&&(e=Ut(t).getComputedStyle(t)),e.position==="fixed"}function S4(t,e){e===void 0&&(e=Ut(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function Mg(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Lg(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Rl(s)||JI(s)||n.includes(s))return n;const i=Ut(t).getComputedStyle(s);return s!==t&&S4(s,i)&&n.push(s),I4(s,i)?n:r(s.parentNode)}return t?r(t):n}function r1(t){const[e]=Mg(t,1);return e??null}function Yh(t){return!$d||!t?null:Oo(t)?t:Og(t)?Lg(t)||t===Lo(t).scrollingElement?window:Rl(t)?t:null:null}function s1(t){return Oo(t)?t.scrollX:t.scrollLeft}function i1(t){return Oo(t)?t.scrollY:t.scrollTop}function Sp(t){return{x:s1(t),y:i1(t)}}var tt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(tt||(tt={}));function o1(t){return!$d||!t?!1:t===document.scrollingElement}function a1(t){const e={x:0,y:0},n=o1(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const k4={x:.2,y:.2};function C4(t,e,n,r,s){let{top:i,left:o,right:a,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=k4);const{isTop:c,isBottom:f,isLeft:p,isRight:y}=a1(t),E={x:0,y:0},k={x:0,y:0},R={height:e.height*s.y,width:e.width*s.x};return!c&&i<=e.top+R.height?(E.y=tt.Backward,k.y=r*Math.abs((e.top+R.height-i)/R.height)):!f&&u>=e.bottom-R.height&&(E.y=tt.Forward,k.y=r*Math.abs((e.bottom-R.height-u)/R.height)),!y&&a>=e.right-R.width?(E.x=tt.Forward,k.x=r*Math.abs((e.right-R.width-a)/R.width)):!p&&o<=e.left+R.width&&(E.x=tt.Backward,k.x=r*Math.abs((e.left+R.width-o)/R.width)),{direction:E,speed:k}}function R4(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function l1(t){return t.reduce((e,n)=>ro(e,Sp(n)),Dn)}function A4(t){return t.reduce((e,n)=>e+s1(n),0)}function N4(t){return t.reduce((e,n)=>e+i1(n),0)}function u1(t,e){if(e===void 0&&(e=Nl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);r1(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const b4=[["x",["left","right"],A4],["y",["top","bottom"],N4]];class Vg{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Mg(n),s=l1(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of b4)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=a(r),f=s[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ca{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function P4(t){const{EventTarget:e}=Ut(t);return t instanceof e?t:Lo(t)}function Xh(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var an;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(an||(an={}));function x0(t){t.preventDefault()}function D4(t){t.stopPropagation()}var ge;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ge||(ge={}));const c1={start:[ge.Space,ge.Enter],cancel:[ge.Esc],end:[ge.Space,ge.Enter,ge.Tab]},O4=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ge.Right:return{...n,x:n.x+25};case ge.Left:return{...n,x:n.x-25};case ge.Down:return{...n,y:n.y+25};case ge.Up:return{...n,y:n.y-25}}};class d1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Ca(Lo(n)),this.windowListeners=new Ca(Ut(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(an.Resize,this.handleCancel),this.windowListeners.add(an.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(an.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&u1(r),n(Dn)}handleKeyDown(e){if(jg(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=c1,coordinateGetter:o=O4,scrollBehavior:a="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:Dn;this.referenceCoordinates||(this.referenceCoordinates=f);const p=o(e,{active:n,context:r.current,currentCoordinates:f});if(p){const y=Hc(p,f),E={x:0,y:0},{scrollableAncestors:k}=r.current;for(const R of k){const C=e.code,{isTop:w,isRight:v,isLeft:_,isBottom:b,maxScroll:O,minScroll:j}=a1(R),S=R4(R),g={x:Math.min(C===ge.Right?S.right-S.width/2:S.right,Math.max(C===ge.Right?S.left:S.left+S.width/2,p.x)),y:Math.min(C===ge.Down?S.bottom-S.height/2:S.bottom,Math.max(C===ge.Down?S.top:S.top+S.height/2,p.y))},I=C===ge.Right&&!v||C===ge.Left&&!_,A=C===ge.Down&&!b||C===ge.Up&&!w;if(I&&g.x!==p.x){const P=R.scrollLeft+y.x,D=C===ge.Right&&P<=O.x||C===ge.Left&&P>=j.x;if(D&&!y.y){R.scrollTo({left:P,behavior:a});return}D?E.x=R.scrollLeft-P:E.x=C===ge.Right?R.scrollLeft-O.x:R.scrollLeft-j.x,E.x&&R.scrollBy({left:-E.x,behavior:a});break}else if(A&&g.y!==p.y){const P=R.scrollTop+y.y,D=C===ge.Down&&P<=O.y||C===ge.Up&&P>=j.y;if(D&&!y.x){R.scrollTo({top:P,behavior:a});return}D?E.y=R.scrollTop-P:E.y=C===ge.Down?R.scrollTop-O.y:R.scrollTop-j.y,E.y&&R.scrollBy({top:-E.y,behavior:a});break}}this.handleMove(e,ro(Hc(p,this.referenceCoordinates),E))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}d1.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=c1,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function T0(t){return!!(t&&"distance"in t)}function I0(t){return!!(t&&"delay"in t)}class Ug{constructor(e,n,r){var s;r===void 0&&(r=P4(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=Lo(o),this.documentListeners=new Ca(this.document),this.listeners=new Ca(r),this.windowListeners=new Ca(Ut(o)),this.initialCoordinates=(s=Kc(i))!=null?s:Dn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(an.Resize,this.handleCancel),this.windowListeners.add(an.DragStart,x0),this.windowListeners.add(an.VisibilityChange,this.handleCancel),this.windowListeners.add(an.ContextMenu,x0),this.documentListeners.add(an.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(I0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(T0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(an.Click,D4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(an.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const u=(n=Kc(e))!=null?n:Dn,c=Hc(s,u);if(!r&&a){if(T0(a)){if(a.tolerance!=null&&Xh(c,a.tolerance))return this.handleCancel();if(Xh(c,a.distance))return this.handleStart()}if(I0(a)&&Xh(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ge.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const L4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Fg extends Ug{constructor(e){const{event:n}=e,r=Lo(n.target);super(e,L4,r)}}Fg.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const j4={move:{name:"mousemove"},end:{name:"mouseup"}};var kp;(function(t){t[t.RightClick=2]="RightClick"})(kp||(kp={}));class M4 extends Ug{constructor(e){super(e,j4,Lo(e.event.target))}}M4.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===kp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Jh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class V4 extends Ug{constructor(e){super(e,Jh)}static setup(){return window.addEventListener(Jh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Jh.move.name,e)};function e(){}}}V4.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ra;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Ra||(Ra={}));var Qc;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qc||(Qc={}));function U4(t){let{acceleration:e,activator:n=Ra.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=Qc.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:p,threshold:y}=t;const E=z4({delta:p,disabled:!i}),[k,R]=Qj(),C=x.useRef({x:0,y:0}),w=x.useRef({x:0,y:0}),v=x.useMemo(()=>{switch(n){case Ra.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Ra.DraggableRect:return s}},[n,s,u]),_=x.useRef(null),b=x.useCallback(()=>{const j=_.current;if(!j)return;const S=C.current.x*w.current.x,g=C.current.y*w.current.y;j.scrollBy(S,g)},[]),O=x.useMemo(()=>a===Qc.TreeOrder?[...c].reverse():c,[a,c]);x.useEffect(()=>{if(!i||!c.length||!v){R();return}for(const j of O){if((r==null?void 0:r(j))===!1)continue;const S=c.indexOf(j),g=f[S];if(!g)continue;const{direction:I,speed:A}=C4(j,g,v,e,y);for(const P of["x","y"])E[P][I[P]]||(A[P]=0,I[P]=0);if(A.x>0||A.y>0){R(),_.current=j,k(b,o),C.current=A,w.current=I;return}}C.current={x:0,y:0},w.current={x:0,y:0},R()},[e,b,r,R,i,o,JSON.stringify(v),JSON.stringify(E),k,c,O,f,JSON.stringify(y)])}const F4={x:{[tt.Backward]:!1,[tt.Forward]:!1},y:{[tt.Backward]:!1,[tt.Forward]:!1}};function z4(t){let{delta:e,disabled:n}=t;const r=Wc(e);return Al(s=>{if(n||!r||!s)return F4;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[tt.Backward]:s.x[tt.Backward]||i.x===-1,[tt.Forward]:s.x[tt.Forward]||i.x===1},y:{[tt.Backward]:s.y[tt.Backward]||i.y===-1,[tt.Forward]:s.y[tt.Forward]||i.y===1}}},[n,e,r])}function B4(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Al(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function $4(t,e){return x.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var ll;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ll||(ll={}));var Cp;(function(t){t.Optimized="optimized"})(Cp||(Cp={}));const S0=new Map;function q4(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=x.useState(null),{frequency:a,measure:u,strategy:c}=s,f=x.useRef(t),p=C(),y=ol(p),E=x.useCallback(function(w){w===void 0&&(w=[]),!y.current&&o(v=>v===null?w:v.concat(w.filter(_=>!v.includes(_))))},[y]),k=x.useRef(null),R=Al(w=>{if(p&&!n)return S0;if(!w||w===S0||f.current!==t||i!=null){const v=new Map;for(let _ of t){if(!_)continue;if(i&&i.length>0&&!i.includes(_.id)&&_.rect.current){v.set(_.id,_.rect.current);continue}const b=_.node.current,O=b?new Vg(u(b),b):null;_.rect.current=O,O&&v.set(_.id,O)}return v}return w},[t,i,n,p,u]);return x.useEffect(()=>{f.current=t},[t]),x.useEffect(()=>{p||E()},[n,p]),x.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),x.useEffect(()=>{p||typeof a!="number"||k.current!==null||(k.current=setTimeout(()=>{E(),k.current=null},a))},[a,p,E,...r]),{droppableRects:R,measureDroppableContainers:E,measuringScheduled:i!=null};function C(){switch(c){case ll.Always:return!1;case ll.BeforeDragging:return n;default:return!n}}}function zg(t,e){return Al(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function W4(t,e){return zg(t,e)}function H4(t){let{callback:e,disabled:n}=t;const r=qd(e),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return x.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Hd(t){let{callback:e,disabled:n}=t;const r=qd(e),s=x.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return x.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function K4(t){return new Vg(Nl(t),t)}function k0(t,e,n){e===void 0&&(e=K4);const[r,s]=x.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=H4({callback(u){if(t)for(const c of u){const{type:f,target:p}=c;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),a=Hd({callback:i});return Tr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function G4(t){const e=zg(t);return t1(t,e)}const C0=[];function Q4(t){const e=x.useRef(t),n=Al(r=>t?r&&r!==C0&&t&&e.current&&t.parentNode===e.current.parentNode?r:Mg(t):C0,[t]);return x.useEffect(()=>{e.current=t},[t]),n}function Y4(t){const[e,n]=x.useState(null),r=x.useRef(t),s=x.useCallback(i=>{const o=Yh(i.target);o&&n(a=>a?(a.set(o,Sp(o)),new Map(a)):null)},[]);return x.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(u=>{const c=Yh(u);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,Sp(c)]):null}).filter(u=>u!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(u=>{const c=Yh(u);c==null||c.removeEventListener("scroll",s)})}},[s,t]),x.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>ro(i,o),Dn):l1(t):Dn,[t,e])}function R0(t,e){e===void 0&&(e=[]);const n=x.useRef(null);return x.useEffect(()=>{n.current=null},e),x.useEffect(()=>{const r=t!==Dn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Hc(t,n.current):Dn}function X4(t){x.useEffect(()=>{if(!$d)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function J4(t,e){return x.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function h1(t){return x.useMemo(()=>t?T4(t):null,[t])}const A0=[];function Z4(t,e){e===void 0&&(e=Nl);const[n]=t,r=h1(n?Ut(n):null),[s,i]=x.useState(A0);function o(){i(()=>t.length?t.map(u=>o1(u)?r:new Vg(e(u),u)):A0)}const a=Hd({callback:o});return Tr(()=>{a==null||a.disconnect(),o(),t.forEach(u=>a==null?void 0:a.observe(u))},[t]),s}function f1(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Rl(e)?e:t}function eM(t){let{measure:e}=t;const[n,r]=x.useState(null),s=x.useCallback(c=>{for(const{target:f}of c)if(Rl(f)){r(p=>{const y=e(f);return p?{...p,width:y.width,height:y.height}:y});break}},[e]),i=Hd({callback:s}),o=x.useCallback(c=>{const f=f1(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?e(f):null)},[e,i]),[a,u]=qc(o);return x.useMemo(()=>({nodeRef:a,rect:n,setRef:u}),[n,a,u])}const tM=[{sensor:Fg,options:{}},{sensor:d1,options:{}}],nM={current:{}},Ju={draggable:{measure:E0},droppable:{measure:E0,strategy:ll.WhileDragging,frequency:Cp.Optimized},dragOverlay:{measure:Nl}};class Aa extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const rM={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Aa,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ju,measureDroppableContainers:Gc,windowRect:null,measuringScheduled:!1},p1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gc,draggableNodes:new Map,over:null,measureDroppableContainers:Gc},bl=x.createContext(p1),m1=x.createContext(rM);function sM(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Aa}}}function iM(t,e){switch(e.type){case Ge.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ge.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ge.DragEnd:case Ge.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ge.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Aa(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Ge.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new Aa(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Ge.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Aa(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function oM(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=x.useContext(bl),i=Wc(r),o=Wc(n==null?void 0:n.id);return x.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!jg(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:u,node:c}=a;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const p=Jj(f);if(p){p.focus();break}}})}},[r,e,s,o,i]),null}function g1(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function aM(t){return x.useMemo(()=>({draggable:{...Ju.draggable,...t==null?void 0:t.draggable},droppable:{...Ju.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ju.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function lM(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=x.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Tr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const f=n(c),p=t1(f,r);if(o||(p.x=0),a||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=r1(c);y&&y.scrollBy({top:p.y,left:p.x})}},[e,o,a,r,n])}const Kd=x.createContext({...Dn,scaleX:1,scaleY:1});var Ur;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ur||(Ur={}));const uM=x.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:u=!0,children:c,sensors:f=tM,collisionDetection:p=y4,measuring:y,modifiers:E,...k}=e;const R=x.useReducer(iM,void 0,sM),[C,w]=R,[v,_]=s4(),[b,O]=x.useState(Ur.Uninitialized),j=b===Ur.Initialized,{draggable:{active:S,nodes:g,translate:I},droppable:{containers:A}}=C,P=S!=null?g.get(S):null,D=x.useRef({initial:null,translated:null}),N=x.useMemo(()=>{var $e;return S!=null?{id:S,data:($e=P==null?void 0:P.data)!=null?$e:nM,rect:D}:null},[S,P]),Se=x.useRef(null),[nn,pt]=x.useState(null),[pe,B]=x.useState(null),K=ol(k,Object.values(k)),X=Wd("DndDescribedBy",o),ye=x.useMemo(()=>A.getEnabled(),[A]),re=aM(y),{droppableRects:fe,measureDroppableContainers:Ft,measuringScheduled:rn}=q4(ye,{dragging:j,dependencies:[I.x,I.y],config:re.droppable}),Me=B4(g,S),sn=x.useMemo(()=>pe?Kc(pe):null,[pe]),Pl=Ns(),Dl=W4(Me,re.draggable.measure);lM({activeNode:S!=null?g.get(S):null,config:Pl.layoutShiftCompensation,initialRect:Dl,measure:re.draggable.measure});const mt=k0(Me,re.draggable.measure,Dl),Rr=k0(Me?Me.parentElement:null),gn=x.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:g,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),yi=A.getNodeFor((n=gn.current.over)==null?void 0:n.id),yn=eM({measure:re.dragOverlay.measure}),Ar=(r=yn.nodeRef.current)!=null?r:Me,Xn=j?(s=yn.rect)!=null?s:mt:null,Ol=!!(yn.nodeRef.current&&yn.rect),Ll=G4(Ol?null:mt),vi=h1(Ar?Ut(Ar):null),on=Q4(j?yi??Me:null),Rs=Z4(on),_i=g1(E,{transform:{x:I.x-Ll.x,y:I.y-Ll.y,scaleX:1,scaleY:1},activatorEvent:pe,active:N,activeNodeRect:mt,containerNodeRect:Rr,draggingNodeRect:Xn,over:gn.current.over,overlayNodeRect:yn.rect,scrollableAncestors:on,scrollableAncestorRects:Rs,windowRect:vi}),wi=sn?ro(sn,I):null,Ei=Y4(on),jl=R0(Ei),Je=R0(Ei,[mt]),Pe=ro(_i,jl),vn=Xn?w4(Xn,_i):null,Nr=N&&vn?p({active:N,collisionRect:vn,droppableRects:fe,droppableContainers:ye,pointerCoordinates:wi}):null,jo=p4(Nr,"id"),[On,br]=x.useState(null),Ml=Ol?_i:ro(_i,Je),Vl=v4(Ml,(i=On==null?void 0:On.rect)!=null?i:null,mt),As=x.useRef(null),Ul=x.useCallback(($e,rt)=>{let{sensor:Ve,options:_n}=rt;if(Se.current==null)return;const st=g.get(Se.current);if(!st)return;const gt=$e.nativeEvent,yt=new Ve({active:Se.current,activeNode:st,event:gt,options:_n,context:gn,onAbort(ae){if(!g.get(ae))return;const{onDragAbort:vt}=K.current,bt={id:ae};vt==null||vt(bt),v({type:"onDragAbort",event:bt})},onPending(ae,wn,vt,bt){if(!g.get(ae))return;const{onDragPending:Ps}=K.current,Pt={id:ae,constraint:wn,initialCoordinates:vt,offset:bt};Ps==null||Ps(Pt),v({type:"onDragPending",event:Pt})},onStart(ae){const wn=Se.current;if(wn==null)return;const vt=g.get(wn);if(!vt)return;const{onDragStart:bt}=K.current,bs={activatorEvent:gt,active:{id:wn,data:vt.data,rect:D}};qi.unstable_batchedUpdates(()=>{bt==null||bt(bs),O(Ur.Initializing),w({type:Ge.DragStart,initialCoordinates:ae,active:wn}),v({type:"onDragStart",event:bs}),pt(As.current),B(gt)})},onMove(ae){w({type:Ge.DragMove,coordinates:ae})},onEnd:Jn(Ge.DragEnd),onCancel:Jn(Ge.DragCancel)});As.current=yt;function Jn(ae){return async function(){const{active:vt,collisions:bt,over:bs,scrollAdjustedTranslate:Ps}=gn.current;let Pt=null;if(vt&&Ps){const{cancelDrop:Ds}=K.current;Pt={activatorEvent:gt,active:vt,collisions:bt,delta:Ps,over:bs},ae===Ge.DragEnd&&typeof Ds=="function"&&await Promise.resolve(Ds(Pt))&&(ae=Ge.DragCancel)}Se.current=null,qi.unstable_batchedUpdates(()=>{w({type:ae}),O(Ur.Uninitialized),br(null),pt(null),B(null),As.current=null;const Ds=ae===Ge.DragEnd?"onDragEnd":"onDragCancel";if(Pt){const Mo=K.current[Ds];Mo==null||Mo(Pt),v({type:Ds,event:Pt})}})}}},[g]),Gd=x.useCallback(($e,rt)=>(Ve,_n)=>{const st=Ve.nativeEvent,gt=g.get(_n);if(Se.current!==null||!gt||st.dndKit||st.defaultPrevented)return;const yt={active:gt};$e(Ve,rt.options,yt)===!0&&(st.dndKit={capturedBy:rt.sensor},Se.current=_n,Ul(Ve,rt))},[g,Ul]),xi=$4(f,Gd);X4(f),Tr(()=>{mt&&b===Ur.Initializing&&O(Ur.Initialized)},[mt,b]),x.useEffect(()=>{const{onDragMove:$e}=K.current,{active:rt,activatorEvent:Ve,collisions:_n,over:st}=gn.current;if(!rt||!Ve)return;const gt={active:rt,activatorEvent:Ve,collisions:_n,delta:{x:Pe.x,y:Pe.y},over:st};qi.unstable_batchedUpdates(()=>{$e==null||$e(gt),v({type:"onDragMove",event:gt})})},[Pe.x,Pe.y]),x.useEffect(()=>{const{active:$e,activatorEvent:rt,collisions:Ve,droppableContainers:_n,scrollAdjustedTranslate:st}=gn.current;if(!$e||Se.current==null||!rt||!st)return;const{onDragOver:gt}=K.current,yt=_n.get(jo),Jn=yt&&yt.rect.current?{id:yt.id,rect:yt.rect.current,data:yt.data,disabled:yt.disabled}:null,ae={active:$e,activatorEvent:rt,collisions:Ve,delta:{x:st.x,y:st.y},over:Jn};qi.unstable_batchedUpdates(()=>{br(Jn),gt==null||gt(ae),v({type:"onDragOver",event:ae})})},[jo]),Tr(()=>{gn.current={activatorEvent:pe,active:N,activeNode:Me,collisionRect:vn,collisions:Nr,droppableRects:fe,draggableNodes:g,draggingNode:Ar,draggingNodeRect:Xn,droppableContainers:A,over:On,scrollableAncestors:on,scrollAdjustedTranslate:Pe},D.current={initial:Xn,translated:vn}},[N,Me,Nr,vn,g,Ar,Xn,fe,A,On,on,Pe]),U4({...Pl,delta:I,draggingRect:vn,pointerCoordinates:wi,scrollableAncestors:on,scrollableAncestorRects:Rs});const Fl=x.useMemo(()=>({active:N,activeNode:Me,activeNodeRect:mt,activatorEvent:pe,collisions:Nr,containerNodeRect:Rr,dragOverlay:yn,draggableNodes:g,droppableContainers:A,droppableRects:fe,over:On,measureDroppableContainers:Ft,scrollableAncestors:on,scrollableAncestorRects:Rs,measuringConfiguration:re,measuringScheduled:rn,windowRect:vi}),[N,Me,mt,pe,Nr,Rr,yn,g,A,fe,On,Ft,on,Rs,re,rn,vi]),zl=x.useMemo(()=>({activatorEvent:pe,activators:xi,active:N,activeNodeRect:mt,ariaDescribedById:{draggable:X},dispatch:w,draggableNodes:g,over:On,measureDroppableContainers:Ft}),[pe,xi,N,mt,w,X,g,On,Ft]);return Ce.createElement(e1.Provider,{value:_},Ce.createElement(bl.Provider,{value:zl},Ce.createElement(m1.Provider,{value:Fl},Ce.createElement(Kd.Provider,{value:Vl},c)),Ce.createElement(oM,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Ce.createElement(a4,{...a,hiddenTextDescribedById:X}));function Ns(){const $e=(nn==null?void 0:nn.autoScrollEnabled)===!1,rt=typeof u=="object"?u.enabled===!1:u===!1,Ve=j&&!$e&&!rt;return typeof u=="object"?{...u,enabled:Ve}:{enabled:Ve}}}),cM=x.createContext(null),N0="button",dM="Draggable";function hM(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Wd(dM),{activators:o,activatorEvent:a,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:p,over:y}=x.useContext(bl),{role:E=N0,roleDescription:k="draggable",tabIndex:R=0}=s??{},C=(u==null?void 0:u.id)===e,w=x.useContext(C?Kd:cM),[v,_]=qc(),[b,O]=qc(),j=J4(o,e),S=ol(n);Tr(()=>(p.set(e,{id:e,key:i,node:v,activatorNode:b,data:S}),()=>{const I=p.get(e);I&&I.key===i&&p.delete(e)}),[p,e]);const g=x.useMemo(()=>({role:E,tabIndex:R,"aria-disabled":r,"aria-pressed":C&&E===N0?!0:void 0,"aria-roledescription":k,"aria-describedby":f.draggable}),[r,E,R,C,k,f.draggable]);return{active:u,activatorEvent:a,activeNodeRect:c,attributes:g,isDragging:C,listeners:r?void 0:j,node:v,over:y,setNodeRef:_,setActivatorNodeRef:O,transform:w}}function fM(){return x.useContext(m1)}const pM="Droppable",mM={timeout:25};function gM(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Wd(pM),{active:o,dispatch:a,over:u,measureDroppableContainers:c}=x.useContext(bl),f=x.useRef({disabled:n}),p=x.useRef(!1),y=x.useRef(null),E=x.useRef(null),{disabled:k,updateMeasurementsFor:R,timeout:C}={...mM,...s},w=ol(R??r),v=x.useCallback(()=>{if(!p.current){p.current=!0;return}E.current!=null&&clearTimeout(E.current),E.current=setTimeout(()=>{c(Array.isArray(w.current)?w.current:[w.current]),E.current=null},C)},[C]),_=Hd({callback:v,disabled:k||!o}),b=x.useCallback((g,I)=>{_&&(I&&(_.unobserve(I),p.current=!1),g&&_.observe(g))},[_]),[O,j]=qc(b),S=ol(e);return x.useEffect(()=>{!_||!O.current||(_.disconnect(),p.current=!1,_.observe(O.current))},[O,_]),x.useEffect(()=>(a({type:Ge.RegisterDroppable,element:{id:r,key:i,disabled:n,node:O,rect:y,data:S}}),()=>a({type:Ge.UnregisterDroppable,key:i,id:r})),[r]),x.useEffect(()=>{n!==f.current.disabled&&(a({type:Ge.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,a]),{active:o,rect:y,isOver:(u==null?void 0:u.id)===r,node:O,over:u,setNodeRef:j}}function yM(t){let{animation:e,children:n}=t;const[r,s]=x.useState(null),[i,o]=x.useState(null),a=Wc(n);return!n&&!r&&a&&s(a),Tr(()=>{if(!i)return;const u=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(u==null||c==null){s(null);return}Promise.resolve(e(c,i)).then(()=>{s(null)})},[e,r,i]),Ce.createElement(Ce.Fragment,null,n,r?x.cloneElement(r,{ref:o}):null)}const vM={x:0,y:0,scaleX:1,scaleY:1};function _M(t){let{children:e}=t;return Ce.createElement(bl.Provider,{value:p1},Ce.createElement(Kd.Provider,{value:vM},e))}const wM={position:"fixed",touchAction:"none"},EM=t=>jg(t)?"transform 250ms ease":void 0,xM=x.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:a,style:u,transform:c,transition:f=EM}=t;if(!a)return null;const p=s?c:{...c,scaleX:1,scaleY:1},y={...wM,width:a.width,height:a.height,top:a.top,left:a.left,transform:al.Transform.toString(p),transformOrigin:s&&r?d4(r,a):void 0,transition:typeof f=="function"?f(r):f,...u};return Ce.createElement(n,{className:o,style:y,ref:e},i)}),TM=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[a,u]of Object.entries(i.active))u!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,u));if(i!=null&&i.dragOverlay)for(const[a,u]of Object.entries(i.dragOverlay))u!==void 0&&r.node.style.setProperty(a,u);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[u,c]of Object.entries(s))n.node.style.setProperty(u,c);o!=null&&o.active&&n.node.classList.remove(o.active)}},IM=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:al.Transform.toString(e)},{transform:al.Transform.toString(n)}]},SM={duration:250,easing:"ease",keyframes:IM,sideEffects:TM({styles:{active:{opacity:"0"}}})};function kM(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return qd((i,o)=>{if(e===null)return;const a=n.get(i);if(!a)return;const u=a.node.current;if(!u)return;const c=f1(o);if(!c)return;const{transform:f}=Ut(o).getComputedStyle(o),p=n1(f);if(!p)return;const y=typeof e=="function"?e:CM(e);return u1(u,s.draggable.measure),y({active:{id:i,data:a.data,node:u,rect:s.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:s,transform:p})})}function CM(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...SM,...t};return i=>{let{active:o,dragOverlay:a,transform:u,...c}=i;if(!e)return;const f={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},p={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/a.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/a.rect.height:1},y={x:u.x-f.x,y:u.y-f.y,...p},E=s({...c,active:o,dragOverlay:a,transform:{initial:u,final:y}}),[k]=E,R=E[E.length-1];if(JSON.stringify(k)===JSON.stringify(R))return;const C=r==null?void 0:r({active:o,dragOverlay:a,...c}),w=a.node.animate(E,{duration:e,easing:n,fill:"forwards"});return new Promise(v=>{w.onfinish=()=>{C==null||C(),v()}})}}let b0=0;function RM(t){return x.useMemo(()=>{if(t!=null)return b0++,b0},[t])}const AM=Ce.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:a="div",className:u,zIndex:c=999}=t;const{activatorEvent:f,active:p,activeNodeRect:y,containerNodeRect:E,draggableNodes:k,droppableContainers:R,dragOverlay:C,over:w,measuringConfiguration:v,scrollableAncestors:_,scrollableAncestorRects:b,windowRect:O}=fM(),j=x.useContext(Kd),S=RM(p==null?void 0:p.id),g=g1(o,{activatorEvent:f,active:p,activeNodeRect:y,containerNodeRect:E,draggingNodeRect:C.rect,over:w,overlayNodeRect:C.rect,scrollableAncestors:_,scrollableAncestorRects:b,transform:j,windowRect:O}),I=zg(y),A=kM({config:r,draggableNodes:k,droppableContainers:R,measuringConfiguration:v}),P=I?C.setRef:void 0;return Ce.createElement(_M,null,Ce.createElement(yM,{animation:A},p&&S?Ce.createElement(xM,{key:S,id:p.id,ref:P,as:a,activatorEvent:f,adjustScale:e,className:u,transition:i,rect:I,style:{zIndex:c,...s},transform:g},n):null))});function Bg({status:t,type:e="order"}){const r=(e==="quote"?Ip:$c).find(s=>s.value===t);return r?d.jsx("span",{className:r.color,children:r.label}):d.jsx("span",{className:"badge bg-gray-100 text-gray-600",children:t})}function NM({order:t,onClick:e}){const{attributes:n,listeners:r,setNodeRef:s,transform:i,isDragging:o}=hM({id:t.id,data:{order:t}}),a=i?{transform:`translate(${i.x}px, ${i.y}px)`,opacity:o?.5:1}:void 0;return d.jsxs("div",{ref:s,style:a,className:"card p-3 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(t),children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"text-sm font-semibold truncate",children:t.customerName}),d.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400 mt-1 line-clamp-2",children:t.description})]}),d.jsx("button",{...n,...r,className:"shrink-0 p-1 text-wood-400 hover:text-wood-600 cursor-grab",children:d.jsx(Aj,{size:14})})]}),d.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-parchment-100 dark:border-wood-800",children:[d.jsx("p",{className:"text-sm font-bold",children:Ct(t.price)}),t.assignedToName&&d.jsxs("span",{className:"flex items-center gap-1 text-xs text-wood-400",children:[d.jsx(HI,{size:12}),t.assignedToName]})]})]})}function bM({status:t,orders:e,onCardClick:n}){const{setNodeRef:r,isOver:s}=gM({id:t.value});return d.jsxs("div",{ref:r,className:`flex-1 min-w-[280px] rounded-xl p-3 transition-colors ${s?"bg-parchment-200 dark:bg-wood-800":"bg-parchment-100/50 dark:bg-wood-900/50"}`,children:[d.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Bg,{status:t.value}),d.jsx("span",{className:"text-xs text-wood-400 font-medium",children:e.length})]})}),d.jsx("div",{className:"space-y-2 min-h-[100px]",children:e.map(i=>d.jsx(NM,{order:i,onClick:n},i.id))})]})}function PM({orders:t,onStatusChange:e,onCardClick:n}){const[r,s]=x.useState(null),i=u4(l4(Fg,{activationConstraint:{distance:8}})),o=$c.map(c=>({...c,orders:t.filter(f=>f.status===c.value)}));function a(c){const{active:f,over:p}=c;if(s(null),!p)return;const y=f.id,E=p.id,k=t.find(R=>R.id===y);k&&k.status!==E&&$c.some(R=>R.value===E)&&e(y,E)}const u=r?t.find(c=>c.id===r):null;return d.jsxs(uM,{sensors:i,collisionDetection:m4,onDragStart:c=>s(c.active.id),onDragEnd:a,children:[d.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:o.map(c=>d.jsx(bM,{status:c,orders:c.orders,onCardClick:n},c.value))}),d.jsx(AM,{children:u&&d.jsxs("div",{className:"card p-3 shadow-xl w-[280px] rotate-2",children:[d.jsx("p",{className:"text-sm font-semibold",children:u.customerName}),d.jsx("p",{className:"text-xs text-wood-500 mt-1",children:u.description})]})})]})}function DM({orders:t,onEdit:e,onDelete:n}){const{isAdmin:r}=mn();return d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-parchment-200 dark:border-wood-800",children:[d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Customer"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Description"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Price"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Deposit"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Status"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Assigned"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Date"}),d.jsx("th",{className:"py-3 px-4"})]})}),d.jsx("tbody",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:t.map(s=>d.jsxs("tr",{className:"hover:bg-parchment-50 dark:hover:bg-wood-900/50",children:[d.jsxs("td",{className:"py-3 px-4",children:[d.jsx("p",{className:"font-medium",children:s.customerName}),d.jsx("p",{className:"text-xs text-wood-400",children:s.contactInfo})]}),d.jsx("td",{className:"py-3 px-4 max-w-[200px] truncate",children:s.description}),d.jsx("td",{className:"py-3 px-4 font-semibold",children:Ct(s.price)}),d.jsx("td",{className:"py-3 px-4",children:Ct(s.depositPaid)}),d.jsx("td",{className:"py-3 px-4",children:d.jsx(Bg,{status:s.status})}),d.jsx("td",{className:"py-3 px-4 text-wood-500",children:s.assignedToName||""}),d.jsx("td",{className:"py-3 px-4 text-wood-400 text-xs",children:Bd(s.createdAt)}),d.jsx("td",{className:"py-3 px-4",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>e(s),className:"p-1.5 rounded hover:bg-parchment-200 dark:hover:bg-wood-800",children:d.jsx(Fd,{size:14})}),r&&d.jsx("button",{onClick:()=>n(s.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:d.jsx(li,{size:14})})]})})]},s.id))})]})})}function OM(){const{isAdmin:t,currentUser:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0),[o,a]=x.useState("kanban"),[u,c]=x.useState(""),[f,p]=x.useState(""),[y,E]=x.useState(!1),[k,R]=x.useState(null),[C,w]=x.useState(!1);x.useEffect(()=>{v()},[u,f]);async function v(){try{const g={};u&&(g.search=u),f&&(g.status=f);const I=await bi.list(g);r(I)}catch{H.error("Failed to load orders")}finally{i(!1)}}async function _(g){w(!0);try{await bi.create(g,e),H.success("Order created"),E(!1),v()}catch(I){H.error(I.message)}finally{w(!1)}}async function b(g){w(!0);try{await bi.update(k.id,g,e),H.success("Order updated"),R(null),v()}catch(I){H.error(I.message)}finally{w(!1)}}async function O(g,I){try{await bi.update(g,{status:I},e),r(A=>A.map(P=>P.id===g?{...P,status:I}:P)),H.success("Status updated")}catch{H.error("Failed to update status")}}async function j(g){if(confirm("Delete this order?"))try{await bi.delete(g,e),H.success("Order deleted"),v()}catch(I){H.error(I.message)}}function S(){Kj(n.map(g=>{var I,A,P,D;return{customer:g.customerName,contact:g.contactInfo,description:g.description,price:g.price,deposit:g.depositPaid,status:g.status,assigned:g.assignedToName||"",created:((D=(P=(A=(I=g.createdAt)==null?void 0:I.toDate)==null?void 0:A.call(I))==null?void 0:P.toISOString)==null?void 0:D.call(P))||""}}),"riverside-orders"),H.success("Exported to CSV")}return d.jsxs("div",{children:[d.jsx(Cs,{title:"Orders",description:"Manage customer orders and track delivery status.",actions:d.jsxs("button",{onClick:()=>E(!0),className:"btn-primary",children:[d.jsx(ys,{size:16})," New Order"]})}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6",children:[d.jsxs("div",{className:"relative flex-1 w-full sm:max-w-xs",children:[d.jsx(zd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-wood-400"}),d.jsx("input",{className:"input pl-9",placeholder:"Search orders...",value:u,onChange:g=>c(g.target.value)})]}),d.jsxs("select",{className:"input w-auto",value:f,onChange:g=>p(g.target.value),children:[d.jsx("option",{value:"",children:"All Statuses"}),$c.map(g=>d.jsx("option",{value:g.value,children:g.label},g.value))]}),d.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[d.jsx("button",{onClick:()=>a("kanban"),className:`p-2 rounded-lg transition-colors ${o==="kanban"?"bg-wood-700 text-white":"hover:bg-parchment-200 dark:hover:bg-wood-800"}`,children:d.jsx(bj,{size:16})}),d.jsx("button",{onClick:()=>a("table"),className:`p-2 rounded-lg transition-colors ${o==="table"?"bg-wood-700 text-white":"hover:bg-parchment-200 dark:hover:bg-wood-800"}`,children:d.jsx(Vj,{size:16})}),d.jsxs("button",{onClick:S,className:"btn-ghost btn-sm ml-2",children:[d.jsx(Rj,{size:14})," CSV"]})]})]}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?d.jsx(Do,{icon:Ag,title:"No orders found",description:u?"Try a different search term":"Create your first order to get started",action:!u&&d.jsxs("button",{onClick:()=>E(!0),className:"btn-primary btn-sm",children:[d.jsx(ys,{size:14})," New Order"]})}):o==="kanban"?d.jsx(PM,{orders:n,onStatusChange:O,onCardClick:R}):d.jsx("div",{className:"card overflow-hidden",children:d.jsx(DM,{orders:n,onEdit:R,onDelete:j})}),d.jsx(Qn,{open:y,onClose:()=>E(!1),title:"New Order",wide:!0,children:d.jsx(v0,{onSubmit:_,onCancel:()=>E(!1),submitting:C})}),d.jsx(Qn,{open:!!k,onClose:()=>R(null),title:"Edit Order",wide:!0,children:k&&d.jsx(v0,{initial:k,onSubmit:b,onCancel:()=>R(null),submitting:C})})]})}function LM(){const{isAdmin:t,currentUser:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0),[o,a]=x.useState(""),[u,c]=x.useState(""),[f,p]=x.useState(!1),[y,E]=x.useState(null),[k,R]=x.useState(!1),[C,w]=x.useState([]);x.useEffect(()=>{v()},[o,u]),x.useEffect(()=>{Hi.list().then(w).catch(()=>{})},[]);async function v(){try{const g=await Ci.list({status:u||void 0,search:o||void 0});r(g)}catch{H.error("Failed to load quotes")}finally{i(!1)}}async function _(g){R(!0);try{y?(await Ci.update(y.id,g),H.success("Quote updated"),E(null)):(await Ci.create(g,e),H.success("Quote created"),p(!1)),v()}catch(I){H.error(I.message)}finally{R(!1)}}async function b(g){if(confirm("Convert this quote to an order?"))try{await Ci.convert(g,e),H.success("Quote converted to order!"),v()}catch(I){H.error(I.message)}}async function O(g){if(confirm("Delete this quote?"))try{await Ci.delete(g,e),H.success("Quote deleted"),v()}catch(I){H.error(I.message)}}async function j(g,I){try{await Ci.update(g,{status:I}),H.success("Status updated"),v()}catch{H.error("Failed to update")}}function S({initial:g}){const[I,A]=x.useState({customerName:"",contactInfo:"",notes:"",...g}),[P,D]=x.useState((g==null?void 0:g.items)||[]),[N,Se]=x.useState((g==null?void 0:g.discount)??"");function nn(pt){pt.preventDefault();const{subtotal:pe,total:B}=QI(P,N),K=YI(P);_({...I,items:P,subtotal:pe,discount:Number(N)||0,estimatedPrice:B,requestedItems:K||I.customerName})}return d.jsxs("form",{onSubmit:nn,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Customer Name *"}),d.jsx("input",{className:"input",value:I.customerName,onChange:pt=>A(pe=>({...pe,customerName:pt.target.value})),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Contact Info *"}),d.jsx("input",{className:"input",value:I.contactInfo,onChange:pt=>A(pe=>({...pe,contactInfo:pt.target.value})),required:!0})]})]}),d.jsx(XI,{items:P,onChange:D,prices:C,discount:N,onDiscountChange:Se}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Notes"}),d.jsx("textarea",{className:"input",rows:2,value:I.notes,onChange:pt=>A(pe=>({...pe,notes:pt.target.value}))})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>{p(!1),E(null)},className:"btn-secondary",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:k,children:k?"Saving...":g?"Update Quote":"Create Quote"})]})]})}return d.jsxs("div",{children:[d.jsx(Cs,{title:"Quotes",description:"Manage price quotes and convert them to orders.",actions:d.jsxs("button",{onClick:()=>p(!0),className:"btn-primary",children:[d.jsx(ys,{size:16})," New Quote"]})}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6",children:[d.jsxs("div",{className:"relative flex-1 w-full sm:max-w-xs",children:[d.jsx(zd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-wood-400"}),d.jsx("input",{className:"input pl-9",placeholder:"Search quotes...",value:o,onChange:g=>a(g.target.value)})]}),d.jsxs("select",{className:"input w-auto",value:u,onChange:g=>c(g.target.value),children:[d.jsx("option",{value:"",children:"All Statuses"}),Ip.map(g=>d.jsx("option",{value:g.value,children:g.label},g.value))]})]}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?d.jsx(Do,{icon:BI,title:"No quotes found",description:"Create your first quote to get started"}):d.jsx("div",{className:"space-y-3",children:n.map(g=>d.jsxs("div",{className:"card p-5",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("h3",{className:"font-semibold",children:g.customerName}),d.jsx(Bg,{status:g.status,type:"quote"})]}),d.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400",children:g.contactInfo}),d.jsx("p",{className:"text-sm mt-2",children:g.requestedItems}),g.discount>0&&d.jsxs("p",{className:"text-xs text-wood-400 mt-1",children:["Discount: ",g.discount,"%"]}),g.notes&&d.jsx("p",{className:"text-xs text-wood-400 mt-2 italic",children:g.notes}),d.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-wood-400",children:[d.jsx("span",{children:Bd(g.createdAt)}),d.jsx("span",{className:"font-semibold text-sm text-wood-700 dark:text-parchment-200",children:Ct(g.estimatedPrice)})]})]}),d.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[g.status==="pending"&&d.jsxs(d.Fragment,{children:[d.jsx("select",{className:"input w-auto text-xs",value:g.status,onChange:I=>j(g.id,I.target.value),children:Ip.map(I=>d.jsx("option",{value:I.value,children:I.label},I.value))}),d.jsxs("button",{onClick:()=>b(g.id),className:"btn-primary btn-sm",title:"Convert to Order",children:[d.jsx(Tj,{size:14})," Convert"]})]}),d.jsx("button",{onClick:()=>E(g),className:"btn-ghost btn-sm",children:d.jsx(Fd,{size:14})}),t&&d.jsx("button",{onClick:()=>O(g.id),className:"btn-ghost btn-sm text-red-500",children:d.jsx(li,{size:14})})]})]}),g.convertedOrderId&&d.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:"Converted to order"})]},g.id))}),d.jsx(Qn,{open:f,onClose:()=>p(!1),title:"New Quote",wide:!0,children:d.jsx(S,{})}),d.jsx(Qn,{open:!!y,onClose:()=>E(null),title:"Edit Quote",wide:!0,children:y&&d.jsx(S,{initial:y})})]})}const jM={livestock:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",crops:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",finance:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",delivery:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",misc:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"};function MM(){const{isAdmin:t,currentUser:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0),[o,a]=x.useState("all"),[u,c]=x.useState(!1),[f,p]=x.useState(!1);x.useEffect(()=>{y()},[o]);async function y(){try{const C=await Xu.list({category:o});r(C)}catch{H.error("Failed to load logs")}finally{i(!1)}}async function E(C){p(!0);try{await Xu.create(C,e),H.success("Entry logged"),c(!1),y()}catch(w){H.error(w.message)}finally{p(!1)}}async function k(C){if(confirm("Delete this log entry?"))try{await Xu.delete(C,e),H.success("Entry deleted"),y()}catch(w){H.error(w.message)}}function R(){const[C,w]=x.useState({description:"",amount:"",category:"misc"});return d.jsxs("form",{onSubmit:v=>{v.preventDefault(),E(C)},className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Task Description *"}),d.jsx("textarea",{className:"input",rows:3,placeholder:"e.g. Sold 20 cattle at auction",value:C.description,onChange:v=>w(_=>({..._,description:v.target.value})),required:!0})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Money Amount ($)"}),d.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Optional",value:C.amount,onChange:v=>w(_=>({..._,amount:v.target.value}))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Category"}),d.jsx("select",{className:"input",value:C.category,onChange:v=>w(_=>({..._,category:v.target.value})),children:g0.map(v=>d.jsx("option",{value:v.value,children:v.label},v.value))})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:f,children:f?"Saving...":"Log Entry"})]})]})}return d.jsxs("div",{children:[d.jsx(Cs,{title:"Misc Log",description:"Track completed ranch tasks and activities.",actions:d.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[d.jsx(ys,{size:16})," New Entry"]})}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[d.jsx("button",{onClick:()=>a("all"),className:`btn-sm rounded-full ${o==="all"?"bg-wood-700 text-white":"btn-secondary"}`,children:"All"}),g0.map(C=>d.jsx("button",{onClick:()=>a(C.value),className:`btn-sm rounded-full ${o===C.value?"bg-wood-700 text-white":"btn-secondary"}`,children:C.label},C.value))]}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?d.jsx(Do,{icon:bg,title:"No log entries",description:"Start logging ranch activities"}):d.jsx("div",{className:"space-y-2",children:n.map(C=>d.jsxs("div",{className:"card px-5 py-4 flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx("span",{className:`badge text-xs ${jM[C.category]}`,children:C.category}),d.jsx("p",{className:"text-sm font-medium",children:C.description})]}),d.jsxs("p",{className:"text-xs text-wood-400 mt-1",children:[C.userName,"  ",Bc(C.createdAt)]})]}),d.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[C.amount!=null&&d.jsx("p",{className:"text-sm font-bold text-green-700 dark:text-green-400",children:Ct(C.amount)}),t&&d.jsx("button",{onClick:()=>k(C.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:d.jsx(li,{size:14})})]})]},C.id))}),d.jsx(Qn,{open:u,onClose:()=>c(!1),title:"New Log Entry",children:d.jsx(R,{})})]})}function VM(){const{isAdmin:t,currentUser:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0),[o,a]=x.useState(!1),[u,c]=x.useState(null),[f,p]=x.useState(!1);x.useEffect(()=>{y()},[]);async function y(){try{r(await Fs.list())}catch{H.error("Failed to load tasks")}finally{i(!1)}}async function E(_){try{const b=await Fs.toggle(_,e);r(O=>O.map(j=>j.id===_?{...j,...b}:j))}catch{H.error("Failed to update")}}async function k(_){p(!0);try{u?(await Fs.update(u.id,_),H.success("Task updated"),c(null)):(await Fs.create(_,e),H.success("Task added"),a(!1)),y()}catch(b){H.error(b.message)}finally{p(!1)}}async function R(_){if(confirm("Delete this task?"))try{await Fs.delete(_,e),H.success("Task deleted"),y()}catch(b){H.error(b.message)}}function C({initial:_}){const[b,O]=x.useState({title:"",description:"",assignedRole:"",sortOrder:0,..._});return d.jsxs("form",{onSubmit:j=>{j.preventDefault(),k(b)},className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Task Title *"}),d.jsx("input",{className:"input",value:b.title,onChange:j=>O(S=>({...S,title:j.target.value})),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Description"}),d.jsx("textarea",{className:"input",rows:2,value:b.description||"",onChange:j=>O(S=>({...S,description:j.target.value}))})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Assigned Role"}),d.jsxs("select",{className:"input",value:b.assignedRole||"",onChange:j=>O(S=>({...S,assignedRole:j.target.value||null})),children:[d.jsx("option",{value:"",children:"Anyone"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"member",children:"Member"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Sort Order"}),d.jsx("input",{type:"number",className:"input",value:b.sortOrder,onChange:j=>O(S=>({...S,sortOrder:parseInt(j.target.value)||0}))})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>{a(!1),c(null)},className:"btn-secondary",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:f,children:f?"Saving...":_?"Update Task":"Add Task"})]})]})}const w=n.filter(_=>!_.isCompleted),v=n.filter(_=>_.isCompleted);return d.jsxs("div",{children:[d.jsx(Cs,{title:"Daily Tasks",description:"Daily ranch checklist. Admins manage tasks, everyone checks them off.",actions:t&&d.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[d.jsx(ys,{size:16})," Add Task"]})}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?d.jsx(Do,{icon:il,title:"No tasks yet",description:t?"Add daily tasks for the ranch":"No tasks have been added yet"}):d.jsxs("div",{className:"space-y-6",children:[w.length>0&&d.jsxs("div",{children:[d.jsxs("h2",{className:"text-sm font-medium text-wood-500 dark:text-wood-400 mb-3",children:["To Do (",w.length,")"]}),d.jsx("div",{className:"space-y-2",children:w.map(_=>d.jsxs("div",{className:"card px-5 py-4 flex items-start gap-4",children:[d.jsx("button",{onClick:()=>E(_.id),className:"mt-0.5 shrink-0 text-wood-400 hover:text-wood-600",children:d.jsx(WI,{size:20})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium",children:_.title}),_.description&&d.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400 mt-1",children:_.description}),_.assignedRole&&d.jsx("span",{className:"badge bg-parchment-200 dark:bg-wood-800 text-wood-600 dark:text-wood-300 mt-2 text-xs capitalize",children:_.assignedRole})]}),t&&d.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[d.jsx("button",{onClick:()=>c(_),className:"p-1.5 rounded hover:bg-parchment-200 dark:hover:bg-wood-800",children:d.jsx(Fd,{size:14})}),d.jsx("button",{onClick:()=>R(_.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:d.jsx(li,{size:14})})]})]},_.id))})]}),v.length>0&&d.jsxs("div",{children:[d.jsxs("h2",{className:"text-sm font-medium text-wood-500 dark:text-wood-400 mb-3",children:["Completed (",v.length,")"]}),d.jsx("div",{className:"space-y-2",children:v.map(_=>d.jsxs("div",{className:"card px-5 py-4 flex items-start gap-4 opacity-70",children:[d.jsx("button",{onClick:()=>E(_.id),className:"mt-0.5 shrink-0 text-green-600",children:d.jsx(il,{size:20})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"font-medium line-through text-wood-400",children:_.title}),d.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-wood-400",children:[_.completedByName&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(HI,{size:12}),_.completedByName]}),_.completedAt&&d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx(kj,{size:12}),Bc(_.completedAt)]})]})]}),t&&d.jsx("button",{onClick:()=>R(_.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 shrink-0",children:d.jsx(li,{size:14})})]},_.id))})]})]}),d.jsx(Qn,{open:o,onClose:()=>a(!1),title:"Add Task",children:d.jsx(C,{})}),d.jsx(Qn,{open:!!u,onClose:()=>c(null),title:"Edit Task",children:u&&d.jsx(C,{initial:u})})]})}function UM(){const{isAdmin:t,currentUser:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0),[o,a]=x.useState(!1),[u,c]=x.useState(!1),[f,p]=x.useState(null),[y,E]=x.useState(null),k=x.useRef();x.useEffect(()=>{R()},[]);async function R(){try{r(await Gh.list())}catch{H.error("Failed to load posters")}finally{i(!1)}}async function C(_){_.preventDefault();const b=_.target.title.value,O=y;if(!O){H.error("Please select an image");return}c(!0);try{await Gh.upload(O,b,e),H.success("Poster uploaded"),a(!1),E(null),R()}catch(j){H.error(j.message)}finally{c(!1)}}async function w(_){if(confirm("Delete this poster?"))try{await Gh.delete(_,e),H.success("Poster deleted"),R()}catch(b){H.error(b.message)}}function v(_){navigator.clipboard.writeText(_.imageUrl),p(_.id),H.success("URL copied to clipboard"),setTimeout(()=>p(null),2e3)}return d.jsxs("div",{children:[d.jsx(Cs,{title:"Posters",description:"Ranch poster gallery. Right-click images to copy address for RedM.",actions:t&&d.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[d.jsx(ys,{size:16})," Upload Poster"]})}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?d.jsx(Do,{icon:$I,title:"No posters yet",description:t?"Upload ranch posters for the gallery":"No posters have been uploaded yet"}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(_=>d.jsxs("div",{className:"card overflow-hidden group",children:[d.jsxs("div",{className:"aspect-[4/3] bg-parchment-100 dark:bg-wood-800 relative",children:[d.jsx("img",{src:_.imageUrl,alt:_.title,className:"w-full h-full object-cover",loading:"lazy"}),d.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-semibold text-sm",children:_.title}),d.jsx("p",{className:"text-xs text-wood-400 mt-1",children:Bd(_.createdAt)}),d.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[d.jsxs("button",{onClick:()=>v(_),className:"btn-secondary btn-sm flex-1",children:[f===_.id?d.jsx(Sj,{size:14}):d.jsx(Cj,{size:14}),f===_.id?"Copied!":"Copy URL"]}),t&&d.jsx("button",{onClick:()=>w(_.id),className:"btn-ghost btn-sm text-red-500",children:d.jsx(li,{size:14})})]})]})]},_.id))}),d.jsx(Qn,{open:o,onClose:()=>{a(!1),E(null)},title:"Upload Poster",children:d.jsxs("form",{onSubmit:C,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Title *"}),d.jsx("input",{name:"title",className:"input",placeholder:"Poster title",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Image *"}),d.jsxs("div",{onClick:()=>{var _;return(_=k.current)==null?void 0:_.click()},className:"border-2 border-dashed border-parchment-300 dark:border-wood-700 rounded-lg p-8 text-center cursor-pointer hover:border-wood-500 transition-colors",children:[d.jsx(Fj,{size:32,className:"mx-auto text-wood-400 mb-2"}),y?d.jsx("p",{className:"text-sm text-wood-700 dark:text-parchment-200 font-medium",children:y.name}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm text-wood-500",children:"Click to select an image"}),d.jsx("p",{className:"text-xs text-wood-400 mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]}),d.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:_=>E(_.target.files[0])})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>{a(!1),E(null)},className:"btn-secondary",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Uploading...":"Upload"})]})]})})]})}function FM(){const{isAdmin:t,currentUser:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0),[o,a]=x.useState(""),[u,c]=x.useState(""),[f,p]=x.useState(!1),[y,E]=x.useState(null),[k,R]=x.useState(!1);x.useEffect(()=>{C()},[]);async function C(){try{r(await Hi.list())}catch{H.error("Failed to load prices")}finally{i(!1)}}const w=n.filter(O=>{if(u&&O.category!==u)return!1;if(o){const j=o.toLowerCase();if(!O.name.toLowerCase().includes(j))return!1}return!0});async function v(O){R(!0);try{y?(await Hi.update(y.id,O,e),H.success("Price item updated"),E(null)):(await Hi.create(O,e),H.success("Price item added"),p(!1)),C()}catch(j){H.error(j.message)}finally{R(!1)}}async function _(O){if(confirm("Delete this price item?"))try{await Hi.delete(O,e),H.success("Price item deleted"),C()}catch(j){H.error(j.message)}}function b({initial:O}){const[j,S]=x.useState({name:"",category:"",...O,price:(O==null?void 0:O.price)??""});return d.jsxs("form",{onSubmit:g=>{g.preventDefault(),v(j)},className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Item Name *"}),d.jsx("input",{className:"input",value:j.name,onChange:g=>S(I=>({...I,name:g.target.value})),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Price ($) *"}),d.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",value:j.price,onChange:g=>S(I=>({...I,price:g.target.value})),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"label",children:"Category"}),d.jsxs("select",{className:"input",value:j.category,onChange:g=>S(I=>({...I,category:g.target.value})),children:[d.jsx("option",{value:"",children:"No Category"}),y0.map(g=>d.jsx("option",{value:g.value,children:g.label},g.value))]})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>{p(!1),E(null)},className:"btn-secondary",children:"Cancel"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:k,children:k?"Saving...":O?"Update Item":"Add Item"})]})]})}return d.jsxs("div",{children:[d.jsx(Cs,{title:"Prices",description:"Price catalog for orders and quotes.",actions:t&&d.jsxs("button",{onClick:()=>p(!0),className:"btn-primary",children:[d.jsx(ys,{size:16})," Add Item"]})}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6",children:[d.jsxs("div",{className:"relative flex-1 w-full sm:max-w-xs",children:[d.jsx(zd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-wood-400"}),d.jsx("input",{className:"input pl-9",placeholder:"Search items...",value:o,onChange:O=>a(O.target.value)})]}),d.jsxs("select",{className:"input w-auto",value:u,onChange:O=>c(O.target.value),children:[d.jsx("option",{value:"",children:"All Categories"}),y0.map(O=>d.jsx("option",{value:O.value,children:O.label},O.value))]})]}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):w.length===0?d.jsx(Do,{icon:Ng,title:"No price items found",description:t?"Add items to the price catalog":"No items in the catalog yet"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-parchment-200 dark:border-wood-800",children:[d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Item"}),d.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Category"}),d.jsx("th",{className:"text-right py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Price"}),t&&d.jsx("th",{className:"text-right py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Actions"})]})}),d.jsx("tbody",{children:w.map(O=>d.jsxs("tr",{className:"border-b border-parchment-100 dark:border-wood-800/50 hover:bg-parchment-50 dark:hover:bg-wood-900/50",children:[d.jsx("td",{className:"py-3 px-4 font-medium",children:O.name}),d.jsx("td",{className:"py-3 px-4 text-wood-500 dark:text-wood-400 capitalize",children:O.category||""}),d.jsx("td",{className:"py-3 px-4 text-right font-semibold",children:Ct(O.price)}),t&&d.jsx("td",{className:"py-3 px-4 text-right",children:d.jsxs("div",{className:"flex items-center justify-end gap-1",children:[d.jsx("button",{onClick:()=>E(O),className:"btn-ghost btn-sm",children:d.jsx(Fd,{size:14})}),d.jsx("button",{onClick:()=>_(O.id),className:"btn-ghost btn-sm text-red-500",children:d.jsx(li,{size:14})})]})})]},O.id))})]})}),d.jsx(Qn,{open:f,onClose:()=>p(!1),title:"Add Price Item",children:d.jsx(b,{})}),d.jsx(Qn,{open:!!y,onClose:()=>E(null),title:"Edit Price Item",children:y&&d.jsx(b,{initial:y})})]})}function zM(){const{isAdmin:t,profile:e}=mn(),[n,r]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{o()},[]);async function o(){try{r(await KI.list())}catch{H.error("Failed to load members")}finally{i(!1)}}async function a(u,c){const f=n.find(y=>y.id===u);if(confirm(`${c==="admin"?"Promote":"Demote"} ${f.characterName} to ${c}?`))try{await oi(Be(ee,"users",u),{role:c}),H.success(`${f.characterName} is now ${c}`),o()}catch(y){H.error(y.message)}}return t?d.jsxs("div",{children:[d.jsx(Cs,{title:"Admin Panel",description:"Manage ranch members and their roles."}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):d.jsx("div",{className:"card overflow-hidden",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-parchment-200 dark:border-wood-800",children:[d.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Character Name"}),d.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Username"}),d.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Role"}),d.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Joined"}),d.jsx("th",{className:"py-3 px-5"})]})}),d.jsx("tbody",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:n.map(u=>d.jsxs("tr",{className:"hover:bg-parchment-50 dark:hover:bg-wood-900/50",children:[d.jsx("td",{className:"py-3 px-5",children:d.jsxs("div",{className:"flex items-center gap-2",children:[u.role==="admin"?d.jsx(qI,{size:16,className:"text-amber-600"}):d.jsx(zj,{size:16,className:"text-wood-400"}),d.jsx("span",{className:"font-medium",children:u.characterName||u.displayName})]})}),d.jsx("td",{className:"py-3 px-5 text-wood-500",children:u.username||""}),d.jsx("td",{className:"py-3 px-5",children:d.jsx("span",{className:`badge ${u.role==="admin"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-parchment-200 text-wood-600 dark:bg-wood-800 dark:text-wood-300"}`,children:u.role})}),d.jsx("td",{className:"py-3 px-5 text-wood-400 text-xs",children:Bd(u.createdAt)}),d.jsxs("td",{className:"py-3 px-5",children:[u.id!==e.id&&d.jsxs("select",{className:"input w-auto text-xs",value:u.role,onChange:c=>a(u.id,c.target.value),children:[d.jsx("option",{value:"member",children:"Member"}),d.jsx("option",{value:"admin",children:"Admin"})]}),u.id===e.id&&d.jsx("span",{className:"text-xs text-wood-400 italic",children:"You"})]})]},u.id))})]})})]}):d.jsx(Im,{to:"/",replace:!0})}function BM(){return d.jsxs(nR,{children:[d.jsx(Tn,{path:"/login",element:d.jsx(Wj,{})}),d.jsxs(Tn,{element:d.jsx(qj,{}),children:[d.jsx(Tn,{path:"/",element:d.jsx(Gj,{})}),d.jsx(Tn,{path:"/orders",element:d.jsx(OM,{})}),d.jsx(Tn,{path:"/prices",element:d.jsx(FM,{})}),d.jsx(Tn,{path:"/quotes",element:d.jsx(LM,{})}),d.jsx(Tn,{path:"/logs",element:d.jsx(MM,{})}),d.jsx(Tn,{path:"/todos",element:d.jsx(VM,{})}),d.jsx(Tn,{path:"/posters",element:d.jsx(UM,{})}),d.jsx(Tn,{path:"/admin",element:d.jsx(zM,{})})]})]})}Zh.createRoot(document.getElementById("root")).render(d.jsx(Ce.StrictMode,{children:d.jsx(cR,{children:d.jsx(_j,{children:d.jsxs(vj,{children:[d.jsx(BM,{}),d.jsx(rA,{position:"top-right",toastOptions:{duration:3e3,style:{borderRadius:"12px",fontSize:"14px"}}})]})})})}));
