function N1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function P1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C0={exports:{}},Qc={},R0={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol=Symbol.for("react.element"),b1=Symbol.for("react.portal"),D1=Symbol.for("react.fragment"),O1=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),j1=Symbol.for("react.forward_ref"),U1=Symbol.for("react.suspense"),F1=Symbol.for("react.memo"),z1=Symbol.for("react.lazy"),Iy=Symbol.iterator;function B1(t){return t===null||typeof t!="object"?null:(t=Iy&&t[Iy]||t["@@iterator"],typeof t=="function"?t:null)}var A0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N0=Object.assign,P0={};function wo(t,e,n){this.props=t,this.context=e,this.refs=P0,this.updater=n||A0}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b0(){}b0.prototype=wo.prototype;function Sp(t,e,n){this.props=t,this.context=e,this.refs=P0,this.updater=n||A0}var kp=Sp.prototype=new b0;kp.constructor=Sp;N0(kp,wo.prototype);kp.isPureReactComponent=!0;var Sy=Array.isArray,D0=Object.prototype.hasOwnProperty,Cp={current:null},O0={key:!0,ref:!0,__self:!0,__source:!0};function L0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)D0.call(e,r)&&!O0.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ol,type:t,key:i,ref:o,props:s,_owner:Cp.current}}function $1(t,e){return{$$typeof:ol,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ol}function q1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ky=/\/+/g;function sh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?q1(""+t.key):e.toString(36)}function Cu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ol:case b1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sh(o,0):r,Sy(s)?(n="",t!=null&&(n=t.replace(ky,"$&/")+"/"),Cu(s,e,n,"",function(c){return c})):s!=null&&(Rp(s)&&(s=$1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ky,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sy(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+sh(i,a);o+=Cu(i,e,n,u,s)}else if(u=B1(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+sh(i,a++),o+=Cu(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var r=[],s=0;return Cu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function W1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ot={current:null},Ru={transition:null},H1={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:Ru,ReactCurrentOwner:Cp};function M0(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!Rp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=wo;ee.Fragment=D1;ee.Profiler=L1;ee.PureComponent=Sp;ee.StrictMode=O1;ee.Suspense=U1;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H1;ee.act=M0;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=N0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Cp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)D0.call(e,u)&&!O0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ol,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:V1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:M1,_context:t},t.Consumer=t};ee.createElement=L0;ee.createFactory=function(t){var e=L0.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:j1,render:t}};ee.isValidElement=Rp;ee.lazy=function(t){return{$$typeof:z1,_payload:{_status:-1,_result:t},_init:W1}};ee.memo=function(t,e){return{$$typeof:F1,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ru.transition;Ru.transition={};try{t()}finally{Ru.transition=e}};ee.unstable_act=M0;ee.useCallback=function(t,e){return Ot.current.useCallback(t,e)};ee.useContext=function(t){return Ot.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Ot.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Ot.current.useEffect(t,e)};ee.useId=function(){return Ot.current.useId()};ee.useImperativeHandle=function(t,e,n){return Ot.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return Ot.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Ot.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Ot.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return Ot.current.useReducer(t,e,n)};ee.useRef=function(t){return Ot.current.useRef(t)};ee.useState=function(t){return Ot.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return Ot.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return Ot.current.useTransition()};ee.version="18.3.1";R0.exports=ee;var I=R0.exports;const Se=P1(I),K1=N1({__proto__:null,default:Se},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=I,Q1=Symbol.for("react.element"),Y1=Symbol.for("react.fragment"),X1=Object.prototype.hasOwnProperty,J1=G1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z1={key:!0,ref:!0,__self:!0,__source:!0};function V0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)X1.call(e,r)&&!Z1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Q1,type:t,key:i,ref:o,props:s,_owner:J1.current}}Qc.Fragment=Y1;Qc.jsx=V0;Qc.jsxs=V0;C0.exports=Qc;var f=C0.exports,Yh={},j0={exports:{}},Jt={},U0={exports:{}},F0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var X=B.length;B.push(K);e:for(;0<X;){var ge=X-1>>>1,ne=B[ge];if(0<s(ne,K))B[ge]=K,B[X]=ne,X=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],X=B.pop();if(X!==K){B[0]=X;e:for(var ge=0,ne=B.length,fe=ne>>>1;ge<fe;){var Vt=2*(ge+1)-1,en=B[Vt],Me=Vt+1,tn=B[Me];if(0>s(en,X))Me<ne&&0>s(tn,en)?(B[ge]=tn,B[Me]=X,ge=Me):(B[ge]=en,B[Vt]=X,ge=Vt);else if(Me<ne&&0>s(tn,X))B[ge]=tn,B[Me]=X,ge=Me;else break e}}return K}function s(B,K){var X=B.sortIndex-K.sortIndex;return X!==0?X:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,p=null,g=3,w=!1,C=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=B)r(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(c)}}function b(B){if(A=!1,v(B),!C)if(n(u)!==null)C=!0,Ir(V);else{var K=n(c);K!==null&&qe(b,K.startTime-B)}}function V(B,K){C=!1,A&&(A=!1,E(y),y=-1),w=!0;var X=g;try{for(v(K),p=n(u);p!==null&&(!(p.expirationTime>K)||B&&!P());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,g=p.priorityLevel;var ne=ge(p.expirationTime<=K);K=t.unstable_now(),typeof ne=="function"?p.callback=ne:p===n(u)&&r(u),v(K)}else r(u);p=n(u)}if(p!==null)var fe=!0;else{var Vt=n(c);Vt!==null&&qe(b,Vt.startTime-K),fe=!1}return fe}finally{p=null,g=X,w=!1}}var D=!1,x=null,y=-1,S=5,k=-1;function P(){return!(t.unstable_now()-k<S)}function O(){if(x!==null){var B=t.unstable_now();k=B;var K=!0;try{K=x(!0,B)}finally{K?N():(D=!1,x=null)}}else D=!1}var N;if(typeof _=="function")N=function(){_(O)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Nn=Le.port2;Le.port1.onmessage=O,N=function(){Nn.postMessage(null)}}else N=function(){R(O,0)};function Ir(B){x=B,D||(D=!0,N())}function qe(B,K){y=R(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,Ir(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var X=g;g=K;try{return B()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=g;g=B;try{return K()}finally{g=X}},t.unstable_scheduleCallback=function(B,K,X){var ge=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ge+X:ge):X=ge,B){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=X+ne,B={id:h++,callback:K,priorityLevel:B,startTime:X,expirationTime:ne,sortIndex:-1},X>ge?(B.sortIndex=X,e(c,B),n(u)===null&&B===n(c)&&(A?(E(y),y=-1):A=!0,qe(b,X-ge))):(B.sortIndex=ne,e(u,B),C||w||(C=!0,Ir(V))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var K=g;return function(){var X=g;g=K;try{return B.apply(this,arguments)}finally{g=X}}}})(F0);U0.exports=F0;var eS=U0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS=I,Xt=eS;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z0=new Set,Ca={};function ri(t,e){eo(t,e),eo(t+"Capture",e)}function eo(t,e){for(Ca[t]=e,t=0;t<e.length;t++)z0.add(e[t])}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=Object.prototype.hasOwnProperty,nS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},Ry={};function rS(t){return Xh.call(Ry,t)?!0:Xh.call(Cy,t)?!1:nS.test(t)?Ry[t]=!0:(Cy[t]=!0,!1)}function sS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iS(t,e,n,r){if(e===null||typeof e>"u"||sS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ap=/[\-:]([a-z])/g;function Np(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ap,Np);dt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ap,Np);dt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ap,Np);dt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pp(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iS(e,n,s,r)&&(n=null),r||s===null?rS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wr=tS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),Ai=Symbol.for("react.portal"),Ni=Symbol.for("react.fragment"),bp=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),$0=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),Op=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),q0=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=Ay&&t[Ay]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,ih;function Zo(t){if(ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ih=e&&e[1]||""}return`
`+ih+t}var oh=!1;function ah(t,e){if(!t||oh)return"";oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{oh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zo(t):""}function oS(t){switch(t.tag){case 5:return Zo(t.type);case 16:return Zo("Lazy");case 13:return Zo("Suspense");case 19:return Zo("SuspenseList");case 0:case 2:case 15:return t=ah(t.type,!1),t;case 11:return t=ah(t.type.render,!1),t;case 1:return t=ah(t.type,!0),t;default:return""}}function tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ni:return"Fragment";case Ai:return"Portal";case Jh:return"Profiler";case bp:return"StrictMode";case Zh:return"Suspense";case ef:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $0:return(t.displayName||"Context")+".Consumer";case B0:return(t._context.displayName||"Context")+".Provider";case Dp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Op:return e=t.displayName||null,e!==null?e:tf(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return tf(t(e))}catch{}}return null}function aS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(e);case 8:return e===bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function as(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lS(t){var e=W0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=lS(t))}function H0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nf(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=as(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function K0(t,e){e=e.checked,e!=null&&Pp(t,"checked",e,!1)}function rf(t,e){K0(t,e);var n=as(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&sf(t,e.type,as(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Py(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sf(t,e,n){(e!=="number"||Ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ea=Array.isArray;function $i(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+as(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function of(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function by(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ea(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:as(n)}}function G0(t,e){var n=as(e.value),r=as(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Q0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function af(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Q0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var su,Y0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(su=su||document.createElement("div"),su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uS=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(t){uS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ua[e]=ua[t]})});function X0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ua.hasOwnProperty(t)&&ua[t]?(""+e).trim():e+"px"}function J0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=X0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cS=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(t,e){if(e){if(cS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function uf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=null;function Lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var df=null,qi=null,Wi=null;function Oy(t){if(t=ul(t)){if(typeof df!="function")throw Error(F(280));var e=t.stateNode;e&&(e=ed(e),df(t.stateNode,t.type,e))}}function Z0(t){qi?Wi?Wi.push(t):Wi=[t]:qi=t}function ew(){if(qi){var t=qi,e=Wi;if(Wi=qi=null,Oy(t),e)for(t=0;t<e.length;t++)Oy(e[t])}}function tw(t,e){return t(e)}function nw(){}var lh=!1;function rw(t,e,n){if(lh)return t(e,n);lh=!0;try{return tw(t,e,n)}finally{lh=!1,(qi!==null||Wi!==null)&&(nw(),ew())}}function Aa(t,e){var n=t.stateNode;if(n===null)return null;var r=ed(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var hf=!1;if(cr)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){hf=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{hf=!1}function dS(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ca=!1,Zu=null,ec=!1,ff=null,hS={onError:function(t){ca=!0,Zu=t}};function fS(t,e,n,r,s,i,o,a,u){ca=!1,Zu=null,dS.apply(hS,arguments)}function pS(t,e,n,r,s,i,o,a,u){if(fS.apply(this,arguments),ca){if(ca){var c=Zu;ca=!1,Zu=null}else throw Error(F(198));ec||(ec=!0,ff=c)}}function si(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ly(t){if(si(t)!==t)throw Error(F(188))}function mS(t){var e=t.alternate;if(!e){if(e=si(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ly(s),t;if(i===r)return Ly(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function iw(t){return t=mS(t),t!==null?ow(t):null}function ow(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ow(t);if(e!==null)return e;t=t.sibling}return null}var aw=Xt.unstable_scheduleCallback,My=Xt.unstable_cancelCallback,gS=Xt.unstable_shouldYield,yS=Xt.unstable_requestPaint,Ue=Xt.unstable_now,vS=Xt.unstable_getCurrentPriorityLevel,Mp=Xt.unstable_ImmediatePriority,lw=Xt.unstable_UserBlockingPriority,tc=Xt.unstable_NormalPriority,_S=Xt.unstable_LowPriority,uw=Xt.unstable_IdlePriority,Yc=null,Un=null;function wS(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Yc,t,void 0,(t.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:xS,ES=Math.log,TS=Math.LN2;function xS(t){return t>>>=0,t===0?32:31-(ES(t)/TS|0)|0}var iu=64,ou=4194304;function ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ta(a):(i&=o,i!==0&&(r=ta(i)))}else o=n&~s,o!==0?r=ta(o):i!==0&&(r=ta(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tn(e),s=1<<n,r|=t[n],e&=~s;return r}function IS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Tn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=IS(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function pf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cw(){var t=iu;return iu<<=1,!(iu&4194240)&&(iu=64),t}function uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tn(e),t[e]=n}function kS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function dw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hw,jp,fw,pw,mw,mf=!1,au=[],Qr=null,Yr=null,Xr=null,Na=new Map,Pa=new Map,Vr=[],CS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(e.pointerId)}}function Wo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ul(e),e!==null&&jp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RS(t,e,n,r,s){switch(e){case"focusin":return Qr=Wo(Qr,t,e,n,r,s),!0;case"dragenter":return Yr=Wo(Yr,t,e,n,r,s),!0;case"mouseover":return Xr=Wo(Xr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Na.set(i,Wo(Na.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pa.set(i,Wo(Pa.get(i)||null,t,e,n,r,s)),!0}return!1}function gw(t){var e=Ms(t.target);if(e!==null){var n=si(e);if(n!==null){if(e=n.tag,e===13){if(e=sw(n),e!==null){t.blockedOn=e,mw(t.priority,function(){fw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cf=r,n.target.dispatchEvent(r),cf=null}else return e=ul(n),e!==null&&jp(e),t.blockedOn=n,!1;e.shift()}return!0}function jy(t,e,n){Au(t)&&n.delete(e)}function AS(){mf=!1,Qr!==null&&Au(Qr)&&(Qr=null),Yr!==null&&Au(Yr)&&(Yr=null),Xr!==null&&Au(Xr)&&(Xr=null),Na.forEach(jy),Pa.forEach(jy)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,mf||(mf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,AS)))}function ba(t){function e(s){return Ho(s,t)}if(0<au.length){Ho(au[0],t);for(var n=1;n<au.length;n++){var r=au[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qr!==null&&Ho(Qr,t),Yr!==null&&Ho(Yr,t),Xr!==null&&Ho(Xr,t),Na.forEach(e),Pa.forEach(e),n=0;n<Vr.length;n++)r=Vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vr.length&&(n=Vr[0],n.blockedOn===null);)gw(n),n.blockedOn===null&&Vr.shift()}var Hi=wr.ReactCurrentBatchConfig,rc=!0;function NS(t,e,n,r){var s=de,i=Hi.transition;Hi.transition=null;try{de=1,Up(t,e,n,r)}finally{de=s,Hi.transition=i}}function PS(t,e,n,r){var s=de,i=Hi.transition;Hi.transition=null;try{de=4,Up(t,e,n,r)}finally{de=s,Hi.transition=i}}function Up(t,e,n,r){if(rc){var s=gf(t,e,n,r);if(s===null)_h(t,e,r,sc,n),Vy(t,r);else if(RS(s,t,e,n,r))r.stopPropagation();else if(Vy(t,r),e&4&&-1<CS.indexOf(t)){for(;s!==null;){var i=ul(s);if(i!==null&&hw(i),i=gf(t,e,n,r),i===null&&_h(t,e,r,sc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _h(t,e,r,null,n)}}var sc=null;function gf(t,e,n,r){if(sc=null,t=Lp(r),t=Ms(t),t!==null)if(e=si(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sc=t,null}function yw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vS()){case Mp:return 1;case lw:return 4;case tc:case _S:return 16;case uw:return 536870912;default:return 16}default:return 16}}var Wr=null,Fp=null,Nu=null;function vw(){if(Nu)return Nu;var t,e=Fp,n=e.length,r,s="value"in Wr?Wr.value:Wr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Nu=s.slice(t,1<r?1-r:void 0)}function Pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function Uy(){return!1}function Zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lu:Uy,this.isPropagationStopped=Uy,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zp=Zt(Eo),ll=Re({},Eo,{view:0,detail:0}),bS=Zt(ll),ch,dh,Ko,Xc=Re({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ko&&(Ko&&t.type==="mousemove"?(ch=t.screenX-Ko.screenX,dh=t.screenY-Ko.screenY):dh=ch=0,Ko=t),ch)},movementY:function(t){return"movementY"in t?t.movementY:dh}}),Fy=Zt(Xc),DS=Re({},Xc,{dataTransfer:0}),OS=Zt(DS),LS=Re({},ll,{relatedTarget:0}),hh=Zt(LS),MS=Re({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),VS=Zt(MS),jS=Re({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),US=Zt(jS),FS=Re({},Eo,{data:0}),zy=Zt(FS),zS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$S[t])?!!e[t]:!1}function Bp(){return qS}var WS=Re({},ll,{key:function(t){if(t.key){var e=zS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(t){return t.type==="keypress"?Pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=Zt(WS),KS=Re({},Xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),By=Zt(KS),GS=Re({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),QS=Zt(GS),YS=Re({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),XS=Zt(YS),JS=Re({},Xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZS=Zt(JS),ek=[9,13,27,32],$p=cr&&"CompositionEvent"in window,da=null;cr&&"documentMode"in document&&(da=document.documentMode);var tk=cr&&"TextEvent"in window&&!da,_w=cr&&(!$p||da&&8<da&&11>=da),$y=" ",qy=!1;function ww(t,e){switch(t){case"keyup":return ek.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ew(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pi=!1;function nk(t,e){switch(t){case"compositionend":return Ew(e);case"keypress":return e.which!==32?null:(qy=!0,$y);case"textInput":return t=e.data,t===$y&&qy?null:t;default:return null}}function rk(t,e){if(Pi)return t==="compositionend"||!$p&&ww(t,e)?(t=vw(),Nu=Fp=Wr=null,Pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _w&&e.locale!=="ko"?null:e.data;default:return null}}var sk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sk[t.type]:e==="textarea"}function Tw(t,e,n,r){Z0(r),e=ic(e,"onChange"),0<e.length&&(n=new zp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ha=null,Da=null;function ik(t){Dw(t,0)}function Jc(t){var e=Oi(t);if(H0(e))return t}function ok(t,e){if(t==="change")return e}var xw=!1;if(cr){var fh;if(cr){var ph="oninput"in document;if(!ph){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),ph=typeof Hy.oninput=="function"}fh=ph}else fh=!1;xw=fh&&(!document.documentMode||9<document.documentMode)}function Ky(){ha&&(ha.detachEvent("onpropertychange",Iw),Da=ha=null)}function Iw(t){if(t.propertyName==="value"&&Jc(Da)){var e=[];Tw(e,Da,t,Lp(t)),rw(ik,e)}}function ak(t,e,n){t==="focusin"?(Ky(),ha=e,Da=n,ha.attachEvent("onpropertychange",Iw)):t==="focusout"&&Ky()}function lk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jc(Da)}function uk(t,e){if(t==="click")return Jc(e)}function ck(t,e){if(t==="input"||t==="change")return Jc(e)}function dk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var In=typeof Object.is=="function"?Object.is:dk;function Oa(t,e){if(In(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Xh.call(e,s)||!In(t[s],e[s]))return!1}return!0}function Gy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qy(t,e){var n=Gy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gy(n)}}function Sw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Sw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kw(){for(var t=window,e=Ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ju(t.document)}return e}function qp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hk(t){var e=kw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Sw(n.ownerDocument.documentElement,n)){if(r!==null&&qp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Qy(n,i);var o=Qy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fk=cr&&"documentMode"in document&&11>=document.documentMode,bi=null,yf=null,fa=null,vf=!1;function Yy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vf||bi==null||bi!==Ju(r)||(r=bi,"selectionStart"in r&&qp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Oa(fa,r)||(fa=r,r=ic(yf,"onSelect"),0<r.length&&(e=new zp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bi)))}function uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Di={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},mh={},Cw={};cr&&(Cw=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function Zc(t){if(mh[t])return mh[t];if(!Di[t])return t;var e=Di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cw)return mh[t]=e[n];return t}var Rw=Zc("animationend"),Aw=Zc("animationiteration"),Nw=Zc("animationstart"),Pw=Zc("transitionend"),bw=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(t,e){bw.set(t,e),ri(e,[t])}for(var gh=0;gh<Xy.length;gh++){var yh=Xy[gh],pk=yh.toLowerCase(),mk=yh[0].toUpperCase()+yh.slice(1);gs(pk,"on"+mk)}gs(Rw,"onAnimationEnd");gs(Aw,"onAnimationIteration");gs(Nw,"onAnimationStart");gs("dblclick","onDoubleClick");gs("focusin","onFocus");gs("focusout","onBlur");gs(Pw,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function Jy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pS(r,e,void 0,t),t.currentTarget=null}function Dw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;Jy(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;Jy(s,a,c),i=u}}}if(ec)throw t=ff,ec=!1,ff=null,t}function _e(t,e){var n=e[xf];n===void 0&&(n=e[xf]=new Set);var r=t+"__bubble";n.has(r)||(Ow(e,t,2,!1),n.add(r))}function vh(t,e,n){var r=0;e&&(r|=4),Ow(n,t,r,e)}var cu="_reactListening"+Math.random().toString(36).slice(2);function La(t){if(!t[cu]){t[cu]=!0,z0.forEach(function(n){n!=="selectionchange"&&(gk.has(n)||vh(n,!1,t),vh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cu]||(e[cu]=!0,vh("selectionchange",!1,e))}}function Ow(t,e,n,r){switch(yw(e)){case 1:var s=NS;break;case 4:s=PS;break;default:s=Up}n=s.bind(null,e,n,t),s=void 0,!hf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _h(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}rw(function(){var c=i,h=Lp(n),p=[];e:{var g=bw.get(t);if(g!==void 0){var w=zp,C=t;switch(t){case"keypress":if(Pu(n)===0)break e;case"keydown":case"keyup":w=HS;break;case"focusin":C="focus",w=hh;break;case"focusout":C="blur",w=hh;break;case"beforeblur":case"afterblur":w=hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Fy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=OS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=QS;break;case Rw:case Aw:case Nw:w=VS;break;case Pw:w=XS;break;case"scroll":w=bS;break;case"wheel":w=ZS;break;case"copy":case"cut":case"paste":w=US;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=By}var A=(e&4)!==0,R=!A&&t==="scroll",E=A?g!==null?g+"Capture":null:g;A=[];for(var _=c,v;_!==null;){v=_;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,E!==null&&(b=Aa(_,E),b!=null&&A.push(Ma(_,b,v)))),R)break;_=_.return}0<A.length&&(g=new w(g,C,null,n,h),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==cf&&(C=n.relatedTarget||n.fromElement)&&(Ms(C)||C[dr]))break e;if((w||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,w?(C=n.relatedTarget||n.toElement,w=c,C=C?Ms(C):null,C!==null&&(R=si(C),C!==R||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=c),w!==C)){if(A=Fy,b="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(A=By,b="onPointerLeave",E="onPointerEnter",_="pointer"),R=w==null?g:Oi(w),v=C==null?g:Oi(C),g=new A(b,_+"leave",w,n,h),g.target=R,g.relatedTarget=v,b=null,Ms(h)===c&&(A=new A(E,_+"enter",C,n,h),A.target=v,A.relatedTarget=R,b=A),R=b,w&&C)t:{for(A=w,E=C,_=0,v=A;v;v=xi(v))_++;for(v=0,b=E;b;b=xi(b))v++;for(;0<_-v;)A=xi(A),_--;for(;0<v-_;)E=xi(E),v--;for(;_--;){if(A===E||E!==null&&A===E.alternate)break t;A=xi(A),E=xi(E)}A=null}else A=null;w!==null&&Zy(p,g,w,A,!1),C!==null&&R!==null&&Zy(p,R,C,A,!0)}}e:{if(g=c?Oi(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var V=ok;else if(Wy(g))if(xw)V=ck;else{V=lk;var D=ak}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=uk);if(V&&(V=V(t,c))){Tw(p,V,n,h);break e}D&&D(t,g,c),t==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&sf(g,"number",g.value)}switch(D=c?Oi(c):window,t){case"focusin":(Wy(D)||D.contentEditable==="true")&&(bi=D,yf=c,fa=null);break;case"focusout":fa=yf=bi=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,Yy(p,n,h);break;case"selectionchange":if(fk)break;case"keydown":case"keyup":Yy(p,n,h)}var x;if($p)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Pi?ww(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(_w&&n.locale!=="ko"&&(Pi||y!=="onCompositionStart"?y==="onCompositionEnd"&&Pi&&(x=vw()):(Wr=h,Fp="value"in Wr?Wr.value:Wr.textContent,Pi=!0)),D=ic(c,y),0<D.length&&(y=new zy(y,t,null,n,h),p.push({event:y,listeners:D}),x?y.data=x:(x=Ew(n),x!==null&&(y.data=x)))),(x=tk?nk(t,n):rk(t,n))&&(c=ic(c,"onBeforeInput"),0<c.length&&(h=new zy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=x))}Dw(p,e)})}function Ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Aa(t,n),i!=null&&r.unshift(Ma(t,i,s)),i=Aa(t,e),i!=null&&r.push(Ma(t,i,s))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=Aa(n,i),u!=null&&o.unshift(Ma(n,u,a))):s||(u=Aa(n,i),u!=null&&o.push(Ma(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yk=/\r\n?/g,vk=/\u0000|\uFFFD/g;function ev(t){return(typeof t=="string"?t:""+t).replace(yk,`
`).replace(vk,"")}function du(t,e,n){if(e=ev(e),ev(t)!==e&&n)throw Error(F(425))}function oc(){}var _f=null,wf=null;function Ef(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,_k=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(Ek)}:Tf;function Ek(t){setTimeout(function(){throw t})}function wh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ba(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ba(e)}function Jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var To=Math.random().toString(36).slice(2),Ln="__reactFiber$"+To,Va="__reactProps$"+To,dr="__reactContainer$"+To,xf="__reactEvents$"+To,Tk="__reactListeners$"+To,xk="__reactHandles$"+To;function Ms(t){var e=t[Ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dr]||n[Ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nv(t);t!==null;){if(n=t[Ln])return n;t=nv(t)}return e}t=n,n=t.parentNode}return null}function ul(t){return t=t[Ln]||t[dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function ed(t){return t[Va]||null}var If=[],Li=-1;function ys(t){return{current:t}}function Ee(t){0>Li||(t.current=If[Li],If[Li]=null,Li--)}function ye(t,e){Li++,If[Li]=t.current,t.current=e}var ls={},St=ys(ls),zt=ys(!1),qs=ls;function to(t,e){var n=t.type.contextTypes;if(!n)return ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(t){return t=t.childContextTypes,t!=null}function ac(){Ee(zt),Ee(St)}function rv(t,e,n){if(St.current!==ls)throw Error(F(168));ye(St,e),ye(zt,n)}function Lw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,aS(t)||"Unknown",s));return Re({},n,r)}function lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ls,qs=St.current,ye(St,t),ye(zt,zt.current),!0}function sv(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Lw(t,e,qs),r.__reactInternalMemoizedMergedChildContext=t,Ee(zt),Ee(St),ye(St,t)):Ee(zt),ye(zt,n)}var er=null,td=!1,Eh=!1;function Mw(t){er===null?er=[t]:er.push(t)}function Ik(t){td=!0,Mw(t)}function vs(){if(!Eh&&er!==null){Eh=!0;var t=0,e=de;try{var n=er;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}er=null,td=!1}catch(s){throw er!==null&&(er=er.slice(t+1)),aw(Mp,vs),s}finally{de=e,Eh=!1}}return null}var Mi=[],Vi=0,uc=null,cc=0,sn=[],on=0,Ws=null,tr=1,nr="";function bs(t,e){Mi[Vi++]=cc,Mi[Vi++]=uc,uc=t,cc=e}function Vw(t,e,n){sn[on++]=tr,sn[on++]=nr,sn[on++]=Ws,Ws=t;var r=tr;t=nr;var s=32-Tn(r)-1;r&=~(1<<s),n+=1;var i=32-Tn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,tr=1<<32-Tn(e)+s|n<<s|r,nr=i+t}else tr=1<<i|n<<s|r,nr=t}function Wp(t){t.return!==null&&(bs(t,1),Vw(t,1,0))}function Hp(t){for(;t===uc;)uc=Mi[--Vi],Mi[Vi]=null,cc=Mi[--Vi],Mi[Vi]=null;for(;t===Ws;)Ws=sn[--on],sn[on]=null,nr=sn[--on],sn[on]=null,tr=sn[--on],sn[on]=null}var Qt=null,Ht=null,Te=!1,En=null;function jw(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function iv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Ht=Jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ws!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Ht=null,!0):!1;default:return!1}}function Sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kf(t){if(Te){var e=Ht;if(e){var n=e;if(!iv(t,e)){if(Sf(t))throw Error(F(418));e=Jr(n.nextSibling);var r=Qt;e&&iv(t,e)?jw(r,n):(t.flags=t.flags&-4097|2,Te=!1,Qt=t)}}else{if(Sf(t))throw Error(F(418));t.flags=t.flags&-4097|2,Te=!1,Qt=t}}}function ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function hu(t){if(t!==Qt)return!1;if(!Te)return ov(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ef(t.type,t.memoizedProps)),e&&(e=Ht)){if(Sf(t))throw Uw(),Error(F(418));for(;e;)jw(t,e),e=Jr(e.nextSibling)}if(ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Qt?Jr(t.stateNode.nextSibling):null;return!0}function Uw(){for(var t=Ht;t;)t=Jr(t.nextSibling)}function no(){Ht=Qt=null,Te=!1}function Kp(t){En===null?En=[t]:En.push(t)}var Sk=wr.ReactCurrentBatchConfig;function Go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function av(t){var e=t._init;return e(t._payload)}function Fw(t){function e(E,_){if(t){var v=E.deletions;v===null?(E.deletions=[_],E.flags|=16):v.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=ns(E,_),E.index=0,E.sibling=null,E}function i(E,_,v){return E.index=v,t?(v=E.alternate,v!==null?(v=v.index,v<_?(E.flags|=2,_):v):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,_,v,b){return _===null||_.tag!==6?(_=Rh(v,E.mode,b),_.return=E,_):(_=s(_,v),_.return=E,_)}function u(E,_,v,b){var V=v.type;return V===Ni?h(E,_,v.props.children,b,v.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Or&&av(V)===_.type)?(b=s(_,v.props),b.ref=Go(E,_,v),b.return=E,b):(b=ju(v.type,v.key,v.props,null,E.mode,b),b.ref=Go(E,_,v),b.return=E,b)}function c(E,_,v,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=Ah(v,E.mode,b),_.return=E,_):(_=s(_,v.children||[]),_.return=E,_)}function h(E,_,v,b,V){return _===null||_.tag!==7?(_=zs(v,E.mode,b,V),_.return=E,_):(_=s(_,v),_.return=E,_)}function p(E,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Rh(""+_,E.mode,v),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nu:return v=ju(_.type,_.key,_.props,null,E.mode,v),v.ref=Go(E,null,_),v.return=E,v;case Ai:return _=Ah(_,E.mode,v),_.return=E,_;case Or:var b=_._init;return p(E,b(_._payload),v)}if(ea(_)||$o(_))return _=zs(_,E.mode,v,null),_.return=E,_;fu(E,_)}return null}function g(E,_,v,b){var V=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return V!==null?null:a(E,_,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nu:return v.key===V?u(E,_,v,b):null;case Ai:return v.key===V?c(E,_,v,b):null;case Or:return V=v._init,g(E,_,V(v._payload),b)}if(ea(v)||$o(v))return V!==null?null:h(E,_,v,b,null);fu(E,v)}return null}function w(E,_,v,b,V){if(typeof b=="string"&&b!==""||typeof b=="number")return E=E.get(v)||null,a(_,E,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nu:return E=E.get(b.key===null?v:b.key)||null,u(_,E,b,V);case Ai:return E=E.get(b.key===null?v:b.key)||null,c(_,E,b,V);case Or:var D=b._init;return w(E,_,v,D(b._payload),V)}if(ea(b)||$o(b))return E=E.get(v)||null,h(_,E,b,V,null);fu(_,b)}return null}function C(E,_,v,b){for(var V=null,D=null,x=_,y=_=0,S=null;x!==null&&y<v.length;y++){x.index>y?(S=x,x=null):S=x.sibling;var k=g(E,x,v[y],b);if(k===null){x===null&&(x=S);break}t&&x&&k.alternate===null&&e(E,x),_=i(k,_,y),D===null?V=k:D.sibling=k,D=k,x=S}if(y===v.length)return n(E,x),Te&&bs(E,y),V;if(x===null){for(;y<v.length;y++)x=p(E,v[y],b),x!==null&&(_=i(x,_,y),D===null?V=x:D.sibling=x,D=x);return Te&&bs(E,y),V}for(x=r(E,x);y<v.length;y++)S=w(x,E,y,v[y],b),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?y:S.key),_=i(S,_,y),D===null?V=S:D.sibling=S,D=S);return t&&x.forEach(function(P){return e(E,P)}),Te&&bs(E,y),V}function A(E,_,v,b){var V=$o(v);if(typeof V!="function")throw Error(F(150));if(v=V.call(v),v==null)throw Error(F(151));for(var D=V=null,x=_,y=_=0,S=null,k=v.next();x!==null&&!k.done;y++,k=v.next()){x.index>y?(S=x,x=null):S=x.sibling;var P=g(E,x,k.value,b);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(E,x),_=i(P,_,y),D===null?V=P:D.sibling=P,D=P,x=S}if(k.done)return n(E,x),Te&&bs(E,y),V;if(x===null){for(;!k.done;y++,k=v.next())k=p(E,k.value,b),k!==null&&(_=i(k,_,y),D===null?V=k:D.sibling=k,D=k);return Te&&bs(E,y),V}for(x=r(E,x);!k.done;y++,k=v.next())k=w(x,E,y,k.value,b),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?y:k.key),_=i(k,_,y),D===null?V=k:D.sibling=k,D=k);return t&&x.forEach(function(O){return e(E,O)}),Te&&bs(E,y),V}function R(E,_,v,b){if(typeof v=="object"&&v!==null&&v.type===Ni&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case nu:e:{for(var V=v.key,D=_;D!==null;){if(D.key===V){if(V=v.type,V===Ni){if(D.tag===7){n(E,D.sibling),_=s(D,v.props.children),_.return=E,E=_;break e}}else if(D.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Or&&av(V)===D.type){n(E,D.sibling),_=s(D,v.props),_.ref=Go(E,D,v),_.return=E,E=_;break e}n(E,D);break}else e(E,D);D=D.sibling}v.type===Ni?(_=zs(v.props.children,E.mode,b,v.key),_.return=E,E=_):(b=ju(v.type,v.key,v.props,null,E.mode,b),b.ref=Go(E,_,v),b.return=E,E=b)}return o(E);case Ai:e:{for(D=v.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(E,_.sibling),_=s(_,v.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Ah(v,E.mode,b),_.return=E,E=_}return o(E);case Or:return D=v._init,R(E,_,D(v._payload),b)}if(ea(v))return C(E,_,v,b);if($o(v))return A(E,_,v,b);fu(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,v),_.return=E,E=_):(n(E,_),_=Rh(v,E.mode,b),_.return=E,E=_),o(E)):n(E,_)}return R}var ro=Fw(!0),zw=Fw(!1),dc=ys(null),hc=null,ji=null,Gp=null;function Qp(){Gp=ji=hc=null}function Yp(t){var e=dc.current;Ee(dc),t._currentValue=e}function Cf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){hc=t,Gp=ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(Gp!==t)if(t={context:t,memoizedValue:e,next:null},ji===null){if(hc===null)throw Error(F(308));ji=t,hc.dependencies={lanes:0,firstContext:t}}else ji=ji.next=t;return e}var Vs=null;function Xp(t){Vs===null?Vs=[t]:Vs.push(t)}function Bw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xp(e)):(n.next=s.next,s.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function Jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $w(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hr(t,n)}return s=r.interleaved,s===null?(e.next=e,Xp(r)):(e.next=s.next,s.next=e),r.interleaved=e,hr(t,n)}function bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vp(t,n)}}function lv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fc(t,e,n,r){var s=t.updateQueue;Lr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,h=c=u=null,a=i;do{var g=a.lane,w=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,A=a;switch(g=e,w=n,A.tag){case 1:if(C=A.payload,typeof C=="function"){p=C.call(w,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=A.payload,g=typeof C=="function"?C.call(w,p,g):C,g==null)break e;p=Re({},p,g);break e;case 2:Lr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=w,u=p):h=h.next=w,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;g=a,a=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=p}}function uv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var cl={},Fn=ys(cl),ja=ys(cl),Ua=ys(cl);function js(t){if(t===cl)throw Error(F(174));return t}function Zp(t,e){switch(ye(Ua,e),ye(ja,t),ye(Fn,cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:af(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=af(e,t)}Ee(Fn),ye(Fn,e)}function so(){Ee(Fn),Ee(ja),Ee(Ua)}function qw(t){js(Ua.current);var e=js(Fn.current),n=af(e,t.type);e!==n&&(ye(ja,t),ye(Fn,n))}function em(t){ja.current===t&&(Ee(Fn),Ee(ja))}var Ie=ys(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Th=[];function tm(){for(var t=0;t<Th.length;t++)Th[t]._workInProgressVersionPrimary=null;Th.length=0}var Du=wr.ReactCurrentDispatcher,xh=wr.ReactCurrentBatchConfig,Hs=0,ke=null,We=null,Ze=null,mc=!1,pa=!1,Fa=0,kk=0;function _t(){throw Error(F(321))}function nm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!In(t[n],e[n]))return!1;return!0}function rm(t,e,n,r,s,i){if(Hs=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Du.current=t===null||t.memoizedState===null?Nk:Pk,t=n(r,s),pa){i=0;do{if(pa=!1,Fa=0,25<=i)throw Error(F(301));i+=1,Ze=We=null,e.updateQueue=null,Du.current=bk,t=n(r,s)}while(pa)}if(Du.current=gc,e=We!==null&&We.next!==null,Hs=0,Ze=We=ke=null,mc=!1,e)throw Error(F(300));return t}function sm(){var t=Fa!==0;return Fa=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ke.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function dn(){if(We===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ze===null?ke.memoizedState:Ze.next;if(e!==null)Ze=e,We=t;else{if(t===null)throw Error(F(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ze===null?ke.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function za(t,e){return typeof e=="function"?e(t):e}function Ih(t){var e=dn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((Hs&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,ke.lanes|=h,Ks|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,In(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Ks|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sh(t){var e=dn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);In(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ww(){}function Hw(t,e){var n=ke,r=dn(),s=e(),i=!In(r.memoizedState,s);if(i&&(r.memoizedState=s,Ft=!0),r=r.queue,im(Qw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Ba(9,Gw.bind(null,n,r,s,e),void 0,null),nt===null)throw Error(F(349));Hs&30||Kw(n,e,s)}return s}function Kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gw(t,e,n,r){e.value=n,e.getSnapshot=r,Yw(e)&&Xw(t)}function Qw(t,e,n){return n(function(){Yw(e)&&Xw(t)})}function Yw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!In(t,n)}catch{return!0}}function Xw(t){var e=hr(t,1);e!==null&&xn(e,t,1,-1)}function cv(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:t},e.queue=t,t=t.dispatch=Ak.bind(null,ke,t),[e.memoizedState,t]}function Ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jw(){return dn().memoizedState}function Ou(t,e,n,r){var s=On();ke.flags|=t,s.memoizedState=Ba(1|e,n,void 0,r===void 0?null:r)}function nd(t,e,n,r){var s=dn();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&nm(r,o.deps)){s.memoizedState=Ba(e,n,i,r);return}}ke.flags|=t,s.memoizedState=Ba(1|e,n,i,r)}function dv(t,e){return Ou(8390656,8,t,e)}function im(t,e){return nd(2048,8,t,e)}function Zw(t,e){return nd(4,2,t,e)}function eE(t,e){return nd(4,4,t,e)}function tE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nE(t,e,n){return n=n!=null?n.concat([t]):null,nd(4,4,tE.bind(null,e,t),n)}function om(){}function rE(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sE(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function iE(t,e,n){return Hs&21?(In(n,e)||(n=cw(),ke.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function Ck(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=xh.transition;xh.transition={};try{t(!1),e()}finally{de=n,xh.transition=r}}function oE(){return dn().memoizedState}function Rk(t,e,n){var r=ts(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aE(t))lE(e,n);else if(n=Bw(t,e,n,r),n!==null){var s=Pt();xn(n,t,r,s),uE(n,e,r)}}function Ak(t,e,n){var r=ts(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aE(t))lE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,In(a,o)){var u=e.interleaved;u===null?(s.next=s,Xp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Bw(t,e,s,r),n!==null&&(s=Pt(),xn(n,t,r,s),uE(n,e,r))}}function aE(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function lE(t,e){pa=mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vp(t,n)}}var gc={readContext:cn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},Nk={readContext:cn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:dv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ou(4194308,4,tE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ou(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rk.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:cv,useDebugValue:om,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=cv(!1),e=t[0];return t=Ck.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=On();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),nt===null)throw Error(F(349));Hs&30||Kw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,dv(Qw.bind(null,r,i,t),[t]),r.flags|=2048,Ba(9,Gw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=On(),e=nt.identifierPrefix;if(Te){var n=nr,r=tr;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pk={readContext:cn,useCallback:rE,useContext:cn,useEffect:im,useImperativeHandle:nE,useInsertionEffect:Zw,useLayoutEffect:eE,useMemo:sE,useReducer:Ih,useRef:Jw,useState:function(){return Ih(za)},useDebugValue:om,useDeferredValue:function(t){var e=dn();return iE(e,We.memoizedState,t)},useTransition:function(){var t=Ih(za)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:oE,unstable_isNewReconciler:!1},bk={readContext:cn,useCallback:rE,useContext:cn,useEffect:im,useImperativeHandle:nE,useInsertionEffect:Zw,useLayoutEffect:eE,useMemo:sE,useReducer:Sh,useRef:Jw,useState:function(){return Sh(za)},useDebugValue:om,useDeferredValue:function(t){var e=dn();return We===null?e.memoizedState=t:iE(e,We.memoizedState,t)},useTransition:function(){var t=Sh(za)[0],e=dn().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:oE,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rd={isMounted:function(t){return(t=t._reactInternals)?si(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=ts(t),i=ar(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zr(t,i,s),e!==null&&(xn(e,t,s,r),bu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),s=ts(t),i=ar(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zr(t,i,s),e!==null&&(xn(e,t,s,r),bu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=ts(t),s=ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zr(t,s,r),e!==null&&(xn(e,t,r,n),bu(e,t,r))}};function hv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oa(n,r)||!Oa(s,i):!0}function cE(t,e,n){var r=!1,s=ls,i=e.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Bt(e)?qs:St.current,r=e.contextTypes,i=(r=r!=null)?to(t,s):ls),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function fv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rd.enqueueReplaceState(e,e.state,null)}function Af(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Bt(e)?qs:St.current,s.context=to(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rd.enqueueReplaceState(s,s.state,null),fc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function io(t,e){try{var n="",r=e;do n+=oS(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Dk=typeof WeakMap=="function"?WeakMap:Map;function dE(t,e,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vc||(vc=!0,Ff=r),Nf(t,e)},n}function hE(t,e,n){n=ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nf(t,e),typeof r!="function"&&(es===null?es=new Set([this]):es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Dk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Kk.bind(null,t,e,n),e.then(t,t))}function mv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ar(-1,1),e.tag=2,Zr(n,e,1))),n.lanes|=1),t)}var Ok=wr.ReactCurrentOwner,Ft=!1;function Nt(t,e,n,r){e.child=t===null?zw(e,null,n,r):ro(e,t.child,n,r)}function yv(t,e,n,r,s){n=n.render;var i=e.ref;return Ki(e,s),r=rm(t,e,n,r,i,s),n=sm(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(Te&&n&&Wp(e),e.flags|=1,Nt(t,e,r,s),e.child)}function vv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,fE(t,e,i,r,s)):(t=ju(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(o,r)&&t.ref===e.ref)return fr(t,e,s)}return e.flags|=1,t=ns(i,r),t.ref=e.ref,t.return=e,e.child=t}function fE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oa(i,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,fr(t,e,s)}return Pf(t,e,n,r,s)}function pE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Fi,Wt),Wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Fi,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Fi,Wt),Wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Fi,Wt),Wt|=r;return Nt(t,e,s,n),e.child}function mE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pf(t,e,n,r,s){var i=Bt(n)?qs:St.current;return i=to(e,i),Ki(e,s),n=rm(t,e,n,r,i,s),r=sm(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fr(t,e,s)):(Te&&r&&Wp(e),e.flags|=1,Nt(t,e,n,s),e.child)}function _v(t,e,n,r,s){if(Bt(n)){var i=!0;lc(e)}else i=!1;if(Ki(e,s),e.stateNode===null)Lu(t,e),cE(e,n,r),Af(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=cn(c):(c=Bt(n)?qs:St.current,c=to(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&fv(e,o,r,c),Lr=!1;var g=e.memoizedState;o.state=g,fc(e,r,o,s),u=e.memoizedState,a!==r||g!==u||zt.current||Lr?(typeof h=="function"&&(Rf(e,n,h,r),u=e.memoizedState),(a=Lr||hv(e,n,a,r,g,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$w(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:_n(e.type,a),o.props=c,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Bt(n)?qs:St.current,u=to(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==u)&&fv(e,o,r,u),Lr=!1,g=e.memoizedState,o.state=g,fc(e,r,o,s);var C=e.memoizedState;a!==p||g!==C||zt.current||Lr?(typeof w=="function"&&(Rf(e,n,w,r),C=e.memoizedState),(c=Lr||hv(e,n,c,r,g,C,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return bf(t,e,n,r,i,s)}function bf(t,e,n,r,s,i){mE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&sv(e,n,!1),fr(t,e,i);r=e.stateNode,Ok.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ro(e,t.child,null,i),e.child=ro(e,null,a,i)):Nt(t,e,a,i),e.memoizedState=r.state,s&&sv(e,n,!0),e.child}function gE(t){var e=t.stateNode;e.pendingContext?rv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rv(t,e.context,!1),Zp(t,e.containerInfo)}function wv(t,e,n,r,s){return no(),Kp(s),e.flags|=256,Nt(t,e,n,r),e.child}var Df={dehydrated:null,treeContext:null,retryLane:0};function Of(t){return{baseLanes:t,cachePool:null,transitions:null}}function yE(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ie,s&1),t===null)return kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=od(o,r,0,null),t=zs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Of(n),e.memoizedState=Df,t):am(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Lk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ns(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ns(a,i):(i=zs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Of(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Df,r}return i=t.child,t=i.sibling,r=ns(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function am(t,e){return e=od({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,r){return r!==null&&Kp(r),ro(e,t.child,null,n),t=am(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Lk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=kh(Error(F(422))),pu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=od({mode:"visible",children:r.children},s,0,null),i=zs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ro(e,t.child,null,o),e.child.memoizedState=Of(o),e.memoizedState=Df,i);if(!(e.mode&1))return pu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(F(419)),r=kh(i,r,void 0),pu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ft||a){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(t,s),xn(r,t,s,-1))}return fm(),r=kh(Error(F(421))),pu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Gk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ht=Jr(s.nextSibling),Qt=e,Te=!0,En=null,t!==null&&(sn[on++]=tr,sn[on++]=nr,sn[on++]=Ws,tr=t.id,nr=t.overflow,Ws=e),e=am(e,r.children),e.flags|=4096,e)}function Ev(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cf(t.return,e,n)}function Ch(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Nt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,n,e);else if(t.tag===19)Ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ch(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&pc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ch(e,!0,n,null,i);break;case"together":Ch(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mk(t,e,n){switch(e.tag){case 3:gE(e),no();break;case 5:qw(e);break;case 1:Bt(e.type)&&lc(e);break;case 4:Zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(dc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?yE(t,e,n):(ye(Ie,Ie.current&1),t=fr(t,e,n),t!==null?t.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,pE(t,e,n)}return fr(t,e,n)}var _E,Lf,wE,EE;_E=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lf=function(){};wE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,js(Fn.current);var i=null;switch(n){case"input":s=nf(t,s),r=nf(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=of(t,s),r=of(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oc)}lf(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ca.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ca.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&_e("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};EE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qo(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Vk(t,e,n){var r=e.pendingProps;switch(Hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Bt(e.type)&&ac(),wt(e),null;case 3:return r=e.stateNode,so(),Ee(zt),Ee(St),tm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&($f(En),En=null))),Lf(t,e),wt(e),null;case 5:em(e);var s=js(Ua.current);if(n=e.type,t!==null&&e.stateNode!=null)wE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return wt(e),null}if(t=js(Fn.current),hu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ln]=e,r[Va]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<na.length;s++)_e(na[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Ny(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":by(r,i),_e("invalid",r)}lf(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&du(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&du(r.textContent,a,t),s=["children",""+a]):Ca.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":ru(r),Py(r,i,!0);break;case"textarea":ru(r),Dy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=oc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Q0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ln]=e,t[Va]=r,_E(t,e,!1,!1),e.stateNode=t;e:{switch(o=uf(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<na.length;s++)_e(na[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Ny(t,r),s=nf(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),_e("invalid",t);break;case"textarea":by(t,r),s=of(t,r),_e("invalid",t);break;default:s=r}lf(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?J0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Y0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ra(t,u):typeof u=="number"&&Ra(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ca.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&Pp(t,i,u,o))}switch(n){case"input":ru(t),Py(t,r,!1);break;case"textarea":ru(t),Dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+as(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$i(t,!!r.multiple,i,!1):r.defaultValue!=null&&$i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=oc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)EE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=js(Ua.current),js(Fn.current),hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ln]=e,(i=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&du(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ln]=e,e.stateNode=r}return wt(e),null;case 13:if(Ee(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Ht!==null&&e.mode&1&&!(e.flags&128))Uw(),no(),e.flags|=98560,i=!1;else if(i=hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Ln]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),i=!1}else En!==null&&($f(En),En=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Ge===0&&(Ge=3):fm())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return so(),Lf(t,e),t===null&&La(e.stateNode.containerInfo),wt(e),null;case 10:return Yp(e.type._context),wt(e),null;case 17:return Bt(e.type)&&ac(),wt(e),null;case 19:if(Ee(Ie),i=e.memoizedState,i===null)return wt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qo(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pc(t),o!==null){for(e.flags|=128,Qo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>oo&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304)}else{if(!r)if(t=pc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return wt(e),null}else 2*Ue()-i.renderingStartTime>oo&&n!==1073741824&&(e.flags|=128,r=!0,Qo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Ie.current,ye(Ie,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return hm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function jk(t,e){switch(Hp(e),e.tag){case 1:return Bt(e.type)&&ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return so(),Ee(zt),Ee(St),tm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return em(e),null;case 13:if(Ee(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ie),null;case 4:return so(),null;case 10:return Yp(e.type._context),null;case 22:case 23:return hm(),null;case 24:return null;default:return null}}var mu=!1,xt=!1,Uk=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Mf(t,e,n){try{n()}catch(r){be(t,e,r)}}var Tv=!1;function Fk(t,e){if(_f=rc,t=kw(),qp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++c===s&&(a=o),g===i&&++h===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wf={focusedElem:t,selectionRange:n},rc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var A=C.memoizedProps,R=C.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?A:_n(e.type,A),R);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(b){be(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return C=Tv,Tv=!1,C}function ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mf(e,n,i)}s=s.next}while(s!==r)}}function sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TE(t){var e=t.alternate;e!==null&&(t.alternate=null,TE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[Va],delete e[xf],delete e[Tk],delete e[xk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xE(t){return t.tag===5||t.tag===3||t.tag===4}function xv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oc));else if(r!==4&&(t=t.child,t!==null))for(jf(t,e,n),t=t.sibling;t!==null;)jf(t,e,n),t=t.sibling}function Uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uf(t,e,n),t=t.sibling;t!==null;)Uf(t,e,n),t=t.sibling}var ot=null,wn=!1;function br(t,e,n){for(n=n.child;n!==null;)IE(t,e,n),n=n.sibling}function IE(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Yc,n)}catch{}switch(n.tag){case 5:xt||Ui(n,e);case 6:var r=ot,s=wn;ot=null,br(t,e,n),ot=r,wn=s,ot!==null&&(wn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(wn?(t=ot,n=n.stateNode,t.nodeType===8?wh(t.parentNode,n):t.nodeType===1&&wh(t,n),ba(t)):wh(ot,n.stateNode));break;case 4:r=ot,s=wn,ot=n.stateNode.containerInfo,wn=!0,br(t,e,n),ot=r,wn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mf(n,e,o),s=s.next}while(s!==r)}br(t,e,n);break;case 1:if(!xt&&(Ui(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){be(n,e,a)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,br(t,e,n),xt=r):br(t,e,n);break;default:br(t,e,n)}}function Iv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Uk),e.forEach(function(r){var s=Qk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ot=a.stateNode,wn=!1;break e;case 3:ot=a.stateNode.containerInfo,wn=!0;break e;case 4:ot=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(ot===null)throw Error(F(160));IE(i,o,s),ot=null,wn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){be(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SE(e,t),e=e.sibling}function SE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),bn(t),r&4){try{ma(3,t,t.return),sd(3,t)}catch(A){be(t,t.return,A)}try{ma(5,t,t.return)}catch(A){be(t,t.return,A)}}break;case 1:vn(e,t),bn(t),r&512&&n!==null&&Ui(n,n.return);break;case 5:if(vn(e,t),bn(t),r&512&&n!==null&&Ui(n,n.return),t.flags&32){var s=t.stateNode;try{Ra(s,"")}catch(A){be(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&K0(s,i),uf(a,o);var c=uf(a,i);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?J0(s,p):h==="dangerouslySetInnerHTML"?Y0(s,p):h==="children"?Ra(s,p):Pp(s,h,p,c)}switch(a){case"input":rf(s,i);break;case"textarea":G0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?$i(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?$i(s,!!i.multiple,i.defaultValue,!0):$i(s,!!i.multiple,i.multiple?[]:"",!1))}s[Va]=i}catch(A){be(t,t.return,A)}}break;case 6:if(vn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){be(t,t.return,A)}}break;case 3:if(vn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ba(e.containerInfo)}catch(A){be(t,t.return,A)}break;case 4:vn(e,t),bn(t);break;case 13:vn(e,t),bn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cm=Ue())),r&4&&Iv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(c=xt)||h,vn(e,t),xt=c):vn(e,t),bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(p=q=h;q!==null;){switch(g=q,w=g.child,g.tag){case 0:case 11:case 14:case 15:ma(4,g,g.return);break;case 1:Ui(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(A){be(r,n,A)}}break;case 5:Ui(g,g.return);break;case 22:if(g.memoizedState!==null){kv(p);continue}}w!==null?(w.return=g,q=w):kv(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=X0("display",o))}catch(A){be(t,t.return,A)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(A){be(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vn(e,t),bn(t),r&4&&Iv(t);break;case 21:break;default:vn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xE(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ra(s,""),r.flags&=-33);var i=xv(t);Uf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xv(t);jf(t,a,o);break;default:throw Error(F(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zk(t,e,n){q=t,kE(t)}function kE(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mu;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||xt;a=mu;var c=xt;if(mu=o,(xt=u)&&!c)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Cv(s):u!==null?(u.return=o,q=u):Cv(s);for(;i!==null;)q=i,kE(i),i=i.sibling;q=s,mu=a,xt=c}Sv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Sv(t)}}function Sv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||sd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ba(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}xt||e.flags&512&&Vf(e)}catch(g){be(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function kv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Cv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sd(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{Vf(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{Vf(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var Bk=Math.ceil,yc=wr.ReactCurrentDispatcher,lm=wr.ReactCurrentOwner,ln=wr.ReactCurrentBatchConfig,ae=0,nt=null,Be=null,ut=0,Wt=0,Fi=ys(0),Ge=0,$a=null,Ks=0,id=0,um=0,ga=null,jt=null,cm=0,oo=1/0,Zn=null,vc=!1,Ff=null,es=null,gu=!1,Hr=null,_c=0,ya=0,zf=null,Mu=-1,Vu=0;function Pt(){return ae&6?Ue():Mu!==-1?Mu:Mu=Ue()}function ts(t){return t.mode&1?ae&2&&ut!==0?ut&-ut:Sk.transition!==null?(Vu===0&&(Vu=cw()),Vu):(t=de,t!==0||(t=window.event,t=t===void 0?16:yw(t.type)),t):1}function xn(t,e,n,r){if(50<ya)throw ya=0,zf=null,Error(F(185));al(t,n,r),(!(ae&2)||t!==nt)&&(t===nt&&(!(ae&2)&&(id|=n),Ge===4&&jr(t,ut)),$t(t,r),n===1&&ae===0&&!(e.mode&1)&&(oo=Ue()+500,td&&vs()))}function $t(t,e){var n=t.callbackNode;SS(t,e);var r=nc(t,t===nt?ut:0);if(r===0)n!==null&&My(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&My(n),e===1)t.tag===0?Ik(Rv.bind(null,t)):Mw(Rv.bind(null,t)),wk(function(){!(ae&6)&&vs()}),n=null;else{switch(dw(r)){case 1:n=Mp;break;case 4:n=lw;break;case 16:n=tc;break;case 536870912:n=uw;break;default:n=tc}n=OE(n,CE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CE(t,e){if(Mu=-1,Vu=0,ae&6)throw Error(F(327));var n=t.callbackNode;if(Gi()&&t.callbackNode!==n)return null;var r=nc(t,t===nt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wc(t,r);else{e=r;var s=ae;ae|=2;var i=AE();(nt!==t||ut!==e)&&(Zn=null,oo=Ue()+500,Fs(t,e));do try{Wk();break}catch(a){RE(t,a)}while(!0);Qp(),yc.current=i,ae=s,Be!==null?e=0:(nt=null,ut=0,e=Ge)}if(e!==0){if(e===2&&(s=pf(t),s!==0&&(r=s,e=Bf(t,s))),e===1)throw n=$a,Fs(t,0),jr(t,r),$t(t,Ue()),n;if(e===6)jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$k(s)&&(e=wc(t,r),e===2&&(i=pf(t),i!==0&&(r=i,e=Bf(t,i))),e===1))throw n=$a,Fs(t,0),jr(t,r),$t(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ds(t,jt,Zn);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=cm+500-Ue(),10<e)){if(nc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tf(Ds.bind(null,t,jt,Zn),e);break}Ds(t,jt,Zn);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Tn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bk(r/1960))-r,10<r){t.timeoutHandle=Tf(Ds.bind(null,t,jt,Zn),r);break}Ds(t,jt,Zn);break;case 5:Ds(t,jt,Zn);break;default:throw Error(F(329))}}}return $t(t,Ue()),t.callbackNode===n?CE.bind(null,t):null}function Bf(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=wc(t,e),t!==2&&(e=jt,jt=n,e!==null&&$f(e)),t}function $f(t){jt===null?jt=t:jt.push.apply(jt,t)}function $k(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!In(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~um,e&=~id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tn(e),r=1<<n;t[n]=-1,e&=~r}}function Rv(t){if(ae&6)throw Error(F(327));Gi();var e=nc(t,0);if(!(e&1))return $t(t,Ue()),null;var n=wc(t,e);if(t.tag!==0&&n===2){var r=pf(t);r!==0&&(e=r,n=Bf(t,r))}if(n===1)throw n=$a,Fs(t,0),jr(t,e),$t(t,Ue()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,jt,Zn),$t(t,Ue()),null}function dm(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(oo=Ue()+500,td&&vs())}}function Gs(t){Hr!==null&&Hr.tag===0&&!(ae&6)&&Gi();var e=ae;ae|=1;var n=ln.transition,r=de;try{if(ln.transition=null,de=1,t)return t()}finally{de=r,ln.transition=n,ae=e,!(ae&6)&&vs()}}function hm(){Wt=Fi.current,Ee(Fi)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_k(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ac();break;case 3:so(),Ee(zt),Ee(St),tm();break;case 5:em(r);break;case 4:so();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:Yp(r.type._context);break;case 22:case 23:hm()}n=n.return}if(nt=t,Be=t=ns(t.current,null),ut=Wt=e,Ge=0,$a=null,um=id=Ks=0,jt=ga=null,Vs!==null){for(e=0;e<Vs.length;e++)if(n=Vs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vs=null}return t}function RE(t,e){do{var n=Be;try{if(Qp(),Du.current=gc,mc){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mc=!1}if(Hs=0,Ze=We=ke=null,pa=!1,Fa=0,lm.current=null,n===null||n.return===null){Ge=1,$a=e,Be=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=ut,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=mv(o);if(w!==null){w.flags&=-257,gv(w,o,a,i,e),w.mode&1&&pv(i,c,e),e=w,u=c;var C=e.updateQueue;if(C===null){var A=new Set;A.add(u),e.updateQueue=A}else C.add(u);break e}else{if(!(e&1)){pv(i,c,e),fm();break e}u=Error(F(426))}}else if(Te&&a.mode&1){var R=mv(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),gv(R,o,a,i,e),Kp(io(u,a));break e}}i=u=io(u,a),Ge!==4&&(Ge=2),ga===null?ga=[i]:ga.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=dE(i,u,e);lv(i,E);break e;case 1:a=u;var _=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(es===null||!es.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=hE(i,a,e);lv(i,b);break e}}i=i.return}while(i!==null)}PE(n)}catch(V){e=V,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function AE(){var t=yc.current;return yc.current=gc,t===null?gc:t}function fm(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),nt===null||!(Ks&268435455)&&!(id&268435455)||jr(nt,ut)}function wc(t,e){var n=ae;ae|=2;var r=AE();(nt!==t||ut!==e)&&(Zn=null,Fs(t,e));do try{qk();break}catch(s){RE(t,s)}while(!0);if(Qp(),ae=n,yc.current=r,Be!==null)throw Error(F(261));return nt=null,ut=0,Ge}function qk(){for(;Be!==null;)NE(Be)}function Wk(){for(;Be!==null&&!gS();)NE(Be)}function NE(t){var e=DE(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?PE(t):Be=e,lm.current=null}function PE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jk(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Be=null;return}}else if(n=Vk(n,e,Wt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ge===0&&(Ge=5)}function Ds(t,e,n){var r=de,s=ln.transition;try{ln.transition=null,de=1,Hk(t,e,n,r)}finally{ln.transition=s,de=r}return null}function Hk(t,e,n,r){do Gi();while(Hr!==null);if(ae&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kS(t,i),t===nt&&(Be=nt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,OE(tc,function(){return Gi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ln.transition,ln.transition=null;var o=de;de=1;var a=ae;ae|=4,lm.current=null,Fk(t,n),SE(n,t),hk(wf),rc=!!_f,wf=_f=null,t.current=n,zk(n),yS(),ae=a,de=o,ln.transition=i}else t.current=n;if(gu&&(gu=!1,Hr=t,_c=s),i=t.pendingLanes,i===0&&(es=null),wS(n.stateNode),$t(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vc)throw vc=!1,t=Ff,Ff=null,t;return _c&1&&t.tag!==0&&Gi(),i=t.pendingLanes,i&1?t===zf?ya++:(ya=0,zf=t):ya=0,vs(),null}function Gi(){if(Hr!==null){var t=dw(_c),e=ln.transition,n=de;try{if(ln.transition=null,de=16>t?16:t,Hr===null)var r=!1;else{if(t=Hr,Hr=null,_c=0,ae&6)throw Error(F(331));var s=ae;for(ae|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(q=c;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:ma(8,h,i)}var p=h.child;if(p!==null)p.return=h,q=p;else for(;q!==null;){h=q;var g=h.sibling,w=h.return;if(TE(h),h===c){q=null;break}if(g!==null){g.return=w,q=g;break}q=w}}}var C=i.alternate;if(C!==null){var A=C.child;if(A!==null){C.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ma(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,q=E;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){o=q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,q=v;else e:for(o=_;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sd(9,a)}}catch(V){be(a,a.return,V)}if(a===o){q=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,q=b;break e}q=a.return}}if(ae=s,vs(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Yc,t)}catch{}r=!0}return r}finally{de=n,ln.transition=e}}return!1}function Av(t,e,n){e=io(n,e),e=dE(t,e,1),t=Zr(t,e,1),e=Pt(),t!==null&&(al(t,1,e),$t(t,e))}function be(t,e,n){if(t.tag===3)Av(t,t,n);else for(;e!==null;){if(e.tag===3){Av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(es===null||!es.has(r))){t=io(n,t),t=hE(e,t,1),e=Zr(e,t,1),t=Pt(),e!==null&&(al(e,1,t),$t(e,t));break}}e=e.return}}function Kk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ut&n)===n&&(Ge===4||Ge===3&&(ut&130023424)===ut&&500>Ue()-cm?Fs(t,0):um|=n),$t(t,e)}function bE(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Pt();t=hr(t,e),t!==null&&(al(t,e,n),$t(t,n))}function Gk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),bE(t,n)}function Qk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),bE(t,n)}var DE;DE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,Mk(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Te&&e.flags&1048576&&Vw(e,cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lu(t,e),t=e.pendingProps;var s=to(e,St.current);Ki(e,n),s=rm(null,e,r,t,s,n);var i=sm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(r)?(i=!0,lc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jp(e),s.updater=rd,e.stateNode=s,s._reactInternals=e,Af(e,r,t,n),e=bf(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&Wp(e),Nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Xk(r),t=_n(r,t),s){case 0:e=Pf(null,e,r,t,n);break e;case 1:e=_v(null,e,r,t,n);break e;case 11:e=yv(null,e,r,t,n);break e;case 14:e=vv(null,e,r,_n(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Pf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),_v(t,e,r,s,n);case 3:e:{if(gE(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$w(t,e),fc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=io(Error(F(423)),e),e=wv(t,e,r,n,s);break e}else if(r!==s){s=io(Error(F(424)),e),e=wv(t,e,r,n,s);break e}else for(Ht=Jr(e.stateNode.containerInfo.firstChild),Qt=e,Te=!0,En=null,n=zw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(no(),r===s){e=fr(t,e,n);break e}Nt(t,e,r,n)}e=e.child}return e;case 5:return qw(e),t===null&&kf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ef(r,s)?o=null:i!==null&&Ef(r,i)&&(e.flags|=32),mE(t,e),Nt(t,e,o,n),e.child;case 6:return t===null&&kf(e),null;case 13:return yE(t,e,n);case 4:return Zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ro(e,null,r,n):Nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),yv(t,e,r,s,n);case 7:return Nt(t,e,e.pendingProps,n),e.child;case 8:return Nt(t,e,e.pendingProps.children,n),e.child;case 12:return Nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(dc,r._currentValue),r._currentValue=o,i!==null)if(In(i.value,o)){if(i.children===s.children&&!zt.current){e=fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=ar(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Cf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ki(e,n),s=cn(s),r=r(s),e.flags|=1,Nt(t,e,r,n),e.child;case 14:return r=e.type,s=_n(r,e.pendingProps),s=_n(r.type,s),vv(t,e,r,s,n);case 15:return fE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:_n(r,s),Lu(t,e),e.tag=1,Bt(r)?(t=!0,lc(e)):t=!1,Ki(e,n),cE(e,r,s),Af(e,r,s,n),bf(null,e,r,!0,t,n);case 19:return vE(t,e,n);case 22:return pE(t,e,n)}throw Error(F(156,e.tag))};function OE(t,e){return aw(t,e)}function Yk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new Yk(t,e,n,r)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xk(t){if(typeof t=="function")return pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dp)return 11;if(t===Op)return 14}return 2}function ns(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ju(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")pm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ni:return zs(n.children,s,i,e);case bp:o=8,s|=8;break;case Jh:return t=an(12,n,e,s|2),t.elementType=Jh,t.lanes=i,t;case Zh:return t=an(13,n,e,s),t.elementType=Zh,t.lanes=i,t;case ef:return t=an(19,n,e,s),t.elementType=ef,t.lanes=i,t;case q0:return od(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B0:o=10;break e;case $0:o=9;break e;case Dp:o=11;break e;case Op:o=14;break e;case Or:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=an(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zs(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function od(t,e,n,r){return t=an(22,t,r,e),t.elementType=q0,t.lanes=n,t.stateNode={isHidden:!1},t}function Rh(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function Ah(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uh(0),this.expirationTimes=uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mm(t,e,n,r,s,i,o,a,u){return t=new Jk(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=an(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jp(i),t}function Zk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ai,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LE(t){if(!t)return ls;t=t._reactInternals;e:{if(si(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Bt(n))return Lw(t,n,e)}return e}function ME(t,e,n,r,s,i,o,a,u){return t=mm(n,r,!0,t,s,i,o,a,u),t.context=LE(null),n=t.current,r=Pt(),s=ts(n),i=ar(r,s),i.callback=e??null,Zr(n,i,s),t.current.lanes=s,al(t,s,r),$t(t,r),t}function ad(t,e,n,r){var s=e.current,i=Pt(),o=ts(s);return n=LE(n),e.context===null?e.context=n:e.pendingContext=n,e=ar(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zr(s,e,o),t!==null&&(xn(t,s,o,i),bu(t,s,o)),o}function Ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gm(t,e){Nv(t,e),(t=t.alternate)&&Nv(t,e)}function eC(){return null}var VE=typeof reportError=="function"?reportError:function(t){console.error(t)};function ym(t){this._internalRoot=t}ld.prototype.render=ym.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ad(t,e,null,null)};ld.prototype.unmount=ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gs(function(){ad(null,t,null,null)}),e[dr]=null}};function ld(t){this._internalRoot=t}ld.prototype.unstable_scheduleHydration=function(t){if(t){var e=pw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vr.length&&e!==0&&e<Vr[n].priority;n++);Vr.splice(n,0,t),n===0&&gw(t)}};function vm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pv(){}function tC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ec(o);i.call(c)}}var o=ME(e,r,t,0,null,!1,!1,"",Pv);return t._reactRootContainer=o,t[dr]=o.current,La(t.nodeType===8?t.parentNode:t),Gs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ec(u);a.call(c)}}var u=mm(t,0,!1,null,null,!1,!1,"",Pv);return t._reactRootContainer=u,t[dr]=u.current,La(t.nodeType===8?t.parentNode:t),Gs(function(){ad(e,u,n,r)}),u}function cd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=Ec(o);a.call(u)}}ad(e,o,t,s)}else o=tC(n,e,t,s,r);return Ec(o)}hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ta(e.pendingLanes);n!==0&&(Vp(e,n|1),$t(e,Ue()),!(ae&6)&&(oo=Ue()+500,vs()))}break;case 13:Gs(function(){var r=hr(t,1);if(r!==null){var s=Pt();xn(r,t,1,s)}}),gm(t,1)}};jp=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Pt();xn(e,t,134217728,n)}gm(t,134217728)}};fw=function(t){if(t.tag===13){var e=ts(t),n=hr(t,e);if(n!==null){var r=Pt();xn(n,t,e,r)}gm(t,e)}};pw=function(){return de};mw=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};df=function(t,e,n){switch(e){case"input":if(rf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ed(r);if(!s)throw Error(F(90));H0(r),rf(r,s)}}}break;case"textarea":G0(t,n);break;case"select":e=n.value,e!=null&&$i(t,!!n.multiple,e,!1)}};tw=dm;nw=Gs;var nC={usingClientEntryPoint:!1,Events:[ul,Oi,ed,Z0,ew,dm]},Yo={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rC={bundleType:Yo.bundleType,version:Yo.version,rendererPackageName:Yo.rendererPackageName,rendererConfig:Yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iw(t),t===null?null:t.stateNode},findFiberByHostInstance:Yo.findFiberByHostInstance||eC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Yc=yu.inject(rC),Un=yu}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vm(e))throw Error(F(200));return Zk(t,e,null,n)};Jt.createRoot=function(t,e){if(!vm(t))throw Error(F(299));var n=!1,r="",s=VE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mm(t,1,!1,null,null,n,!1,r,s),t[dr]=e.current,La(t.nodeType===8?t.parentNode:t),new ym(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=iw(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Gs(t)};Jt.hydrate=function(t,e,n){if(!ud(e))throw Error(F(200));return cd(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!vm(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=VE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ME(e,null,t,1,n??null,s,!1,i,o),t[dr]=e.current,La(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ld(e)};Jt.render=function(t,e,n){if(!ud(e))throw Error(F(200));return cd(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!ud(t))throw Error(F(40));return t._reactRootContainer?(Gs(function(){cd(null,null,t,!1,function(){t._reactRootContainer=null,t[dr]=null})}),!0):!1};Jt.unstable_batchedUpdates=dm;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ud(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return cd(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function jE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jE)}catch(t){console.error(t)}}jE(),j0.exports=Jt;var zi=j0.exports,bv=zi;Yh.createRoot=bv.createRoot,Yh.hydrateRoot=bv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qa.apply(this,arguments)}var Kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Kr||(Kr={}));const Dv="popstate";function sC(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:u=""}=ii(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),qf("",{pathname:o,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");a=c===-1?u:u.slice(0,c)}return a+"#"+(typeof i=="string"?i:Tc(i))}function r(s,i){dd(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return oC(e,n,r,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iC(){return Math.random().toString(36).substr(2,8)}function Ov(t,e){return{usr:t.state,key:t.key,idx:e}}function qf(t,e,n,r){return n===void 0&&(n=null),qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ii(e):e,{state:n,key:e&&e.key||r||iC()})}function Tc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ii(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Kr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(qa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=Kr.Pop;let R=h(),E=R==null?null:R-c;c=R,u&&u({action:a,location:A.location,delta:E})}function g(R,E){a=Kr.Push;let _=qf(A.location,R,E);n&&n(_,R),c=h()+1;let v=Ov(_,c),b=A.createHref(_);try{o.pushState(v,"",b)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(b)}i&&u&&u({action:a,location:A.location,delta:1})}function w(R,E){a=Kr.Replace;let _=qf(A.location,R,E);n&&n(_,R),c=h();let v=Ov(_,c),b=A.createHref(_);o.replaceState(v,"",b),i&&u&&u({action:a,location:A.location,delta:0})}function C(R){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof R=="string"?R:Tc(R);return _=_.replace(/ $/,"%20"),Ce(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let A={get action(){return a},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Dv,p),u=R,()=>{s.removeEventListener(Dv,p),u=null}},createHref(R){return e(s,R)},createURL:C,encodeLocation(R){let E=C(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:w,go(R){return o.go(R)}};return A}var Lv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lv||(Lv={}));function aC(t,e,n){return n===void 0&&(n="/"),lC(t,e,n)}function lC(t,e,n,r){let s=typeof e=="string"?ii(e):e,i=ao(s.pathname||"/",n);if(i==null)return null;let o=UE(t);uC(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=wC(i);a=vC(o[u],c)}return a}function UE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ce(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=rs([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),UE(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:gC(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of FE(i.path))s(i,o,u)}),e}function FE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=FE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function uC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cC=/^:[\w-]+$/,dC=3,hC=2,fC=1,pC=10,mC=-2,Mv=t=>t==="*";function gC(t,e){let n=t.split("/"),r=n.length;return n.some(Mv)&&(r+=mC),e&&(r+=hC),n.filter(s=>!Mv(s)).reduce((s,i)=>s+(cC.test(i)?dC:i===""?fC:pC),r)}function yC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vC(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=Wf({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:rs([i,p.pathname]),pathnameBase:SC(rs([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=rs([i,p.pathnameBase]))}return o}function Wf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_C(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:g,isOptional:w}=h;if(g==="*"){let A=a[p]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const C=a[p];return w&&!C?c[g]=void 0:c[g]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function _C(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ao(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const EC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TC=t=>EC.test(t);function xC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ii(t):t,i;if(n)if(TC(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),dd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Vv(n.substring(1),"/"):i=Vv(n,e)}else i=e;return{pathname:i,search:kC(r),hash:CC(s)}}function Vv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Nh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _m(t,e){let n=IC(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ii(t):(s=qa({},t),Ce(!s.pathname||!s.pathname.includes("?"),Nh("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),Nh("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),Nh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}a=p>=0?e[p]:"/"}let u=xC(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const rs=t=>t.join("/").replace(/\/\/+/g,"/"),SC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function RC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zE=["post","put","patch","delete"];new Set(zE);const AC=["get",...zE];new Set(AC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wa.apply(this,arguments)}const hd=I.createContext(null),BE=I.createContext(null),Er=I.createContext(null),fd=I.createContext(null),Tr=I.createContext({outlet:null,matches:[],isDataRoute:!1}),$E=I.createContext(null);function NC(t,e){let{relative:n}=e===void 0?{}:e;xo()||Ce(!1);let{basename:r,navigator:s}=I.useContext(Er),{hash:i,pathname:o,search:a}=pd(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:rs([r,o])),s.createHref({pathname:u,search:a,hash:i})}function xo(){return I.useContext(fd)!=null}function Io(){return xo()||Ce(!1),I.useContext(fd).location}function qE(t){I.useContext(Er).static||I.useLayoutEffect(t)}function WE(){let{isDataRoute:t}=I.useContext(Tr);return t?WC():PC()}function PC(){xo()||Ce(!1);let t=I.useContext(hd),{basename:e,future:n,navigator:r}=I.useContext(Er),{matches:s}=I.useContext(Tr),{pathname:i}=Io(),o=JSON.stringify(_m(s,n.v7_relativeSplatPath)),a=I.useRef(!1);return qE(()=>{a.current=!0}),I.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=wm(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rs([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}const bC=I.createContext(null);function DC(t){let e=I.useContext(Tr).outlet;return e&&I.createElement(bC.Provider,{value:t},e)}function pd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(Er),{matches:s}=I.useContext(Tr),{pathname:i}=Io(),o=JSON.stringify(_m(s,r.v7_relativeSplatPath));return I.useMemo(()=>wm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function OC(t,e){return LC(t,e)}function LC(t,e,n,r){xo()||Ce(!1);let{navigator:s}=I.useContext(Er),{matches:i}=I.useContext(Tr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Io(),h;if(e){var p;let R=typeof e=="string"?ii(e):e;u==="/"||(p=R.pathname)!=null&&p.startsWith(u)||Ce(!1),h=R}else h=c;let g=h.pathname||"/",w=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=aC(t,{pathname:w}),A=FC(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:rs([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:rs([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&A?I.createElement(fd.Provider,{value:{location:Wa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Kr.Pop}},A):A}function MC(){let t=qC(),e=RC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,null)}const VC=I.createElement(MC,null);class jC extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Tr.Provider,{value:this.props.routeContext},I.createElement($E.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UC(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext(hd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Tr.Provider,{value:e},r)}function FC(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||Ce(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:g,errors:w}=n,C=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||C){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let w,C=!1,A=null,R=null;n&&(w=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||VC,u&&(c<0&&g===0?(HC("route-fallback"),C=!0,R=null):c===g&&(C=!0,R=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),_=()=>{let v;return w?v=A:C?v=R:p.route.Component?v=I.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=h,I.createElement(UC,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?I.createElement(jC,{location:n.location,revalidation:n.revalidation,component:A,error:w,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var HE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(HE||{}),KE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(KE||{});function zC(t){let e=I.useContext(hd);return e||Ce(!1),e}function BC(t){let e=I.useContext(BE);return e||Ce(!1),e}function $C(t){let e=I.useContext(Tr);return e||Ce(!1),e}function GE(t){let e=$C(),n=e.matches[e.matches.length-1];return n.route.id||Ce(!1),n.route.id}function qC(){var t;let e=I.useContext($E),n=BC(),r=GE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WC(){let{router:t}=zC(HE.UseNavigateStable),e=GE(KE.UseNavigateStable),n=I.useRef(!1);return qE(()=>{n.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Wa({fromRouteId:e},i)))},[t,e])}const jv={};function HC(t,e,n){jv[t]||(jv[t]=!0)}function KC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Em(t){let{to:e,replace:n,state:r,relative:s}=t;xo()||Ce(!1);let{future:i,static:o}=I.useContext(Er),{matches:a}=I.useContext(Tr),{pathname:u}=Io(),c=WE(),h=wm(e,_m(a,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(h);return I.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function GC(t){return DC(t.context)}function Dn(t){Ce(!1)}function QC(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Kr.Pop,navigator:i,static:o=!1,future:a}=t;xo()&&Ce(!1);let u=e.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:u,navigator:i,static:o,future:Wa({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=ii(r));let{pathname:h="/",search:p="",hash:g="",state:w=null,key:C="default"}=r,A=I.useMemo(()=>{let R=ao(h,u);return R==null?null:{location:{pathname:R,search:p,hash:g,state:w,key:C},navigationType:s}},[u,h,p,g,w,C,s]);return A==null?null:I.createElement(Er.Provider,{value:c},I.createElement(fd.Provider,{children:n,value:A}))}function YC(t){let{children:e,location:n}=t;return OC(Hf(e),n)}new Promise(()=>{});function Hf(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,Hf(r.props.children,i));return}r.type!==Dn&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xc.apply(this,arguments)}function QE(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JC(t,e){return t.button===0&&(!e||e==="_self")&&!XC(t)}const ZC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],tR="6";try{window.__reactRouterVersion=tR}catch{}const nR=I.createContext({isTransitioning:!1}),rR="startTransition",Uv=K1[rR];function sR(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=sC({window:s,v5Compat:!0}));let o=i.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=I.useCallback(p=>{c&&Uv?Uv(()=>u(p)):u(p)},[u,c]);return I.useLayoutEffect(()=>o.listen(h),[o,h]),I.useEffect(()=>KC(r),[r]),I.createElement(QC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const iR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uu=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:p}=e,g=QE(e,ZC),{basename:w}=I.useContext(Er),C,A=!1;if(typeof c=="string"&&oR.test(c)&&(C=c,iR))try{let v=new URL(window.location.href),b=c.startsWith("//")?new URL(v.protocol+c):new URL(c),V=ao(b.pathname,w);b.origin===v.origin&&V!=null?c=V+b.search+b.hash:A=!0}catch{}let R=NC(c,{relative:s}),E=lR(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:p});function _(v){r&&r(v),v.defaultPrevented||E(v)}return I.createElement("a",xc({},g,{href:C||R,onClick:A||i?r:_,ref:n,target:u}))}),Fv=I.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:u,viewTransition:c,children:h}=e,p=QE(e,eR),g=pd(u,{relative:p.relative}),w=Io(),C=I.useContext(BE),{navigator:A,basename:R}=I.useContext(Er),E=C!=null&&uR(g)&&c===!0,_=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,v=w.pathname,b=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;s||(v=v.toLowerCase(),b=b?b.toLowerCase():null,_=_.toLowerCase()),b&&R&&(b=ao(b,R)||b);const V=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=v===_||!o&&v.startsWith(_)&&v.charAt(V)==="/",x=b!=null&&(b===_||!o&&b.startsWith(_)&&b.charAt(_.length)==="/"),y={isActive:D,isPending:x,isTransitioning:E},S=D?r:void 0,k;typeof i=="function"?k=i(y):k=[i,D?"active":null,x?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(y):a;return I.createElement(Uu,xc({},p,{"aria-current":S,className:k,ref:n,style:P,to:u,viewTransition:c}),typeof h=="function"?h(y):h)});var Kf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Kf||(Kf={}));var zv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zv||(zv={}));function aR(t){let e=I.useContext(hd);return e||Ce(!1),e}function lR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,u=WE(),c=Io(),h=pd(t,{relative:o});return I.useCallback(p=>{if(JC(p,n)){p.preventDefault();let g=r!==void 0?r:Tc(c)===Tc(h);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,h,r,s,n,t,i,o,a])}function uR(t,e){e===void 0&&(e={});let n=I.useContext(nR);n==null&&Ce(!1);let{basename:r}=aR(Kf.useViewTransitionState),s=pd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ao(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ao(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Wf(s.pathname,o)!=null||Wf(s.pathname,i)!=null}let cR={data:""},dR=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||cR},hR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fR=/\/\*[^]*?\*\/|  +/g,Bv=/\n+/g,Ur=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?Ur(o,i):i+"{"+Ur(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ur(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ur.p?Ur.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Jn={},YE=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+YE(t[n]);return e}return t},pR=(t,e,n,r,s)=>{let i=YE(t),o=Jn[i]||(Jn[i]=(u=>{let c=0,h=11;for(;c<u.length;)h=101*h+u.charCodeAt(c++)>>>0;return"go"+h})(i));if(!Jn[o]){let u=i!==t?t:(c=>{let h,p,g=[{}];for(;h=hR.exec(c.replace(fR,""));)h[4]?g.shift():h[3]?(p=h[3].replace(Bv," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][h[1]]=h[2].replace(Bv," ").trim();return g[0]})(t);Jn[o]=Ur(s?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&Jn.g?Jn.g:null;return n&&(Jn.g=Jn[o]),((u,c,h,p)=>{p?c.data=c.data.replace(p,u):c.data.indexOf(u)===-1&&(c.data=h?u+c.data:c.data+u)})(Jn[o],e,r,a),o},mR=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":Ur(a,""):a===!1?"":a}return r+s+(o??"")},"");function md(t){let e=this||{},n=t.call?t(e.p):t;return pR(n.unshift?n.raw?mR(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,dR(e.target),e.g,e.o,e.k)}let XE,Gf,Qf;md.bind({g:1});let pr=md.bind({k:1});function gR(t,e,n,r){Ur.p=e,XE=t,Gf=n,Qf=r}function _s(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),u=a.className||s.className;n.p=Object.assign({theme:Gf&&Gf()},a),n.o=/ *go\d+/.test(u),a.className=md.apply(n,r)+(u?" "+u:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Qf&&c[0]&&Qf(a),XE(c,a)}return s}}var yR=t=>typeof t=="function",Ic=(t,e)=>yR(t)?t(e):t,vR=(()=>{let t=0;return()=>(++t).toString()})(),JE=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),_R=20,Tm="default",ZE=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return ZE(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Fu=[],eT={toasts:[],pausedAt:void 0,settings:{toastLimit:_R}},Mn={},tT=(t,e=Tm)=>{Mn[e]=ZE(Mn[e]||eT,t),Fu.forEach(([n,r])=>{n===e&&r(Mn[e])})},nT=t=>Object.keys(Mn).forEach(e=>tT(t,e)),wR=t=>Object.keys(Mn).find(e=>Mn[e].toasts.some(n=>n.id===t)),gd=(t=Tm)=>e=>{tT(e,t)},ER={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},TR=(t={},e=Tm)=>{let[n,r]=I.useState(Mn[e]||eT),s=I.useRef(Mn[e]);I.useEffect(()=>(s.current!==Mn[e]&&r(Mn[e]),Fu.push([e,r]),()=>{let o=Fu.findIndex(([a])=>a===e);o>-1&&Fu.splice(o,1)}),[e]);let i=n.toasts.map(o=>{var a,u,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||ER[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:i}},xR=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||vR()}),dl=t=>(e,n)=>{let r=xR(e,t,n);return gd(r.toasterId||wR(r.id))({type:2,toast:r}),r.id},Ke=(t,e)=>dl("blank")(t,e);Ke.error=dl("error");Ke.success=dl("success");Ke.loading=dl("loading");Ke.custom=dl("custom");Ke.dismiss=(t,e)=>{let n={type:3,toastId:t};e?gd(e)(n):nT(n)};Ke.dismissAll=t=>Ke.dismiss(void 0,t);Ke.remove=(t,e)=>{let n={type:4,toastId:t};e?gd(e)(n):nT(n)};Ke.removeAll=t=>Ke.remove(void 0,t);Ke.promise=(t,e,n)=>{let r=Ke.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?Ic(e.success,s):void 0;return i?Ke.success(i,{id:r,...n,...n==null?void 0:n.success}):Ke.dismiss(r),s}).catch(s=>{let i=e.error?Ic(e.error,s):void 0;i?Ke.error(i,{id:r,...n,...n==null?void 0:n.error}):Ke.dismiss(r)}),t};var IR=1e3,SR=(t,e="default")=>{let{toasts:n,pausedAt:r}=TR(t,e),s=I.useRef(new Map).current,i=I.useCallback((p,g=IR)=>{if(s.has(p))return;let w=setTimeout(()=>{s.delete(p),o({type:4,toastId:p})},g);s.set(p,w)},[]);I.useEffect(()=>{if(r)return;let p=Date.now(),g=n.map(w=>{if(w.duration===1/0)return;let C=(w.duration||0)+w.pauseDuration-(p-w.createdAt);if(C<0){w.visible&&Ke.dismiss(w.id);return}return setTimeout(()=>Ke.dismiss(w.id,e),C)});return()=>{g.forEach(w=>w&&clearTimeout(w))}},[n,r,e]);let o=I.useCallback(gd(e),[e]),a=I.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=I.useCallback((p,g)=>{o({type:1,toast:{id:p,height:g}})},[o]),c=I.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=I.useCallback((p,g)=>{let{reverseOrder:w=!1,gutter:C=8,defaultPosition:A}=g||{},R=n.filter(v=>(v.position||A)===(p.position||A)&&v.height),E=R.findIndex(v=>v.id===p.id),_=R.filter((v,b)=>b<E&&v.visible).length;return R.filter(v=>v.visible).slice(...w?[_+1]:[0,_]).reduce((v,b)=>v+(b.height||0)+C,0)},[n]);return I.useEffect(()=>{n.forEach(p=>{if(p.dismissed)i(p.id,p.removeDelay);else{let g=s.get(p.id);g&&(clearTimeout(g),s.delete(p.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:u,startPause:a,endPause:c,calculateOffset:h}}},kR=pr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CR=pr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,RR=pr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AR=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${kR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CR} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${RR} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,NR=pr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,PR=_s("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${NR} 1s linear infinite;
`,bR=pr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,DR=pr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,OR=_s("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${bR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${DR} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,LR=_s("div")`
  position: absolute;
`,MR=_s("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,VR=pr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jR=_s("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${VR} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,UR=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?I.createElement(jR,null,e):e:n==="blank"?null:I.createElement(MR,null,I.createElement(PR,{...r}),n!=="loading"&&I.createElement(LR,null,n==="error"?I.createElement(AR,{...r}):I.createElement(OR,{...r})))},FR=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,zR=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,BR="0%{opacity:0;} 100%{opacity:1;}",$R="0%{opacity:1;} 100%{opacity:0;}",qR=_s("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,WR=_s("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,HR=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=JE()?[BR,$R]:[FR(n),zR(n)];return{animation:e?`${pr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pr(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},KR=I.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?HR(t.position||e||"top-center",t.visible):{opacity:0},i=I.createElement(UR,{toast:t}),o=I.createElement(WR,{...t.ariaProps},Ic(t.message,t));return I.createElement(qR,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):I.createElement(I.Fragment,null,i,o))});gR(I.createElement);var GR=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=I.useCallback(o=>{if(o){let a=()=>{let u=o.getBoundingClientRect().height;r(t,u)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return I.createElement("div",{ref:i,className:e,style:n},s)},QR=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:JE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},YR=md`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vu=16,XR=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:u,handlers:c}=SR(n,i);return I.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:vu,left:vu,right:vu,bottom:vu,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},u.map(h=>{let p=h.position||e,g=c.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),w=QR(p,g);return I.createElement(GR,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?YR:"",style:w},h.type==="custom"?Ic(h.message,h):s?s(h):I.createElement(KR,{toast:h,position:p}))}))},G=Ke,$v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|a>>4;let g=(a&15)<<2|c>>6,w=c&63;u||(w=64,o||(g=64)),r.push(n[h],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||p==null)throw new ZR;const g=i<<2|a>>4;if(r.push(g),c!==64){const w=a<<4&240|c>>2;if(r.push(w),p!==64){const C=c<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eA=function(t){const e=rT(t);return sT.encodeByteArray(e,!0)},Sc=function(t){return eA(t).replace(/\./g,"")},iT=function(t){try{return sT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=()=>tA().__FIREBASE_DEFAULTS__,rA=()=>{if(typeof process>"u"||typeof $v>"u")return;const t=$v.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iT(t[1]);return e&&JSON.parse(e)},yd=()=>{try{return nA()||rA()||sA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oT=t=>{var e,n;return(n=(e=yd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aT=t=>{const e=oT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lT=()=>{var t;return(t=yd())===null||t===void 0?void 0:t.config},uT=t=>{var e;return(e=yd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sc(JSON.stringify(n)),Sc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function aA(){var t;const e=(t=yd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dA(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hA(){return!aA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fA(){try{return typeof indexedDB=="object"}catch{return!1}}function pA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="FirebaseError";class Kn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mA,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Kn(s,a,r)}}function gA(t,e){return t.replace(yA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yA=/\{\$([^}]+)}/g;function vA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function kc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qv(i)&&qv(o)){if(!kc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function sa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _A(t,e){const n=new wA(t,e);return n.subscribe.bind(n)}class wA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ph),s.error===void 0&&(s.error=Ph),s.complete===void 0&&(s.complete=Ph);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IA(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xA(t){return t===Os?void 0:t}function IA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const kA={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},CA=re.INFO,RA={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},AA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=RA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=CA,this._logHandler=AA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const NA=(t,e)=>e.some(n=>t instanceof n);let Wv,Hv;function PA(){return Wv||(Wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bA(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dT=new WeakMap,Yf=new WeakMap,hT=new WeakMap,bh=new WeakMap,Im=new WeakMap;function DA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ss(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dT.set(n,t)}).catch(()=>{}),Im.set(e,t),e}function OA(t){if(Yf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yf.set(t,e)}let Xf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LA(t){Xf=t(Xf)}function MA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dh(this),e,...n);return hT.set(r,e.sort?e.sort():[e]),ss(r)}:bA().includes(t)?function(...e){return t.apply(Dh(this),e),ss(dT.get(this))}:function(...e){return ss(t.apply(Dh(this),e))}}function VA(t){return typeof t=="function"?MA(t):(t instanceof IDBTransaction&&OA(t),NA(t,PA())?new Proxy(t,Xf):t)}function ss(t){if(t instanceof IDBRequest)return DA(t);if(bh.has(t))return bh.get(t);const e=VA(t);return e!==t&&(bh.set(t,e),Im.set(e,t)),e}const Dh=t=>Im.get(t);function jA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ss(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ss(o.result),u.oldVersion,u.newVersion,ss(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const UA=["get","getKey","getAll","getAllKeys","count"],FA=["put","add","delete","clear"],Oh=new Map;function Kv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=FA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||UA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return Oh.set(e,i),i}LA(t=>({...t,get:(e,n,r)=>Kv(e,n)||t.get(e,n,r),has:(e,n)=>!!Kv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",Gv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new xm("@firebase/app"),$A="@firebase/app-compat",qA="@firebase/analytics-compat",WA="@firebase/analytics",HA="@firebase/app-check-compat",KA="@firebase/app-check",GA="@firebase/auth",QA="@firebase/auth-compat",YA="@firebase/database",XA="@firebase/data-connect",JA="@firebase/database-compat",ZA="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",nN="@firebase/installations-compat",rN="@firebase/messaging",sN="@firebase/messaging-compat",iN="@firebase/performance",oN="@firebase/performance-compat",aN="@firebase/remote-config",lN="@firebase/remote-config-compat",uN="@firebase/storage",cN="@firebase/storage-compat",dN="@firebase/firestore",hN="@firebase/vertexai-preview",fN="@firebase/firestore-compat",pN="firebase",mN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="[DEFAULT]",gN={[Jf]:"fire-core",[$A]:"fire-core-compat",[WA]:"fire-analytics",[qA]:"fire-analytics-compat",[KA]:"fire-app-check",[HA]:"fire-app-check-compat",[GA]:"fire-auth",[QA]:"fire-auth-compat",[YA]:"fire-rtdb",[XA]:"fire-data-connect",[JA]:"fire-rtdb-compat",[ZA]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[nN]:"fire-iid-compat",[rN]:"fire-fcm",[sN]:"fire-fcm-compat",[iN]:"fire-perf",[oN]:"fire-perf-compat",[aN]:"fire-rc",[lN]:"fire-rc-compat",[uN]:"fire-gcs",[cN]:"fire-gcs-compat",[dN]:"fire-fst",[fN]:"fire-fst-compat",[hN]:"fire-vertex","fire-js":"fire-js",[pN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,yN=new Map,ep=new Map;function Qv(t,e){try{t.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qs(t){const e=t.name;if(ep.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,t);for(const n of Cc.values())Qv(n,t);for(const n of yN.values())Qv(n,t);return!0}function vd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},is=new hl("app","Firebase",vN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=mN;function fT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw is.create("bad-app-name",{appName:String(s)});if(n||(n=lT()),!n)throw is.create("no-options");const i=Cc.get(s);if(i){if(kc(n,i.options)&&kc(r,i.config))return i;throw is.create("duplicate-app",{appName:s})}const o=new SA(s);for(const u of ep.values())o.addComponent(u);const a=new _N(n,r,o);return Cc.set(s,a),a}function Sm(t=Zf){const e=Cc.get(t);if(!e&&t===Zf&&lT())return fT();if(!e)throw is.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let s=(r=gN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(a.join(" "));return}Qs(new us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",EN=1,Ha="firebase-heartbeat-store";let Lh=null;function pT(){return Lh||(Lh=jA(wN,EN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw is.create("idb-open",{originalErrorMessage:t.message})})),Lh}async function TN(t){try{const n=(await pT()).transaction(Ha),r=await n.objectStore(Ha).get(mT(t));return await n.done,r}catch(e){if(e instanceof Kn)mr.warn(e.message);else{const n=is.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function Yv(t,e){try{const r=(await pT()).transaction(Ha,"readwrite");await r.objectStore(Ha).put(e,mT(t)),await r.done}catch(n){if(n instanceof Kn)mr.warn(n.message);else{const r=is.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(r.message)}}}function mT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=1024,IN=30*24*60*60*1e3;class SN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Xv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=IN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Xv(),{heartbeatsToSend:r,unsentEntries:s}=kN(this._heartbeatsCache.heartbeats),i=Sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mr.warn(n),""}}}function Xv(){return new Date().toISOString().substring(0,10)}function kN(t,e=xN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Jv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Jv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fA()?pA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Jv(t){return Sc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){Qs(new us("platform-logger",e=>new zA(e),"PRIVATE")),Qs(new us("heartbeat",e=>new SN(e),"PRIVATE")),zn(Jf,Gv,t),zn(Jf,Gv,"esm2017"),zn("fire-js","")}RN("");function km(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function gT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AN=gT,yT=new hl("auth","Firebase",gT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=new xm("@firebase/auth");function NN(t,...e){Rc.logLevel<=re.WARN&&Rc.warn(`Auth (${oi}): ${t}`,...e)}function zu(t,...e){Rc.logLevel<=re.ERROR&&Rc.error(`Auth (${oi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw Cm(t,...e)}function Bn(t,...e){return Cm(t,...e)}function vT(t,e,n){const r=Object.assign(Object.assign({},AN()),{[e]:n});return new hl("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return vT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yT.create(t,...e)}function Q(t,e,...n){if(!t)throw Cm(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zu(e),new Error(e)}function gr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PN(){return Zv()==="http:"||Zv()==="https:"}function Zv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PN()||uA()||"connection"in navigator)?navigator.onLine:!0}function DN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,gr(n>e,"Short delay should be less than long delay!"),this.isMobile=oA()||cA()}get(){return bN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){gr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new pl(3e4,6e4);function ws(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function xr(t,e,n,r,s={}){return wT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=fl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return lA()||(c.referrerPolicy="no-referrer"),_T.fetch()(ET(t,t.config.apiHost,n,a),c)})}async function wT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ON),e);try{const s=new VN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw _u(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw _u(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vT(t,h,c);Sn(t,h)}}catch(s){if(s instanceof Kn)throw s;Sn(t,"network-request-failed",{message:String(s)})}}async function ml(t,e,n,r,s={}){const i=await xr(t,e,n,r,s);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ET(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Rm(t.config,s):`${t.config.apiScheme}://${s}`}function MN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bn(this.auth,"network-request-failed")),LN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Bn(t,e,r);return s.customData._tokenResponse=n,s}function e_(t){return t!==void 0&&t.enterprise!==void 0}class jN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function UN(t,e){return xr(t,"GET","/v2/recaptchaConfig",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){return xr(t,"POST","/v1/accounts:delete",e)}async function TT(t,e){return xr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zN(t,e=!1){const n=xe(t),r=await n.getIdToken(e),s=Am(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:va(Mh(s.auth_time)),issuedAtTime:va(Mh(s.iat)),expirationTime:va(Mh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mh(t){return Number(t)*1e3}function Am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const s=iT(n);return s?JSON.parse(s):(zu("Failed to decode base64 JWT payload"),null)}catch(s){return zu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function t_(t){const e=Am(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kn&&BN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t){var e;const n=t.auth,r=await t.getIdToken(),s=await lo(t,TT(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?xT(i.providerUserInfo):[],a=WN(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new np(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function qN(t){const e=xe(t);await Ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xT(t){return t.map(e=>{var{providerId:n}=e,r=km(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){const n=await wT(t,{},async()=>{const r=fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=ET(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_T.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KN(t,e){return xr(t,"POST","/v2/accounts:revokeToken",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=t_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await HN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Qi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qi,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=km(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $N(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new np(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await lo(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zN(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ac(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await lo(this,FN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:v,emailVerified:b,isAnonymous:V,providerData:D,stsTokenManager:x}=n;Q(v&&x,e,"internal-error");const y=Qi.fromJSON(this.name,x);Q(typeof v=="string",e,"internal-error"),Dr(p,e.name),Dr(g,e.name),Q(typeof b=="boolean",e,"internal-error"),Q(typeof V=="boolean",e,"internal-error"),Dr(w,e.name),Dr(C,e.name),Dr(A,e.name),Dr(R,e.name),Dr(E,e.name),Dr(_,e.name);const S=new sr({uid:v,auth:e,email:g,emailVerified:b,displayName:p,isAnonymous:V,photoURL:C,phoneNumber:w,tenantId:A,stsTokenManager:y,createdAt:E,lastLoginAt:_});return D&&Array.isArray(D)&&(S.providerData=D.map(k=>Object.assign({},k))),R&&(S._redirectEventId=R),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Qi;s.updateFromServerResponse(n);const i=new sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ac(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Qi;a.updateFromIdToken(r);const u=new sr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new np(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;function ir(t){gr(t instanceof Function,"Expected a class definition");let e=n_.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,n_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IT.type="NONE";const r_=IT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t,e,n){return`firebase:${t}:${e}:${n}`}class Yi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yi(ir(r_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||ir(r_);const o=Bu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const p=sr._fromJSON(e,h);c!==i&&(a=p),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Yi(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Yi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ST(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NT(e))return"Blackberry";if(PT(e))return"Webos";if(kT(e))return"Safari";if((e.includes("chrome/")||CT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ST(t=kt()){return/firefox\//i.test(t)}function kT(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CT(t=kt()){return/crios\//i.test(t)}function RT(t=kt()){return/iemobile/i.test(t)}function AT(t=kt()){return/android/i.test(t)}function NT(t=kt()){return/blackberry/i.test(t)}function PT(t=kt()){return/webos/i.test(t)}function Nm(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GN(t=kt()){var e;return Nm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QN(){return dA()&&document.documentMode===10}function bT(t=kt()){return Nm(t)||AT(t)||PT(t)||NT(t)||/windows phone/i.test(t)||RT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e=[]){let n;switch(t){case"Browser":n=s_(kt());break;case"Worker":n=`${s_(kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e={}){return xr(t,"GET","/v2/passwordPolicy",ws(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=6;class ZN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:JN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new YN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Yi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TT(this,{idToken:e}),r=await sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ac(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(lr(this));const n=e?xe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XN(this),n=new ZN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Yi.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&NN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ai(t){return xe(t)}class i_{constructor(e){this.auth=e,this.observer=null,this.addObserver=_A(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tP(t){_d=t}function OT(t){return _d.loadJS(t)}function nP(){return _d.recaptchaEnterpriseScript}function rP(){return _d.gapiScript}function sP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const iP="recaptcha-enterprise",oP="NO_RECAPTCHA";class aP{constructor(e){this.type=iP,this.auth=ai(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{UN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new jN(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;e_(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(oP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&e_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=nP();u.length!==0&&(u+=a),OT(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function o_(t,e,n,r=!1){const s=new aP(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function rp(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await o_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await o_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(t,e){const n=vd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(kc(i,e??{}))return s;Sn(s,"already-initialized")}return n.initialize({options:e})}function uP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cP(t,e,n){const r=ai(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=LT(e),{host:o,port:a}=dP(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),hP()}function LT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dP(t){const e=LT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:a_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:a_(o)}}}function a_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function fP(t,e){return xr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(t,e){return ml(t,"POST","/v1/accounts:signInWithPassword",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}async function gP(t,e){return ml(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Pm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ka(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ka(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rp(e,n,"signInWithPassword",pP);case"emailLink":return mP(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rp(e,r,"signUpPassword",fP);case"emailLink":return gP(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t,e){return ml(t,"POST","/v1/accounts:signInWithIdp",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="http://localhost";class Ys extends Pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=km(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ys(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xi(e,n)}buildRequest(){const e={requestUri:yP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _P(t){const e=ra(sa(t)).link,n=e?ra(sa(e)).deep_link_id:null,r=ra(sa(t)).deep_link_id;return(r?ra(sa(r)).link:null)||r||n||e||t}class bm{constructor(e){var n,r,s,i,o,a;const u=ra(sa(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=vP((s=u.mode)!==null&&s!==void 0?s:null);Q(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=_P(e);try{return new bm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,n){return Ka._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bm.parseLink(n);return Q(r,"argument-error"),Ka._fromEmailAndCode(e,r.code,r.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends MT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends gl{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ys._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends gl{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends gl{constructor(){super("twitter.com")}static credential(e,n){return Ys._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.TWITTER_SIGN_IN_METHOD="twitter.com";$r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e){return ml(t,"POST","/v1/accounts:signUp",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await sr._fromIdTokenResponse(e,r,s),o=l_(r);return new Xs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=l_(r);return new Xs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function l_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends Kn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nc(e,n,r,s)}}function VT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nc._fromErrorAndOperation(t,i,e,r):i})}async function EP(t,e,n=!1){const r=await lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(t,e,n=!1){const{auth:r}=t;if(Vn(r.app))return Promise.reject(lr(r));const s="reauthenticate";try{const i=await lo(t,VT(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=Am(i.idToken);Q(o,r,"internal-error");const{sub:a}=o;return Q(t.uid===a,r,"user-mismatch"),Xs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(t,e,n=!1){if(Vn(t.app))return Promise.reject(lr(t));const r="signIn",s=await VT(t,r,e),i=await Xs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function xP(t,e){return jT(ai(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(t){const e=ai(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IP(t,e,n){if(Vn(t.app))return Promise.reject(lr(t));const r=ai(t),o=await rp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&UT(t),u}),a=await Xs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function SP(t,e,n){return Vn(t.app)?Promise.reject(lr(t)):xP(xe(t),So.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&UT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(t,e){return xr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=xe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await lo(r,kP(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function RP(t,e,n,r){return xe(t).onIdTokenChanged(e,n,r)}function AP(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}function NP(t,e,n,r){return xe(t).onAuthStateChanged(e,n,r)}function PP(t){return xe(t).signOut()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=1e3,DP=10;class zT extends FT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,DP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zT.type="LOCAL";const OP=zT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT extends FT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BT.type="SESSION";const $T=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await LP(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Dm("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return window}function VP(t){$n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(){return typeof $n().WorkerGlobalScope<"u"&&typeof $n().importScripts=="function"}async function jP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FP(){return qT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebaseLocalStorageDb",zP=1,bc="firebaseLocalStorage",HT="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ed(t,e){return t.transaction([bc],e?"readwrite":"readonly").objectStore(bc)}function BP(){const t=indexedDB.deleteDatabase(WT);return new yl(t).toPromise()}function sp(){const t=indexedDB.open(WT,zP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bc,{keyPath:HT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bc)?e(r):(r.close(),await BP(),e(await sp()))})})}async function u_(t,e,n){const r=Ed(t,!0).put({[HT]:e,value:n});return new yl(r).toPromise()}async function $P(t,e){const n=Ed(t,!1).get(e),r=await new yl(n).toPromise();return r===void 0?null:r.value}function c_(t,e){const n=Ed(t,!0).delete(e);return new yl(n).toPromise()}const qP=800,WP=3;class KT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(FP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jP(),!this.activeServiceWorker)return;this.sender=new MP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sp();return await u_(e,Pc,"1"),await c_(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>u_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$P(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>c_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ed(s,!1).getAll();return new yl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KT.type="LOCAL";const HP=KT;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t,e){return e?ir(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends Pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GP(t){return jT(t.auth,new Om(t),t.bypassAuthState)}function QP(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),TP(n,new Om(t),t.bypassAuthState)}async function YP(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),EP(n,new Om(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GP;case"linkViaPopup":case"linkViaRedirect":return YP;case"reauthViaPopup":case"reauthViaRedirect":return QP;default:Sn(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new pl(2e3,1e4);class Bi extends GT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Bi.currentPopupAction&&Bi.currentPopupAction.cancel(),Bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=Dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XP.get())};e()}}Bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="pendingRedirect",$u=new Map;class ZP extends GT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const r=await eb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eb(t,e){const n=rb(e),r=nb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function tb(t,e){$u.set(t._key(),e)}function nb(t){return ir(t._redirectPersistence)}function rb(t){return Bu(JP,t.config.apiKey,t.name)}async function sb(t,e,n=!1){if(Vn(t.app))return Promise.reject(lr(t));const r=ai(t),s=KP(r,e),o=await new ZP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=10*60*1e3;class ob{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ab(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ib&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ab(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(t,e={}){return xr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cb=/^https?/;async function db(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lb(t);for(const n of e)try{if(hb(n))return}catch{}Sn(t,"unauthorized-domain")}function hb(t){const e=tp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cb.test(n))return!1;if(ub.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new pl(3e4,6e4);function h_(){const t=$n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pb(t){return new Promise((e,n)=>{var r,s,i;function o(){h_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h_(),n(Bn(t,"network-request-failed"))},timeout:fb.get()})}if(!((s=(r=$n().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=$n().gapi)===null||i===void 0)&&i.load)o();else{const a=sP("iframefcb");return $n()[a]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},OT(`${rP()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw qu=null,e})}let qu=null;function mb(t){return qu=qu||pb(t),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=new pl(5e3,15e3),yb="__/auth/iframe",vb="emulator/auth/iframe",_b={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eb(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rm(e,vb):`https://${t.config.authDomain}/${yb}`,r={apiKey:e.apiKey,appName:t.name,v:oi},s=wb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${fl(r).slice(1)}`}async function Tb(t){const e=await mb(t),n=$n().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:Eb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_b,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Bn(t,"network-request-failed"),a=$n().setTimeout(()=>{i(o)},gb.get());function u(){$n().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ib=500,Sb=600,kb="_blank",Cb="http://localhost";class f_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rb(t,e,n,r=Ib,s=Sb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},xb),{width:r.toString(),height:s.toString(),top:i,left:o}),c=kt().toLowerCase();n&&(a=CT(c)?kb:n),ST(c)&&(e=e||Cb,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[w,C])=>`${g}${w}=${C},`,"");if(GN(c)&&a!=="_self")return Ab(e||"",a),new f_(null);const p=window.open(e||"",a,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new f_(p)}function Ab(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="__/auth/handler",Pb="emulator/auth/handler",bb=encodeURIComponent("fac");async function p_(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oi,eventId:s};if(e instanceof MT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof gl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${bb}=${encodeURIComponent(u)}`:"";return`${Db(t)}?${fl(a).slice(1)}${c}`}function Db({config:t}){return t.emulator?Rm(t,Pb):`https://${t.authDomain}/${Nb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="webStorageSupport";class Ob{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$T,this._completeRedirectFn=sb,this._overrideRedirectResult=tb}async _openPopup(e,n,r,s){var i;gr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await p_(e,n,r,tp(),s);return Rb(e,o,Dm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await p_(e,n,r,tp(),s);return VP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(gr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Tb(e),r=new ob(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vh,{type:Vh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Vh];o!==void 0&&n(!!o),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=db(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bT()||kT()||Nm()}}const Lb=Ob;var m_="@firebase/auth",g_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jb(t){Qs(new us("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DT(t)},c=new eP(r,s,i,u);return uP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qs(new us("auth-internal",e=>{const n=ai(e.getProvider("auth").getImmediate());return(r=>new Mb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(m_,g_,Vb(t)),zn(m_,g_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=5*60,Fb=uT("authIdTokenMaxAge")||Ub;let y_=null;const zb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fb)return;const s=n==null?void 0:n.token;y_!==s&&(y_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Bb(t=Sm()){const e=vd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lP(t,{popupRedirectResolver:Lb,persistence:[HP,OP,$T]}),r=uT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=zb(i.toString());AP(n,o,()=>o(n.currentUser)),RP(n,a=>o(a))}}const s=oT("auth");return s&&cP(n,`http://${s}`),n}function $b(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Bn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$b().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jb("Browser");var v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,YT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function S(){}S.prototype=y.prototype,x.D=y.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(k,P,O){for(var N=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)N[Le-2]=arguments[Le];return y.prototype[P].apply(k,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,S){S||(S=0);var k=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)k[P]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(P=0;16>P;++P)k[P]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=x.g[0],S=x.g[1],P=x.g[2];var O=x.g[3],N=y+(O^S&(P^O))+k[0]+3614090360&4294967295;y=S+(N<<7&4294967295|N>>>25),N=O+(P^y&(S^P))+k[1]+3905402710&4294967295,O=y+(N<<12&4294967295|N>>>20),N=P+(S^O&(y^S))+k[2]+606105819&4294967295,P=O+(N<<17&4294967295|N>>>15),N=S+(y^P&(O^y))+k[3]+3250441966&4294967295,S=P+(N<<22&4294967295|N>>>10),N=y+(O^S&(P^O))+k[4]+4118548399&4294967295,y=S+(N<<7&4294967295|N>>>25),N=O+(P^y&(S^P))+k[5]+1200080426&4294967295,O=y+(N<<12&4294967295|N>>>20),N=P+(S^O&(y^S))+k[6]+2821735955&4294967295,P=O+(N<<17&4294967295|N>>>15),N=S+(y^P&(O^y))+k[7]+4249261313&4294967295,S=P+(N<<22&4294967295|N>>>10),N=y+(O^S&(P^O))+k[8]+1770035416&4294967295,y=S+(N<<7&4294967295|N>>>25),N=O+(P^y&(S^P))+k[9]+2336552879&4294967295,O=y+(N<<12&4294967295|N>>>20),N=P+(S^O&(y^S))+k[10]+4294925233&4294967295,P=O+(N<<17&4294967295|N>>>15),N=S+(y^P&(O^y))+k[11]+2304563134&4294967295,S=P+(N<<22&4294967295|N>>>10),N=y+(O^S&(P^O))+k[12]+1804603682&4294967295,y=S+(N<<7&4294967295|N>>>25),N=O+(P^y&(S^P))+k[13]+4254626195&4294967295,O=y+(N<<12&4294967295|N>>>20),N=P+(S^O&(y^S))+k[14]+2792965006&4294967295,P=O+(N<<17&4294967295|N>>>15),N=S+(y^P&(O^y))+k[15]+1236535329&4294967295,S=P+(N<<22&4294967295|N>>>10),N=y+(P^O&(S^P))+k[1]+4129170786&4294967295,y=S+(N<<5&4294967295|N>>>27),N=O+(S^P&(y^S))+k[6]+3225465664&4294967295,O=y+(N<<9&4294967295|N>>>23),N=P+(y^S&(O^y))+k[11]+643717713&4294967295,P=O+(N<<14&4294967295|N>>>18),N=S+(O^y&(P^O))+k[0]+3921069994&4294967295,S=P+(N<<20&4294967295|N>>>12),N=y+(P^O&(S^P))+k[5]+3593408605&4294967295,y=S+(N<<5&4294967295|N>>>27),N=O+(S^P&(y^S))+k[10]+38016083&4294967295,O=y+(N<<9&4294967295|N>>>23),N=P+(y^S&(O^y))+k[15]+3634488961&4294967295,P=O+(N<<14&4294967295|N>>>18),N=S+(O^y&(P^O))+k[4]+3889429448&4294967295,S=P+(N<<20&4294967295|N>>>12),N=y+(P^O&(S^P))+k[9]+568446438&4294967295,y=S+(N<<5&4294967295|N>>>27),N=O+(S^P&(y^S))+k[14]+3275163606&4294967295,O=y+(N<<9&4294967295|N>>>23),N=P+(y^S&(O^y))+k[3]+4107603335&4294967295,P=O+(N<<14&4294967295|N>>>18),N=S+(O^y&(P^O))+k[8]+1163531501&4294967295,S=P+(N<<20&4294967295|N>>>12),N=y+(P^O&(S^P))+k[13]+2850285829&4294967295,y=S+(N<<5&4294967295|N>>>27),N=O+(S^P&(y^S))+k[2]+4243563512&4294967295,O=y+(N<<9&4294967295|N>>>23),N=P+(y^S&(O^y))+k[7]+1735328473&4294967295,P=O+(N<<14&4294967295|N>>>18),N=S+(O^y&(P^O))+k[12]+2368359562&4294967295,S=P+(N<<20&4294967295|N>>>12),N=y+(S^P^O)+k[5]+4294588738&4294967295,y=S+(N<<4&4294967295|N>>>28),N=O+(y^S^P)+k[8]+2272392833&4294967295,O=y+(N<<11&4294967295|N>>>21),N=P+(O^y^S)+k[11]+1839030562&4294967295,P=O+(N<<16&4294967295|N>>>16),N=S+(P^O^y)+k[14]+4259657740&4294967295,S=P+(N<<23&4294967295|N>>>9),N=y+(S^P^O)+k[1]+2763975236&4294967295,y=S+(N<<4&4294967295|N>>>28),N=O+(y^S^P)+k[4]+1272893353&4294967295,O=y+(N<<11&4294967295|N>>>21),N=P+(O^y^S)+k[7]+4139469664&4294967295,P=O+(N<<16&4294967295|N>>>16),N=S+(P^O^y)+k[10]+3200236656&4294967295,S=P+(N<<23&4294967295|N>>>9),N=y+(S^P^O)+k[13]+681279174&4294967295,y=S+(N<<4&4294967295|N>>>28),N=O+(y^S^P)+k[0]+3936430074&4294967295,O=y+(N<<11&4294967295|N>>>21),N=P+(O^y^S)+k[3]+3572445317&4294967295,P=O+(N<<16&4294967295|N>>>16),N=S+(P^O^y)+k[6]+76029189&4294967295,S=P+(N<<23&4294967295|N>>>9),N=y+(S^P^O)+k[9]+3654602809&4294967295,y=S+(N<<4&4294967295|N>>>28),N=O+(y^S^P)+k[12]+3873151461&4294967295,O=y+(N<<11&4294967295|N>>>21),N=P+(O^y^S)+k[15]+530742520&4294967295,P=O+(N<<16&4294967295|N>>>16),N=S+(P^O^y)+k[2]+3299628645&4294967295,S=P+(N<<23&4294967295|N>>>9),N=y+(P^(S|~O))+k[0]+4096336452&4294967295,y=S+(N<<6&4294967295|N>>>26),N=O+(S^(y|~P))+k[7]+1126891415&4294967295,O=y+(N<<10&4294967295|N>>>22),N=P+(y^(O|~S))+k[14]+2878612391&4294967295,P=O+(N<<15&4294967295|N>>>17),N=S+(O^(P|~y))+k[5]+4237533241&4294967295,S=P+(N<<21&4294967295|N>>>11),N=y+(P^(S|~O))+k[12]+1700485571&4294967295,y=S+(N<<6&4294967295|N>>>26),N=O+(S^(y|~P))+k[3]+2399980690&4294967295,O=y+(N<<10&4294967295|N>>>22),N=P+(y^(O|~S))+k[10]+4293915773&4294967295,P=O+(N<<15&4294967295|N>>>17),N=S+(O^(P|~y))+k[1]+2240044497&4294967295,S=P+(N<<21&4294967295|N>>>11),N=y+(P^(S|~O))+k[8]+1873313359&4294967295,y=S+(N<<6&4294967295|N>>>26),N=O+(S^(y|~P))+k[15]+4264355552&4294967295,O=y+(N<<10&4294967295|N>>>22),N=P+(y^(O|~S))+k[6]+2734768916&4294967295,P=O+(N<<15&4294967295|N>>>17),N=S+(O^(P|~y))+k[13]+1309151649&4294967295,S=P+(N<<21&4294967295|N>>>11),N=y+(P^(S|~O))+k[4]+4149444226&4294967295,y=S+(N<<6&4294967295|N>>>26),N=O+(S^(y|~P))+k[11]+3174756917&4294967295,O=y+(N<<10&4294967295|N>>>22),N=P+(y^(O|~S))+k[2]+718787259&4294967295,P=O+(N<<15&4294967295|N>>>17),N=S+(O^(P|~y))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,y){y===void 0&&(y=x.length);for(var S=y-this.blockSize,k=this.B,P=this.h,O=0;O<y;){if(P==0)for(;O<=S;)s(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<y;)if(k[P++]=x.charCodeAt(O++),P==this.blockSize){s(this,k),P=0;break}}else for(;O<y;)if(k[P++]=x[O++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;var S=8*this.o;for(y=x.length-8;y<x.length;++y)x[y]=S&255,S/=256;for(this.u(x),x=Array(16),y=S=0;4>y;++y)for(var k=0;32>k;k+=8)x[S++]=this.g[y]>>>k&255;return x};function i(x,y){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=y(x)}function o(x,y){this.h=y;for(var S=[],k=!0,P=x.length-1;0<=P;P--){var O=x[P]|0;k&&O==y||(S[P]=O,k=!1)}this.g=S}var a={};function u(x){return-128<=x&&128>x?i(x,function(y){return new o([y|0],0>y?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return p;if(0>x)return R(c(-x));for(var y=[],S=1,k=0;x>=S;k++)y[k]=x/S|0,S*=4294967296;return new o(y,0)}function h(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return R(h(x.substring(1),y));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(y,8)),k=p,P=0;P<x.length;P+=8){var O=Math.min(8,x.length-P),N=parseInt(x.substring(P,P+O),y);8>O?(O=c(Math.pow(y,O)),k=k.j(O).add(c(N))):(k=k.j(S),k=k.add(c(N)))}return k}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-R(this).m();for(var x=0,y=1,S=0;S<this.g.length;S++){var k=this.i(S);x+=(0<=k?k:4294967296+k)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(A(this))return"-"+R(this).toString(x);for(var y=c(Math.pow(x,6)),S=this,k="";;){var P=b(S,y).g;S=E(S,P.j(y));var O=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=P,C(S))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(var y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function A(x){return x.h==-1}t.l=function(x){return x=E(this,x),A(x)?-1:C(x)?0:1};function R(x){for(var y=x.g.length,S=[],k=0;k<y;k++)S[k]=~x.g[k];return new o(S,~x.h).add(g)}t.abs=function(){return A(this)?R(this):this},t.add=function(x){for(var y=Math.max(this.g.length,x.g.length),S=[],k=0,P=0;P<=y;P++){var O=k+(this.i(P)&65535)+(x.i(P)&65535),N=(O>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);k=N>>>16,O&=65535,N&=65535,S[P]=N<<16|O}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(x,y){return x.add(R(y))}t.j=function(x){if(C(this)||C(x))return p;if(A(this))return A(x)?R(this).j(R(x)):R(R(this).j(x));if(A(x))return R(this.j(R(x)));if(0>this.l(w)&&0>x.l(w))return c(this.m()*x.m());for(var y=this.g.length+x.g.length,S=[],k=0;k<2*y;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<x.g.length;P++){var O=this.i(k)>>>16,N=this.i(k)&65535,Le=x.i(P)>>>16,Nn=x.i(P)&65535;S[2*k+2*P]+=N*Nn,_(S,2*k+2*P),S[2*k+2*P+1]+=O*Nn,_(S,2*k+2*P+1),S[2*k+2*P+1]+=N*Le,_(S,2*k+2*P+1),S[2*k+2*P+2]+=O*Le,_(S,2*k+2*P+2)}for(k=0;k<y;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=y;k<2*y;k++)S[k]=0;return new o(S,0)};function _(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function v(x,y){this.g=x,this.h=y}function b(x,y){if(C(y))throw Error("division by zero");if(C(x))return new v(p,p);if(A(x))return y=b(R(x),y),new v(R(y.g),R(y.h));if(A(y))return y=b(x,R(y)),new v(R(y.g),y.h);if(30<x.g.length){if(A(x)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var S=g,k=y;0>=k.l(x);)S=V(S),k=V(k);var P=D(S,1),O=D(k,1);for(k=D(k,2),S=D(S,2);!C(k);){var N=O.add(k);0>=N.l(x)&&(P=P.add(S),O=N),k=D(k,1),S=D(S,1)}return y=E(x,P.j(y)),new v(P,y)}for(P=p;0<=x.l(y);){for(S=Math.max(1,Math.floor(x.m()/y.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=c(S),N=O.j(y);A(N)||0<N.l(x);)S-=k,O=c(S),N=O.j(y);C(O)&&(O=g),P=P.add(O),x=E(x,N)}return new v(P,x)}t.A=function(x){return b(this,x).h},t.and=function(x){for(var y=Math.max(this.g.length,x.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)&x.i(k);return new o(S,this.h&x.h)},t.or=function(x){for(var y=Math.max(this.g.length,x.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)|x.i(k);return new o(S,this.h|x.h)},t.xor=function(x){for(var y=Math.max(this.g.length,x.g.length),S=[],k=0;k<y;k++)S[k]=this.i(k)^x.i(k);return new o(S,this.h^x.h)};function V(x){for(var y=x.g.length+1,S=[],k=0;k<y;k++)S[k]=x.i(k)<<1|x.i(k-1)>>>31;return new o(S,x.h)}function D(x,y){var S=y>>5;y%=32;for(var k=x.g.length-S,P=[],O=0;O<k;O++)P[O]=0<y?x.i(O+S)>>>y|x.i(O+S+1)<<32-y:x.i(O+S);return new o(P,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,YT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Bs=o}).apply(typeof v_<"u"?v_:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XT,ia,JT,Wu,ip,ZT,ex,tx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var m=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in m))break e;m=m[L]}l=l[l.length-1],T=m[l],d=d(T),d!=T&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var m=0,T=!1,L={next:function(){if(!T&&m<l.length){var M=m++;return{value:d(M,l[M]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function c(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,m){return l.call.apply(l.bind,arguments)}function p(l,d,m){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function g(l,d,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function w(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function C(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(T,L,M){for(var z=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)z[pe-2]=arguments[pe];return d.prototype[L].apply(T,z)}}function A(l){const d=l.length;if(0<d){const m=Array(d);for(let T=0;T<d;T++)m[T]=l[T];return m}return[]}function R(l,d){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(u(T)){const L=l.length||0,M=T.length||0;l.length=L+M;for(let z=0;z<M;z++)l[L+z]=T[z]}else l.push(T)}}class E{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(l){return/^[\s\xa0]*$/.test(l)}function v(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var V=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function D(l,d,m){for(const T in l)d.call(m,l[T],T,l)}function x(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function y(l){const d={};for(const m in l)d[m]=l[m];return d}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let m,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(m in T)l[m]=T[m];for(let M=0;M<S.length;M++)m=S[M],Object.prototype.hasOwnProperty.call(T,m)&&(l[m]=T[m])}}function P(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function O(l){a.setTimeout(()=>{throw l},0)}function N(){var l=K;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Le{constructor(){this.h=this.g=null}add(d,m){const T=Nn.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var Nn=new E(()=>new Ir,l=>l.reset());class Ir{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let qe,B=!1,K=new Le,X=()=>{const l=a.Promise.resolve(void 0);qe=()=>{l.then(ge)}};var ge=()=>{for(var l;l=N();){try{l.h.call(l.g)}catch(m){O(m)}var d=Nn;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}B=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Vt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return l}();function en(l,d){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(V){e:{try{b(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Me[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&en.aa.h.call(this)}}C(en,fe);var Me={2:"touch",3:"pen",4:"mouse"};en.prototype.h=function(){en.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Pl=0;function bl(l,d,m,T,L){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=L,this.key=++Pl,this.da=this.fa=!1}function ft(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Sr(l){this.src=l,this.g={},this.h=0}Sr.prototype.add=function(l,d,m,T,L){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var z=pi(l,d,T,L);return-1<z?(d=l[z],m||(d.fa=!1)):(d=new bl(d,this.src,M,!!T,L),d.fa=m,l.push(d)),d};function hn(l,d){var m=d.type;if(m in l.g){var T=l.g[m],L=Array.prototype.indexOf.call(T,d,void 0),M;(M=0<=L)&&Array.prototype.splice.call(T,L,1),M&&(ft(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function pi(l,d,m,T){for(var L=0;L<l.length;++L){var M=l[L];if(!M.da&&M.listener==d&&M.capture==!!m&&M.ha==T)return L}return-1}var fn="closure_lm_"+(1e6*Math.random()|0),kr={};function Gn(l,d,m,T,L){if(Array.isArray(d)){for(var M=0;M<d.length;M++)Gn(l,d[M],m,T,L);return null}return m=Ll(m),l&&l[tn]?l.K(d,m,c(T)?!!T.capture:!1,L):Dl(l,d,m,!1,T,L)}function Dl(l,d,m,T,L,M){if(!d)throw Error("Invalid event type");var z=c(L)?!!L.capture:!!L,pe=yi(l);if(pe||(l[fn]=pe=new Sr(l)),m=pe.add(d,m,T,z,M),m.proxy)return m;if(T=Ol(),m.proxy=T,T.src=l,T.listener=m,l.addEventListener)Vt||(L=z),L===void 0&&(L=!1),l.addEventListener(d.toString(),T,L);else if(l.attachEvent)l.attachEvent(xs(d.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ol(){function l(m){return d.call(l.src,l.listener,m)}const d=gi;return l}function mi(l,d,m,T,L){if(Array.isArray(d))for(var M=0;M<d.length;M++)mi(l,d[M],m,T,L);else T=c(T)?!!T.capture:!!T,m=Ll(m),l&&l[tn]?(l=l.i,d=String(d).toString(),d in l.g&&(M=l.g[d],m=pi(M,m,T,L),-1<m&&(ft(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete l.g[d],l.h--)))):l&&(l=yi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=pi(d,m,T,L)),(m=-1<l?d[l]:null)&&nn(m))}function nn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[tn])hn(d.i,l);else{var m=l.type,T=l.proxy;d.removeEventListener?d.removeEventListener(m,T,l.capture):d.detachEvent?d.detachEvent(xs(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=yi(d))?(hn(m,l),m.h==0&&(m.src=null,d[fn]=null)):ft(l)}}}function xs(l){return l in kr?kr[l]:kr[l]="on"+l}function gi(l,d){if(l.da)l=!0;else{d=new en(d,this);var m=l.listener,T=l.ha||l.src;l.fa&&nn(l),l=m.call(T,d)}return l}function yi(l){return l=l[fn],l instanceof Sr?l:null}var vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ll(l){return typeof l=="function"?l:(l[vi]||(l[vi]=function(d){return l.handleEvent(d)}),l[vi])}function Xe(){ne.call(this),this.i=new Sr(this),this.M=this,this.F=null}C(Xe,ne),Xe.prototype[tn]=!0,Xe.prototype.removeEventListener=function(l,d,m,T){mi(this,l,d,m,T)};function Ne(l,d){var m,T=l.F;if(T)for(m=[];T;T=T.F)m.push(T);if(l=l.M,T=d.type||d,typeof d=="string")d=new fe(d,l);else if(d instanceof fe)d.target=d.target||l;else{var L=d;d=new fe(T,l),k(d,L)}if(L=!0,m)for(var M=m.length-1;0<=M;M--){var z=d.g=m[M];L=pn(z,T,!0,d)&&L}if(z=d.g=l,L=pn(z,T,!0,d)&&L,L=pn(z,T,!1,d)&&L,m)for(M=0;M<m.length;M++)z=d.g=m[M],L=pn(z,T,!1,d)&&L}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],T=0;T<m.length;T++)ft(m[T]);delete l.g[d],l.h--}}this.F=null},Xe.prototype.K=function(l,d,m,T){return this.i.add(String(l),d,!1,m,T)},Xe.prototype.L=function(l,d,m,T){return this.i.add(String(l),d,!0,m,T)};function pn(l,d,m,T){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,M=0;M<d.length;++M){var z=d[M];if(z&&!z.da&&z.capture==m){var pe=z.listener,it=z.ha||z.src;z.fa&&hn(l.i,z),L=pe.call(it,T)!==!1&&L}}return L&&!T.defaultPrevented}function Cr(l,d,m){if(typeof l=="function")m&&(l=g(l,m));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Do(l){l.g=Cr(()=>{l.g=null,l.i&&(l.i=!1,Do(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Pn extends ne{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Do(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(l){ne.call(this),this.h=l,this.g={}}C(Rr,ne);var Ml=[];function Vl(l){D(l.g,function(d,m){this.g.hasOwnProperty(m)&&nn(d)},l),l.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),Vl(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=a.JSON.stringify,jl=a.JSON.parse,Wd=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function _i(){}_i.prototype.h=null;function Ul(l){return l.h||(l.h=l.i())}function Fl(){}var Ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fe(){fe.call(this,"d")}C(Fe,fe);function rt(){fe.call(this,"c")}C(rt,fe);var Ve={},mn=null;function st(){return mn=mn||new Xe}Ve.La="serverreachability";function pt(l){fe.call(this,Ve.La,l)}C(pt,fe);function mt(l){const d=st();Ne(d,new pt(d))}Ve.STAT_EVENT="statevent";function Qn(l,d){fe.call(this,Ve.STAT_EVENT,l),this.stat=d}C(Qn,fe);function ie(l){const d=st();Ne(d,new Qn(d,l))}Ve.Ma="timingevent";function gn(l,d){fe.call(this,Ve.Ma,l),this.size=d}C(gn,fe);function gt(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function Ct(){this.g=!0}Ct.prototype.xa=function(){this.g=!1};function ks(l,d,m,T,L,M){l.info(function(){if(l.g)if(M)for(var z="",pe=M.split("&"),it=0;it<pe.length;it++){var ue=pe[it].split("=");if(1<ue.length){var yt=ue[0];ue=ue[1];var vt=yt.split("_");z=2<=vt.length&&vt[1]=="type"?z+(yt+"="+ue+"&"):z+(yt+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+d+`
`+m+`
`+z})}function Cs(l,d,m,T,L,M,z){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+d+`
`+m+`
`+M+" "+z})}function Rt(l,d,m,T){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Oo(l,m)+(T?" "+T:"")})}function Rs(l,d){l.info(function(){return"TIMEOUT: "+d})}Ct.prototype.info=function(){};function Oo(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var T=m[l];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var M=L[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return Is(m)}catch{return d}}var zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ug={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hd;function Bl(){}C(Bl,_i),Bl.prototype.g=function(){return new XMLHttpRequest},Bl.prototype.i=function(){return{}},Hd=new Bl;function Ar(l,d,m,T){this.j=l,this.i=d,this.l=m,this.R=T||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fg}function Fg(){this.i=null,this.g="",this.h=!1}var zg={},Kd={};function Gd(l,d,m){l.L=1,l.v=Hl(Yn(d)),l.m=m,l.P=!0,Bg(l,null)}function Bg(l,d){l.F=Date.now(),$l(l),l.A=Yn(l.v);var m=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),ny(m.i,"t",T),l.C=0,m=l.j.J,l.h=new Fg,l.g=wy(l.j,m?d:null,!l.m),0<l.O&&(l.M=new Pn(g(l.Y,l,l.g),l.O)),d=l.U,m=l.g,T=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ml[0]=L.toString()),L=Ml);for(var M=0;M<L.length;M++){var z=Gn(m,L[M],T||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),mt(),ks(l.i,l.u,l.A,l.l,l.R,l.m)}Ar.prototype.ca=function(l){l=l.target;const d=this.M;d&&Xn(l)==3?d.j():this.Y(l)},Ar.prototype.Y=function(l){try{if(l==this.g)e:{const vt=Xn(this.g);var d=this.g.Ba();const Ti=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||uy(this.g)))){this.J||vt!=4||d==7||(d==8||0>=Ti?mt(3):mt(2)),Qd(this);var m=this.g.Z();this.X=m;t:if($g(this)){var T=uy(this.g);l="";var L=T.length,M=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),Lo(this);var z="";break t}this.h.i=new a.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(T[d],{stream:!(M&&d==L-1)});T.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,Cs(this.i,this.u,this.A,this.l,this.R,vt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,it=this.g;if((pe=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(pe)){var ue=pe;break t}}ue=null}if(m=ue)Rt(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yd(this,m);else{this.o=!1,this.s=3,ie(12),As(this),Lo(this);break e}}if(this.P){m=!0;let yn;for(;!this.J&&this.C<z.length;)if(yn=d1(this,z),yn==Kd){vt==4&&(this.s=4,ie(14),m=!1),Rt(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==zg){this.s=4,ie(15),Rt(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Rt(this.i,this.l,yn,null),Yd(this,yn);if($g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||z.length!=0||this.h.h||(this.s=1,ie(16),m=!1),this.o=this.o&&m,!m)Rt(this.i,this.l,z,"[Invalid Chunked Response]"),As(this),Lo(this);else if(0<z.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),nh(yt),yt.M=!0,ie(11))}}else Rt(this.i,this.l,z,null),Yd(this,z);vt==4&&As(this),this.o&&!this.J&&(vt==4?gy(this.j,this):(this.o=!1,$l(this)))}else R1(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),As(this),Lo(this)}}}catch{}finally{}};function $g(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function d1(l,d){var m=l.C,T=d.indexOf(`
`,m);return T==-1?Kd:(m=Number(d.substring(m,T)),isNaN(m)?zg:(T+=1,T+m>d.length?Kd:(d=d.slice(T,T+m),l.C=T+m,d)))}Ar.prototype.cancel=function(){this.J=!0,As(this)};function $l(l){l.S=Date.now()+l.I,qg(l,l.I)}function qg(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=gt(g(l.ba,l),d)}function Qd(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ar.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Rs(this.i,this.A),this.L!=2&&(mt(),ie(17)),As(this),this.s=2,Lo(this)):qg(this,this.S-l)};function Lo(l){l.j.G==0||l.J||gy(l.j,l)}function As(l){Qd(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Vl(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Yd(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||Xd(m.h,l))){if(!l.K&&Xd(m.h,l)&&m.G==3){try{var T=m.Da.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Jl(m),Yl(m);else break e;th(m),ie(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=gt(g(m.Za,m),6e3));if(1>=Kg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ps(m,11)}else if((l.K||m.g==l)&&Jl(m),!_(d))for(L=m.Da.g.parse(d),d=0;d<L.length;d++){let ue=L[d];if(m.T=ue[0],ue=ue[1],m.G==2)if(ue[0]=="c"){m.K=ue[1],m.ia=ue[2];const yt=ue[3];yt!=null&&(m.la=yt,m.j.info("VER="+m.la));const vt=ue[4];vt!=null&&(m.Aa=vt,m.j.info("SVER="+m.Aa));const Ti=ue[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(T=1.5*Ti,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const yn=l.g;if(yn){const eu=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eu){var M=T.h;M.g||eu.indexOf("spdy")==-1&&eu.indexOf("quic")==-1&&eu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Jd(M,M.h),M.h=null))}if(T.D){const rh=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;rh&&(T.ya=rh,ve(T.I,T.D,rh))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var z=l;if(T.qa=_y(T,T.J?T.ia:null,T.W),z.K){Gg(T.h,z);var pe=z,it=T.L;it&&(pe.I=it),pe.B&&(Qd(pe),$l(pe)),T.g=z}else py(T);0<m.i.length&&Xl(m)}else ue[0]!="stop"&&ue[0]!="close"||Ps(m,7);else m.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Ps(m,7):eh(m):ue[0]!="noop"&&m.l&&m.l.ta(ue),m.v=0)}}mt(4)}catch{}}var h1=class{constructor(l,d){this.g=l,this.map=d}};function Wg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Kg(l){return l.h?1:l.g?l.g.size:0}function Xd(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Jd(l,d){l.g?l.g.add(d):l.h=d}function Gg(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Wg.prototype.cancel=function(){if(this.i=Qg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Qg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return A(l.i)}function f1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],m=l.length,T=0;T<m;T++)d.push(l[T]);return d}d=[],m=0;for(T in l)d[m++]=l[T];return d}function p1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const T in l)d[m++]=T;return d}}}function Yg(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=p1(l),T=f1(l),L=T.length,M=0;M<L;M++)d.call(void 0,T[M],m&&m[M],l)}var Xg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m1(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var T=l[m].indexOf("="),L=null;if(0<=T){var M=l[m].substring(0,T);L=l[m].substring(T+1)}else M=l[m];d(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ns(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ns){this.h=l.h,ql(this,l.j),this.o=l.o,this.g=l.g,Wl(this,l.s),this.l=l.l;var d=l.i,m=new jo;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Jg(this,m),this.m=l.m}else l&&(d=String(l).match(Xg))?(this.h=!1,ql(this,d[1]||"",!0),this.o=Mo(d[2]||""),this.g=Mo(d[3]||"",!0),Wl(this,d[4]),this.l=Mo(d[5]||"",!0),Jg(this,d[6]||"",!0),this.m=Mo(d[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}Ns.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Vo(d,Zg,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Vo(d,Zg,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Vo(m,m.charAt(0)=="/"?v1:y1,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Vo(m,w1)),l.join("")};function Yn(l){return new Ns(l)}function ql(l,d,m){l.j=m?Mo(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Wl(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Jg(l,d,m){d instanceof jo?(l.i=d,E1(l.i,l.h)):(m||(d=Vo(d,_1)),l.i=new jo(d,l.h))}function ve(l,d,m){l.i.set(d,m)}function Hl(l){return ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mo(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Vo(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,g1),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function g1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Zg=/[#\/\?@]/g,y1=/[#\?:]/g,v1=/[#\?]/g,_1=/[#\?@]/g,w1=/#/g;function jo(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Nr(l){l.g||(l.g=new Map,l.h=0,l.i&&m1(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=jo.prototype,t.add=function(l,d){Nr(this),this.i=null,l=wi(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function ey(l,d){Nr(l),d=wi(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function ty(l,d){return Nr(l),d=wi(l,d),l.g.has(d)}t.forEach=function(l,d){Nr(this),this.g.forEach(function(m,T){m.forEach(function(L){l.call(d,L,T,this)},this)},this)},t.na=function(){Nr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let T=0;T<d.length;T++){const L=l[T];for(let M=0;M<L.length;M++)m.push(d[T])}return m},t.V=function(l){Nr(this);let d=[];if(typeof l=="string")ty(this,l)&&(d=d.concat(this.g.get(wi(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},t.set=function(l,d){return Nr(this),this.i=null,l=wi(this,l),ty(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function ny(l,d,m){ey(l,d),0<m.length&&(l.i=null,l.g.set(wi(l,d),A(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var T=d[m];const M=encodeURIComponent(String(T)),z=this.V(T);for(T=0;T<z.length;T++){var L=M;z[T]!==""&&(L+="="+encodeURIComponent(String(z[T]))),l.push(L)}}return this.i=l.join("&")};function wi(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function E1(l,d){d&&!l.j&&(Nr(l),l.i=null,l.g.forEach(function(m,T){var L=T.toLowerCase();T!=L&&(ey(this,T),ny(this,L,m))},l)),l.j=d}function T1(l,d){const m=new Ct;if(a.Image){const T=new Image;T.onload=w(Pr,m,"TestLoadImage: loaded",!0,d,T),T.onerror=w(Pr,m,"TestLoadImage: error",!1,d,T),T.onabort=w(Pr,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=w(Pr,m,"TestLoadImage: timeout",!1,d,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else d(!1)}function x1(l,d){const m=new Ct,T=new AbortController,L=setTimeout(()=>{T.abort(),Pr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:T.signal}).then(M=>{clearTimeout(L),M.ok?Pr(m,"TestPingServer: ok",!0,d):Pr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Pr(m,"TestPingServer: error",!1,d)})}function Pr(l,d,m,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(m)}catch{}}function I1(){this.g=new Wd}function S1(l,d,m){const T=m||"";try{Yg(l,function(L,M){let z=L;c(L)&&(z=Is(L)),d.push(T+M+"="+encodeURIComponent(z))})}catch(L){throw d.push(T+"type="+encodeURIComponent("_badmap")),L}}function Kl(l){this.l=l.Ub||null,this.j=l.eb||!1}C(Kl,_i),Kl.prototype.g=function(){return new Gl(this.l,this.j)},Kl.prototype.i=function(l){return function(){return l}}({});function Gl(l,d){Xe.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Gl,Xe),t=Gl.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Fo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Fo(this)),this.g&&(this.readyState=3,Fo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ry(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ry(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Uo(this):Fo(this),this.readyState==3&&ry(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Uo(this))},t.Qa=function(l){this.g&&(this.response=l,Uo(this))},t.ga=function(){this.g&&Uo(this)};function Uo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Fo(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function Fo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sy(l){let d="";return D(l,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function Zd(l,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=sy(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ve(l,d,m))}function Pe(l){Xe.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Pe,Xe);var k1=/^https?$/i,C1=["POST","PUT"];t=Pe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hd.g(),this.v=this.o?Ul(this.o):Ul(Hd),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(M){iy(this,M);return}if(l=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)m.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const M of T.keys())m.set(M,T.get(M));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(C1,d,void 0))||T||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of m)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ly(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){iy(this,M)}};function iy(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,oy(l),Ql(l)}function oy(l){l.A||(l.A=!0,Ne(l,"complete"),Ne(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ne(this,"complete"),Ne(this,"abort"),Ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ql(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ay(this):this.bb())},t.bb=function(){ay(this)};function ay(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Xn(l)!=4||l.Z()!=2)){if(l.u&&Xn(l)==4)Cr(l.Ea,0,l);else if(Ne(l,"readystatechange"),Xn(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=z===0){var L=String(l.D).match(Xg)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),T=!k1.test(L?L.toLowerCase():"")}m=T}if(m)Ne(l,"complete"),Ne(l,"success");else{l.m=6;try{var M=2<Xn(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",oy(l)}}finally{Ql(l)}}}}function Ql(l,d){if(l.g){ly(l);const m=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Ne(l,"ready");try{m.onreadystatechange=T}catch{}}}function ly(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Xn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),jl(d)}};function uy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function R1(l){const d={};l=(l.g&&2<=Xn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(_(l[T]))continue;var m=P(l[T]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=d[L]||[];d[L]=M,M.push(m)}x(d,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zo(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function cy(l){this.Aa=0,this.i=[],this.j=new Ct,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zo("baseRetryDelayMs",5e3,l),this.cb=zo("retryDelaySeedMs",1e4,l),this.Wa=zo("forwardChannelMaxRetries",2,l),this.wa=zo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Wg(l&&l.concurrentRequestLimit),this.Da=new I1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cy.prototype,t.la=8,t.G=1,t.connect=function(l,d,m,T){ie(0),this.W=l,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=_y(this,null,this.W),Xl(this)};function eh(l){if(dy(l),l.G==3){var d=l.U++,m=Yn(l.I);if(ve(m,"SID",l.K),ve(m,"RID",d),ve(m,"TYPE","terminate"),Bo(l,m),d=new Ar(l,l.j,d),d.L=2,d.v=Hl(Yn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=wy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),$l(d)}vy(l)}function Yl(l){l.g&&(nh(l),l.g.cancel(),l.g=null)}function dy(l){Yl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Jl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Xl(l){if(!Hg(l.h)&&!l.s){l.s=!0;var d=l.Ga;qe||X(),B||(qe(),B=!0),K.add(d,l),l.B=0}}function A1(l,d){return Kg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=gt(g(l.Ga,l,d),yy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Ar(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),k(M,this.S)):M=this.S),this.m!==null||this.O||(L.H=M,M=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=fy(this,L,d),m=Yn(this.I),ve(m,"RID",l),ve(m,"CVER",22),this.D&&ve(m,"X-HTTP-Session-Id",this.D),Bo(this,m),M&&(this.O?d="headers="+encodeURIComponent(String(sy(M)))+"&"+d:this.m&&Zd(m,this.m,M)),Jd(this.h,L),this.Ua&&ve(m,"TYPE","init"),this.P?(ve(m,"$req",d),ve(m,"SID","null"),L.T=!0,Gd(L,m,null)):Gd(L,m,d),this.G=2}}else this.G==3&&(l?hy(this,l):this.i.length==0||Hg(this.h)||hy(this))};function hy(l,d){var m;d?m=d.l:m=l.U++;const T=Yn(l.I);ve(T,"SID",l.K),ve(T,"RID",m),ve(T,"AID",l.T),Bo(l,T),l.m&&l.o&&Zd(T,l.m,l.o),m=new Ar(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=fy(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Jd(l.h,m),Gd(m,T,d)}function Bo(l,d){l.H&&D(l.H,function(m,T){ve(d,T,m)}),l.l&&Yg({},function(m,T){ve(d,T,m)})}function fy(l,d,m){m=Math.min(l.i.length,m);var T=l.l?g(l.l.Na,l.l,l):null;e:{var L=l.i;let M=-1;for(;;){const z=["count="+m];M==-1?0<m?(M=L[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let pe=!0;for(let it=0;it<m;it++){let ue=L[it].g;const yt=L[it].map;if(ue-=M,0>ue)M=Math.max(0,L[it].g-100),pe=!1;else try{S1(yt,z,"req"+ue+"_")}catch{T&&T(yt)}}if(pe){T=z.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,T}function py(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;qe||X(),B||(qe(),B=!0),K.add(d,l),l.v=0}}function th(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=gt(g(l.Fa,l),yy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,my(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=gt(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),Yl(this),my(this))};function nh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function my(l){l.g=new Ar(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Yn(l.qa);ve(d,"RID","rpc"),ve(d,"SID",l.K),ve(d,"AID",l.T),ve(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ve(d,"TO",l.ja),ve(d,"TYPE","xmlhttp"),Bo(l,d),l.m&&l.o&&Zd(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Hl(Yn(d)),m.m=null,m.P=!0,Bg(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Yl(this),th(this),ie(19))};function Jl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function gy(l,d){var m=null;if(l.g==d){Jl(l),nh(l),l.g=null;var T=2}else if(Xd(l.h,d))m=d.D,Gg(l.h,d),T=1;else return;if(l.G!=0){if(d.o)if(T==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;T=st(),Ne(T,new gn(T,m)),Xl(l)}else py(l);else if(L=d.s,L==3||L==0&&0<d.X||!(T==1&&A1(l,d)||T==2&&th(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),L){case 1:Ps(l,5);break;case 4:Ps(l,10);break;case 3:Ps(l,6);break;default:Ps(l,2)}}}function yy(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function Ps(l,d){if(l.j.info("Error code "+d),d==2){var m=g(l.fb,l),T=l.Xa;const L=!T;T=new Ns(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ql(T,"https"),Hl(T),L?T1(T.toString(),m):x1(T.toString(),m)}else ie(2);l.G=0,l.l&&l.l.sa(d),vy(l),dy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function vy(l){if(l.G=0,l.ka=[],l.l){const d=Qg(l.h);(d.length!=0||l.i.length!=0)&&(R(l.ka,d),R(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function _y(l,d,m){var T=m instanceof Ns?Yn(m):new Ns(m);if(T.g!="")d&&(T.g=d+"."+T.g),Wl(T,T.s);else{var L=a.location;T=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var M=new Ns(null);T&&ql(M,T),d&&(M.g=d),L&&Wl(M,L),m&&(M.l=m),T=M}return m=l.D,d=l.ya,m&&d&&ve(T,m,d),ve(T,"VER",l.la),Bo(l,T),T}function wy(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Pe(new Kl({eb:m})):new Pe(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ey(){}t=Ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zl(){}Zl.prototype.g=function(l,d){return new qt(l,d)};function qt(l,d){Xe.call(this),this.g=new cy(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!_(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Ei(this)}C(qt,Xe),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){eh(this.g)},qt.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Is(l),l=m);d.i.push(new h1(d.Ya++,l)),d.G==3&&Xl(d)},qt.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,qt.aa.N.call(this)};function Ty(l){Fe.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}C(Ty,Fe);function xy(){rt.call(this),this.status=1}C(xy,rt);function Ei(l){this.g=l}C(Ei,Ey),Ei.prototype.ua=function(){Ne(this.g,"a")},Ei.prototype.ta=function(l){Ne(this.g,new Ty(l))},Ei.prototype.sa=function(l){Ne(this.g,new xy)},Ei.prototype.ra=function(){Ne(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,tx=function(){return new Zl},ex=function(){return st()},ZT=Ve,ip={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,Wu=zl,Ug.COMPLETE="complete",JT=Ug,Fl.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,ia=Fl,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,XT=Pe}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new xm("@firebase/firestore");function Xo(){return Js.logLevel}function W(t,...e){if(Js.logLevel<=re.DEBUG){const n=e.map(Lm);Js.debug(`Firestore (${ko}): ${t}`,...n)}}function yr(t,...e){if(Js.logLevel<=re.ERROR){const n=e.map(Lm);Js.error(`Firestore (${ko}): ${t}`,...n)}}function uo(t,...e){if(Js.logLevel<=re.WARN){const n=e.map(Lm);Js.warn(`Firestore (${ko}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+t;throw yr(e),new Error(e)}function he(t,e){t||Y()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class Wb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hb{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ur,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ur)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new nx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Tt(e)}}class Kb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Kb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){he(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new Qb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Xb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Ye(0,0))}static max(){return new J(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ga.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ga?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Ga{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const Jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Ga{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return Jb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new $(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(we.fromString(e))}static fromName(e){return new H(we.fromString(e).popFirst(5))}static empty(){return new H(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new we(e.slice()))}}function Zb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new cs(s,H.empty(),e)}function e2(t){return new cs(t.readTime,t.key,-1)}class cs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cs(J.min(),H.empty(),-1)}static max(){return new cs(J.max(),H.empty(),-1)}}function t2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==n2)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function s2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _l(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mm.oe=-1;function Td(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function i2(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function li(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E_(this.data.getIterator())}getIteratorFrom(e){return new E_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class E_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new ct(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ix("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const o2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(t){if(he(!!t),typeof t=="string"){let e=0;const n=o2.exec(t);if(he(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zs(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jm(t){const e=t.mapValue.fields.__previous_value__;return Vm(e)?jm(e):e}function Qa(t){const e=ds(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Ya{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ya("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu={mapValue:{}};function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vm(t)?4:u2(t)?9007199254740991:l2(t)?10:11:Y()}function Hn(t,e){if(t===e)return!0;const n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qa(t).isEqual(Qa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ds(s.timestampValue),a=ds(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zs(s.bytesValue).isEqual(Zs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),a=je(i.doubleValue);return o===a?Dc(o)===Dc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(w_(o)!==w_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Hn(o[u],a[u])))return!1;return!0}(t,e);default:return Y()}}function Xa(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=ei(t),r=ei(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return T_(t.timestampValue,e.timestampValue);case 4:return T_(Qa(t),Qa(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Zs(i),u=Zs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ce(a[c],u[c]);if(h!==0)return h}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(je(i.latitude),je(o.latitude));return a!==0?a:ce(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return x_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,h;const p=i.fields||{},g=o.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=ce(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:x_(w,C)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Tu.mapValue&&o===Tu.mapValue)return 0;if(i===Tu.mapValue)return 1;if(o===Tu.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=ce(u[p],h[p]);if(g!==0)return g;const w=ho(a[u[p]],c[h[p]]);if(w!==0)return w}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y()}}function T_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=ds(t),r=ds(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function x_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ho(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function fo(t){return op(t)}function op(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ds(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=op(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${op(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function I_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ap(t){return!!t&&"integerValue"in t}function Um(t){return!!t&&"arrayValue"in t}function S_(t){return!!t&&"nullValue"in t}function k_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hu(t){return!!t&&"mapValue"in t}function l2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _a(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return li(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_a(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_a(t.arrayValue.values[n]);return e}return Object.assign({},t)}function u2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_a(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=_a(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){li(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ut(_a(this.value))}}function ox(t){const e=[];return li(t.fields,(n,r)=>{const s=new lt([n]);if(Hu(r)){const i=ox(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,J.min(),J.min(),J.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,s){return new It(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new It(e,2,n,J.min(),J.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,J.min(),J.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.position=e,this.inclusive=n}}function C_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function R_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function c2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{}class $e extends ax{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new h2(e,n,r):n==="array-contains"?new m2(e,r):n==="in"?new g2(e,r):n==="not-in"?new y2(e,r):n==="array-contains-any"?new v2(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f2(e,r):new p2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ho(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends ax{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new kn(e,n)}matches(e){return lx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lx(t){return t.op==="and"}function ux(t){return d2(t)&&lx(t)}function d2(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function lp(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(ux(t))return t.filters.map(e=>lp(e)).join(",");{const e=t.filters.map(n=>lp(n)).join(",");return`${t.op}(${e})`}}function cx(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&Hn(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&cx(o,s.filters[a]),!0):!1}(t,e):void Y()}function dx(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(dx).join(" ,")+"}"}(t):"Filter"}class h2 extends $e{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class f2 extends $e{constructor(e,n){super(e,"in",n),this.keys=hx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p2 extends $e{constructor(e,n){super(e,"not-in",n),this.keys=hx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class m2 extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Um(n)&&Xa(n.arrayValue,this.value)}}class g2 extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xa(this.value.arrayValue,n)}}class y2 extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xa(this.value.arrayValue,n)}}class v2 extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Um(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function A_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _2(t,e,n,r,s,i,o)}function Fm(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R_(t.startAt,e.startAt)&&R_(t.endAt,e.endAt)}function up(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function w2(t,e,n,r,s,i,o,a){return new Co(t,e,n,r,s,i,o,a)}function Bm(t){return new Co(t)}function N_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fx(t){return t.collectionGroup!==null}function wa(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ct(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ja(i,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new Ja(lt.keyField(),r))}return e.ce}function qn(t){const e=Z(t);return e.le||(e.le=E2(e,wa(t))),e.le}function E2(t,e){if(t.limitType==="F")return A_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ja(s.field,i)});const n=t.endAt?new Oc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oc(t.startAt.position,t.startAt.inclusive):null;return A_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cp(t,e){const n=t.filters.concat([e]);return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lc(t,e,n){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xd(t,e){return zm(qn(t),qn(e))&&t.limitType===e.limitType}function px(t){return`${Fm(qn(t))}|lt:${t.limitType}`}function Si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>dx(s)).join(", ")}]`),Td(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fo(s)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function Id(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of wa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=C_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,wa(r),s)||r.endAt&&!function(o,a,u){const c=C_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,wa(r),s))}(t,e)}function T2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mx(t){return(e,n)=>{let r=!1;for(const s of wa(t)){const i=x2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function x2(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?ho(u,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return sx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Ae(H.comparator);function vr(){return I2}const gx=new Ae(H.comparator);function oa(...t){let e=gx;for(const n of t)e=e.insert(n.key,n);return e}function yx(t){let e=gx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Us(){return Ea()}function vx(){return Ea()}function Ea(){return new Ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const S2=new Ae(H.comparator),k2=new ct(H.comparator);function te(...t){let e=k2;for(const n of t)e=e.add(n);return e}const C2=new ct(ce);function R2(){return C2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function _x(t){return{integerValue:""+t}}function A2(t,e){return i2(e)?_x(e):$m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function N2(t,e,n){return t instanceof Za?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vm(i)&&(i=jm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof el?Ex(t,e):t instanceof tl?Tx(t,e):function(s,i){const o=wx(s,i),a=P_(o)+P_(s.Pe);return ap(o)&&ap(s.Pe)?_x(a):$m(s.serializer,a)}(t,e)}function P2(t,e,n){return t instanceof el?Ex(t,e):t instanceof tl?Tx(t,e):n}function wx(t,e){return t instanceof Mc?function(r){return ap(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Za extends Sd{}class el extends Sd{constructor(e){super(),this.elements=e}}function Ex(t,e){const n=xx(e);for(const r of t.elements)n.some(s=>Hn(s,r))||n.push(r);return{arrayValue:{values:n}}}class tl extends Sd{constructor(e){super(),this.elements=e}}function Tx(t,e){let n=xx(e);for(const r of t.elements)n=n.filter(s=>!Hn(s,r));return{arrayValue:{values:n}}}class Mc extends Sd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function P_(t){return je(t.integerValue||t.doubleValue)}function xx(t){return Um(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.field=e,this.transform=n}}function D2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof el&&s instanceof el||r instanceof tl&&s instanceof tl?co(r.elements,s.elements,Hn):r instanceof Mc&&s instanceof Mc?Hn(r.Pe,s.Pe):r instanceof Za&&s instanceof Za}(t.transform,e.transform)}class O2{constructor(e,n){this.version=e,this.transformResults=n}}class un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kd{}function Ix(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qm(t.key,un.none()):new wl(t.key,t.data,un.none());{const n=t.data,r=Ut.empty();let s=new ct(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Es(t.key,r,new Kt(s.toArray()),un.none())}}function L2(t,e,n){t instanceof wl?function(s,i,o){const a=s.value.clone(),u=D_(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Es?function(s,i,o){if(!Ku(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=D_(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Sx(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ta(t,e,n,r){return t instanceof wl?function(i,o,a,u){if(!Ku(i.precondition,o))return a;const c=i.value.clone(),h=O_(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Es?function(i,o,a,u){if(!Ku(i.precondition,o))return a;const c=O_(i.fieldTransforms,u,o),h=o.data;return h.setAll(Sx(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return Ku(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function M2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=wx(r.transform,s||null);i!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,i))}return n||null}function b_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&co(r,s,(i,o)=>D2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wl extends kd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Es extends kd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function D_(t,e,n){const r=new Map;he(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,P2(o,a,n[s]))}return r}function O_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,N2(i,o,e))}return r}class qm extends kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V2 extends kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&L2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=Ix(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>b_(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>b_(n,r))}}class Wm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length);let s=function(){return S2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Wm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,se;function z2(t){switch(t){default:return Y();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function kx(t){if(t===void 0)return yr("GRPC error has no .code"),j.UNKNOWN;switch(t){case ze.OK:return j.OK;case ze.CANCELLED:return j.CANCELLED;case ze.UNKNOWN:return j.UNKNOWN;case ze.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ze.INTERNAL:return j.INTERNAL;case ze.UNAVAILABLE:return j.UNAVAILABLE;case ze.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ze.NOT_FOUND:return j.NOT_FOUND;case ze.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ze.ABORTED:return j.ABORTED;case ze.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ze.DATA_LOSS:return j.DATA_LOSS;default:return Y()}}(se=ze||(ze={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new Bs([4294967295,4294967295],0);function L_(t){const e=B2().encode(t),n=new YT;return n.update(e),new Uint8Array(n.digest())}function M_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bs([n,r],0),new Bs([s,i],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new aa(`Invalid padding: ${n}`);if(r<0)throw new aa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new aa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new aa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Bs.fromNumber(r)));return s.compare($2)===1&&(s=new Bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=L_(e),[r,s]=M_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=L_(e),[r,s]=M_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cd(J.min(),s,new Ae(ce),vr(),te())}}class El{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new El(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Cx{constructor(e,n){this.targetId=e,this.me=n}}class Rx{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class V_{constructor(){this.fe=0,this.ge=U_(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new El(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=U_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class q2{constructor(e){this.Le=e,this.Be=new Map,this.ke=vr(),this.qe=j_(),this.Qe=new Ae(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(up(i))if(r===0){const o=new H(i.path);this.Ue(n,o,It.newNoDocument(o,J.min()))}else he(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Zs(r).toUint8Array()}catch(u){if(u instanceof ix)return uo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Hm(o,s,i)}catch(u){return uo(u instanceof aa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&up(a.target)){const u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,It.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Cd(e,n,this.Qe,this.ke,r);return this.ke=vr(),this.qe=j_(),this.Qe=new Ae(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new V_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new V_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function j_(){return new Ae(H.comparator)}function U_(){return new Ae(H.comparator)}const W2={asc:"ASCENDING",desc:"DESCENDING"},H2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"};class G2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dp(t,e){return t.useProto3Json||Td(e)?e:{value:e}}function Vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ax(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(t,e){return Vc(t,e.toTimestamp())}function Wn(t){return he(!!t),J.fromTimestamp(function(n){const r=ds(n);return new Ye(r.seconds,r.nanos)}(t))}function Km(t,e){return hp(t,e).canonicalString()}function hp(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Nx(t){const e=we.fromString(t);return he(Lx(e)),e}function fp(t,e){return Km(t.databaseId,e.path)}function jh(t,e){const n=Nx(e);if(n.get(1)!==t.databaseId.projectId)throw new $(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(bx(n))}function Px(t,e){return Km(t.databaseId,e)}function Y2(t){const e=Nx(t);return e.length===4?we.emptyPath():bx(e)}function pp(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bx(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function F_(t,e,n){return{name:fp(t,e),fields:n.value.mapValue.fields}}function X2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(he(h===void 0||typeof h=="string"),ht.fromBase64String(h||"")):(he(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:kx(c.code);return new $(h,c.message||"")}(o);n=new Rx(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jh(t,r.document.name),i=Wn(r.document.updateTime),o=r.document.createTime?Wn(r.document.createTime):J.min(),a=new Ut({mapValue:{fields:r.document.fields}}),u=It.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Gu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jh(t,r.document),i=r.readTime?Wn(r.readTime):J.min(),o=It.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Gu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jh(t,r.document),i=r.removedTargetIds||[];n=new Gu([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new F2(s,i),a=r.targetId;n=new Cx(a,o)}}return n}function J2(t,e){let n;if(e instanceof wl)n={update:F_(t,e.key,e.value)};else if(e instanceof qm)n={delete:fp(t,e.key)};else if(e instanceof Es)n={update:F_(t,e.key,e.data),updateMask:aD(e.fieldMask)};else{if(!(e instanceof V2))return Y();n={verify:fp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Za)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof el)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Q2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function Z2(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Wn(s.updateTime):Wn(i);return o.isEqual(J.min())&&(o=Wn(i)),new O2(o,s.transformResults||[])}(n,e))):[]}function eD(t,e){return{documents:[Px(t,e.path)]}}function tD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Px(t,s);const i=function(c){if(c.length!==0)return Ox(kn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:ki(g.field),direction:sD(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function nD(t){let e=Y2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=Dx(p);return g instanceof kn&&ux(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Ja(Ci(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Td(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new Oc(w,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,w=p.values||[];return new Oc(w,g)}(n.endAt)),w2(e,s,o,i,a,"F",u,c)}function rD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ci(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ci(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ci(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ci(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return $e.create(Ci(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>Dx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function sD(t){return W2[t]}function iD(t){return H2[t]}function oD(t){return K2[t]}function ki(t){return{fieldPath:t.canonicalString()}}function Ci(t){return lt.fromServerFormat(t.fieldPath)}function Ox(t){return t instanceof $e?function(n){if(n.op==="=="){if(k_(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NAN"}};if(S_(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k_(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NAN"}};if(S_(n.value))return{unaryFilter:{field:ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ki(n.field),op:iD(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>Ox(s));return r.length===1?r[0]:{compositeFilter:{op:oD(n.op),filters:r}}}(t):Y()}function aD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Lx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r,s,i=J.min(),o=J.min(),a=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.ct=e}}function uD(t){const e=nD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.un=new dD}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(cs.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class dD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new po(0)}static kn(){return new po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.changes=new Ro(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ta(r.mutation,s,Kt.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=Us();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=oa();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Us();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=vr();const o=Ea(),a=function(){return Ea()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Es)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ta(h.mutation,c,h.mutation.getFieldMask(),Ye.now())):o.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new fD(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ea();let s=new Ae((o,a)=>o-a),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Kt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const p=(s.get(a.batchId)||te()).add(u);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,p=vx();h.forEach(g=>{if(!i.has(g)){const w=Ix(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Us());let a=-1,u=i;return o.next(c=>U.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,te())).next(h=>({batchId:a,changes:yx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let s=oa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=oa();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,u=>{const c=function(p,g){return new Co(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,It.newInvalidDocument(h)))});let a=oa();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&Ta(h.mutation,c,Kt.empty(),Ye.now()),Id(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Wn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:uD(s.bundledQuery),readTime:Wn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.overlays=new Ae(H.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Us();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Us(),i=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Us(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Us(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new U2(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.Tr=new ct(Je.Er),this.dr=new ct(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new we([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new we([])),r=new Je(n,e),s=new Je(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(Je.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new j2(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Je(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(ce);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new Je(new H(i),0);let a=new ct(ce);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.Mr=e,this.docs=function(){return new Ae(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=vr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():It.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=vr();const o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||t2(e2(h),r)<=0||(s.has(h.key)||Id(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wD(this)}getSize(e){return U.resolve(this.size)}}class wD extends hD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.persistence=e,this.Nr=new Ro(n=>Fm(n),zm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gm,this.targetCount=0,this.kr=po.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new po(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mm(0),this.Kr=!1,this.Kr=!0,this.$r=new yD,this.referenceDelegate=e(this),this.Ur=new ED(this),this.indexManager=new cD,this.remoteDocumentCache=function(s){return new _D(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lD(n),this.Gr=new mD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new xD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class xD extends r2{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Jr=new Gm,this.Yr=null}static Zr(e){return new Qm(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=H.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hA()?8:s2(kt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ID;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Xo()<=re.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Xo()<=re.DEBUG&&W("QueryEngine","Query:",Si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Xo()<=re.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):U.resolve())}Yi(e,n){if(N_(n))return U.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Lc(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Lc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return N_(n)||s.isEqual(J.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Xo()<=re.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Si(n)),this.rs(e,o,n,Zb(s,-1)).next(a=>a))})}ts(e,n){let r=new ct(mx(e));return n.forEach((s,i)=>{Id(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Xo()<=re.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Si(n)),this.Ji.getDocumentsMatchingQuery(e,n,cs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(ce),this._s=new Ro(i=>Fm(i),zm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function CD(t,e,n,r){return new kD(t,e,n,r)}async function Mx(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=te();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function RD(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const p=c.batch,g=p.keys();let w=U.resolve();return g.forEach(C=>{w=w.next(()=>h.getEntry(u,C)).next(A=>{const R=c.docVersions.get(C);he(R!==null),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),h.addEntry(A)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Vx(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function AD(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(ht.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(p,w),function(A,R,E){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,w,h)&&a.push(n.Ur.updateTargetData(i,w))});let u=vr(),c=te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(ND(i,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function ND(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=vr();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function PD(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bD(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Gr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function mp(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!_l(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function z_(t,e,n){const r=Z(t);let s=J.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const p=Z(u),g=p._s.get(h);return g!==void 0?U.resolve(p.os.get(g)):p.Ur.getTargetData(c,h)}(r,o,qn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:te())).next(a=>(DD(r,T2(e),a),{documents:a,Ts:i})))}function DD(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class B_{constructor(){this.activeTargetIds=R2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OD{constructor(){this.so=new B_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new B_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu=null;function Uh(){return xu===null?xu=function(){return 268435456+Math.round(2147483648*Math.random())}():xu++,"0x"+xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class jD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Uh(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw uo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=MD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Uh();return new Promise((o,a)=>{const u=new XT;u.setWithCredentials(!0),u.listenOnce(JT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Wu.NO_ERROR:const h=u.getResponseJson();W(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Wu.TIMEOUT:W(Et,`RPC '${e}' ${i} timed out`),a(new $(j.DEADLINE_EXCEEDED,"Request time out"));break;case Wu.HTTP_ERROR:const p=u.getStatus();if(W(Et,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const C=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(E)>=0?E:j.UNKNOWN}(w.status);a(new $(C,w.message))}else a(new $(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(j.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(Et,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(Et,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Uh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tx(),a=ex(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");W(Et,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=o.createWebChannel(h,u);let g=!1,w=!1;const C=new VD({Io:R=>{w?W(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(W(Et,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),W(Et,`RPC '${e}' stream ${s} sending:`,R),p.send(R))},To:()=>p.close()}),A=(R,E,_)=>{R.listen(E,v=>{try{_(v)}catch(b){setTimeout(()=>{throw b},0)}})};return A(p,ia.EventType.OPEN,()=>{w||(W(Et,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),A(p,ia.EventType.CLOSE,()=>{w||(w=!0,W(Et,`RPC '${e}' stream ${s} transport closed`),C.So())}),A(p,ia.EventType.ERROR,R=>{w||(w=!0,uo(Et,`RPC '${e}' stream ${s} transport errored:`,R),C.So(new $(j.UNAVAILABLE,"The operation could not be completed")))}),A(p,ia.EventType.MESSAGE,R=>{var E;if(!w){const _=R.data[0];he(!!_);const v=_,b=v.error||((E=v[0])===null||E===void 0?void 0:E.error);if(b){W(Et,`RPC '${e}' stream ${s} received error:`,b);const V=b.status;let D=function(S){const k=ze[S];if(k!==void 0)return kx(k)}(V),x=b.message;D===void 0&&(D=j.INTERNAL,x="Unknown error status: "+V+" with message "+b.message),w=!0,C.So(new $(D,x)),p.close()}else W(Et,`RPC '${e}' stream ${s} received:`,_),C.bo(_)}}),A(a,ZT.STAT_EVENT,R=>{R.stat===ip.PROXY?W(Et,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===ip.NOPROXY&&W(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){return new G2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UD extends Ux{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=X2(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Wn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=pp(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=up(u)?{documents:eD(i,u)}:{query:tD(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ax(i,o.resumeToken);const c=dp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Vc(i,o.snapshotVersion.toTimestamp());const c=dp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=rD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=pp(this.serializer),n.removeTarget=e,this.a_(n)}}class FD extends Ux{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Z2(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=pp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>J2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,hp(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(j.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,hp(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yr(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ui(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Z(u);c.L_.add(4),await Tl(c),c.q_.set("Unknown"),c.L_.delete(4),await Ad(c)}(this))})}),this.q_=new BD(r,s)}}async function Ad(t){if(ui(t))for(const e of t.B_)await e(!0)}async function Tl(t){for(const e of t.B_)await e(!1)}function Fx(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),eg(n)?Zm(n):Ao(n).r_()&&Jm(n,e))}function Xm(t,e){const n=Z(t),r=Ao(n);n.N_.delete(e),r.r_()&&zx(n,e),n.N_.size===0&&(r.r_()?r.o_():ui(n)&&n.q_.set("Unknown"))}function Jm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).A_(e)}function zx(t,e){t.Q_.xe(e),Ao(t).R_(e)}function Zm(t){t.Q_=new q2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.q_.v_()}function eg(t){return ui(t)&&!Ao(t).n_()&&t.N_.size>0}function ui(t){return Z(t).L_.size===0}function Bx(t){t.Q_=void 0}async function qD(t){t.q_.set("Online")}async function WD(t){t.N_.forEach((e,n)=>{Jm(t,e)})}async function HD(t,e){Bx(t),eg(t)?(t.q_.M_(e),Zm(t)):t.q_.set("Unknown")}async function KD(t,e,n){if(t.q_.set("Online"),e instanceof Rx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jc(t,r)}else if(e instanceof Gu?t.Q_.Ke(e):e instanceof Cx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await Vx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),zx(i,u);const p=new Gr(h.target,u,c,h.sequenceNumber);Jm(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await jc(t,r)}}async function jc(t,e,n){if(!_l(e))throw e;t.L_.add(1),await Tl(t),t.q_.set("Offline"),n||(n=()=>Vx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ad(t)})}function $x(t,e){return e().catch(n=>jc(t,n,e))}async function Nd(t){const e=Z(t),n=hs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GD(e);)try{const s=await PD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,QD(e,s)}catch(s){await jc(e,s)}qx(e)&&Wx(e)}function GD(t){return ui(t)&&t.O_.length<10}function QD(t,e){t.O_.push(e);const n=hs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function qx(t){return ui(t)&&!hs(t).n_()&&t.O_.length>0}function Wx(t){hs(t).start()}async function YD(t){hs(t).p_()}async function XD(t){const e=hs(t);for(const n of t.O_)e.m_(n.mutations)}async function JD(t,e,n){const r=t.O_.shift(),s=Wm.from(r,e,n);await $x(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Nd(t)}async function ZD(t,e){e&&hs(t).V_&&await async function(r,s){if(function(o){return z2(o)&&o!==j.ABORTED}(s.code)){const i=r.O_.shift();hs(r).s_(),await $x(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Nd(r)}}(t,e),qx(t)&&Wx(t)}async function q_(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=ui(n);n.L_.add(3),await Tl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ad(n)}async function eO(t,e){const n=Z(t);e?(n.L_.delete(2),await Ad(n)):e||(n.L_.add(2),await Tl(n),n.q_.set("Unknown"))}function Ao(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new UD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:qD.bind(null,t),Ro:WD.bind(null,t),mo:HD.bind(null,t),d_:KD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),eg(t)?Zm(t):t.q_.set("Unknown")):(await t.K_.stop(),Bx(t))})),t.K_}function hs(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new FD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:YD.bind(null,t),mo:ZD.bind(null,t),f_:XD.bind(null,t),g_:JD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Nd(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new tg(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(t,e){if(yr("AsyncQueue",`${e}: ${t}`),_l(t))return new $(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=oa(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new Ji(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ji)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ji;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.W_=new Ae(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new mo(e,n,Ji.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nO{constructor(){this.queries=H_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=H_(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new $(j.ABORTED,"Firestore shutting down"))}}function H_(){return new Ro(t=>px(t),xd)}async function Hx(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new tO,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ng(o,`Initialization of query '${Si(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&rg(n)}async function Kx(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rO(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&rg(n)}function sO(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function rg(t){t.Y_.forEach(e=>{e.next()})}var gp,K_;(K_=gp||(gp={})).ea="default",K_.Cache="cache";class Gx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.key=e}}class Yx{constructor(e){this.key=e}}class iO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=mx(e),this.Ra=new Ji(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new W_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),w=Id(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),A=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;g&&w?g.data.isEqual(w.data)?C!==A&&(r.track({type:3,doc:w}),R=!0):this.ga(g,w)||(r.track({type:2,doc:w}),R=!0,(u&&this.Aa(w,u)>0||c&&this.Aa(w,c)<0)&&(a=!0)):!g&&w?(r.track({type:0,doc:w}),R=!0):g&&!w&&(r.track({type:1,doc:g}),R=!0,(u||c)&&(a=!0)),R&&(w?(o=o.add(w),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(w,C){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return A(w)-A(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new mo(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new W_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Yx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Qx(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aO{constructor(e){this.key=e,this.va=!1}}class lO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ro(a=>px(a),xd),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(H.comparator),this.Na=new Map,this.La=new Gm,this.Ba={},this.ka=new Map,this.qa=po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uO(t,e,n=!0){const r=nI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Xx(r,e,n,!0),s}async function cO(t,e){const n=nI(t);await Xx(n,e,!0,!1)}async function Xx(t,e,n,r){const s=await bD(t.localStore,qn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await dO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Fx(t.remoteStore,s),a}async function dO(t,e,n,r,s){t.Ka=(p,g,w)=>async function(A,R,E,_){let v=R.view.ma(E);v.ns&&(v=await z_(A.localStore,R.query,!1).then(({documents:x})=>R.view.ma(x,v)));const b=_&&_.targetChanges.get(R.targetId),V=_&&_.targetMismatches.get(R.targetId)!=null,D=R.view.applyChanges(v,A.isPrimaryClient,b,V);return Q_(A,R.targetId,D.wa),D.snapshot}(t,p,g,w);const i=await z_(t.localStore,e,!0),o=new iO(e,i.Ts),a=o.ma(i.documents),u=El.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);Q_(t,n,c.wa);const h=new oO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function hO(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!xd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Xm(r.remoteStore,s.targetId),yp(r,s.targetId)}).catch(vl)):(yp(r,s.targetId),await mp(r.localStore,s.targetId,!0))}async function fO(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xm(n.remoteStore,r.targetId))}async function pO(t,e,n){const r=EO(t);try{const s=await function(o,a){const u=Z(o),c=Ye.now(),h=a.reduce((w,C)=>w.add(C.key),te());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=vr(),A=te();return u.cs.getEntries(w,h).next(R=>{C=R,C.forEach((E,_)=>{_.isValidDocument()||(A=A.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,C)).next(R=>{p=R;const E=[];for(const _ of a){const v=M2(_,p.get(_.key).overlayedDocument);v!=null&&E.push(new Es(_.key,v,ox(v.value.mapValue),un.exists(!0)))}return u.mutationQueue.addMutationBatch(w,c,E,a)}).next(R=>{g=R;const E=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(w,R.batchId,E)})}).then(()=>({batchId:g.batchId,changes:yx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ae(ce)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await xl(r,s.changes),await Nd(r.remoteStore)}catch(s){const i=ng(s,"Failed to persist write");n.reject(i)}}async function Jx(t,e){const n=Z(t);try{const r=await AD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?he(o.va):s.removedDocuments.size>0&&(he(o.va),o.va=!1))}),await xl(n,r,e)}catch(r){await vl(r)}}function G_(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=Z(o);u.onlineState=a;let c=!1;u.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(a)&&(c=!0)}),c&&rg(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mO(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ae(H.comparator);o=o.insert(i,It.newNoDocument(i,J.min()));const a=te().add(i),u=new Cd(J.min(),new Map,new Ae(ce),o,a);await Jx(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),sg(r)}else await mp(r.localStore,e,!1).then(()=>yp(r,e,n)).catch(vl)}async function gO(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await RD(n.localStore,e);eI(n,r,null),Zx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xl(n,s)}catch(s){await vl(s)}}async function yO(t,e,n){const r=Z(t);try{const s=await function(o,a){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(p=>(he(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);eI(r,e,n),Zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xl(r,s)}catch(s){await vl(s)}}function Zx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function eI(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function yp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||tI(t,r)})}function tI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Xm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sg(t))}function Q_(t,e,n){for(const r of n)r instanceof Qx?(t.La.addReference(r.key,e),vO(t,r)):r instanceof Yx?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||tI(t,r.key)):Y()}function vO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),sg(t))}function sg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(we.fromString(e)),r=t.qa.next();t.Na.set(r,new aO(n)),t.Oa=t.Oa.insert(n,r),Fx(t.remoteStore,new Gr(qn(Bm(n.path)),r,"TargetPurposeLimboResolution",Mm.oe))}}async function xl(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){s.push(c);const p=Ym.Wi(u.targetId,c);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const h=Z(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(c,g=>U.forEach(g.$i,w=>h.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>U.forEach(g.Ui,w=>h.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!_l(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const w=h.os.get(g),C=w.snapshotVersion,A=w.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(g,A)}}}(r.localStore,i))}async function _O(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Mx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(j.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xl(n,r.hs)}}function wO(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function nI(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mO.bind(null,e),e.Ca.d_=rO.bind(null,e.eventManager),e.Ca.$a=sO.bind(null,e.eventManager),e}function EO(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yO.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return CD(this.persistence,new SD,e.initialUser,this.serializer)}Ga(e){return new TD(Qm.Zr,this.serializer)}Wa(e){return new OD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class vp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_O.bind(null,this.syncEngine),await eO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nO}()}createDatastore(e){const n=Rd(e.databaseInfo.databaseId),r=function(i){return new jD(i)}(e.databaseInfo);return function(i,o,a,u){return new zD(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new $D(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>G_(this.syncEngine,n,0),function(){return $_.D()?new $_:new LD}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const p=new lO(s,i,o,a,u,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Tl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vp.provider={build:()=>new vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=rx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ng(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Mx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Y_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xO(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>q_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>q_(e.remoteStore,s)),t._onlineComponents=e}async function xO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await zh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await zh(t,new Uc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await zh(t,new Uc);return t._offlineComponents}async function sI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Y_(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Y_(t,new vp))),t._onlineComponents}function IO(t){return sI(t).then(e=>e.syncEngine)}async function iI(t){const e=await sI(t),n=e.eventManager;return n.onListen=uO.bind(null,e.syncEngine),n.onUnlisten=hO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fO.bind(null,e.syncEngine),n}function SO(t,e,n={}){const r=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new rI({next:g=>{h.Za(),o.enqueueAndForget(()=>Kx(i,p));const w=g.docs.has(a);!w&&g.fromCache?c.reject(new $(j.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?c.reject(new $(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new Gx(Bm(a.path),h,{includeMetadataChanges:!0,_a:!0});return Hx(i,p)}(await iI(t),t.asyncQueue,e,n,r)),r.promise}function kO(t,e,n={}){const r=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new rI({next:g=>{h.Za(),o.enqueueAndForget(()=>Kx(i,p)),g.fromCache&&u.source==="server"?c.reject(new $(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new Gx(a,h,{includeMetadataChanges:!0,_a:!0});return Hx(i,p)}(await iI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e,n){if(!n)throw new $(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CO(t,e,n,r){if(e===!0&&r===!0)throw new $(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function J_(t){if(!H.isDocumentKey(t))throw new $(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z_(t){if(H.isDocumentKey(t))throw new $(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pd(t);throw new $(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function RO(t,e){if(e<=0)throw new $(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qb;switch(r.type){case"firstParty":return new Gb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=X_.get(n);r&&(W("ComponentProvider","Removing Datastore"),X_.delete(n),r.terminate())}(this),Promise.resolve()}}function AO(t,e,n,r={}){var s;const i=(t=Cn(t,bd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Tt.MOCK_USER;else{a=cT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new $(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tt(c)}t._authCredentials=new Wb(new nx(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class os extends Ts{constructor(e,n,r){super(e,n,Bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new H(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function Dt(t,e,...n){if(t=xe(t),aI("collection","path",e),t instanceof bd){const r=we.fromString(e,...n);return Z_(r),new os(t,null,r)}{if(!(t instanceof bt||t instanceof os))throw new $(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Z_(r),new os(t.firestore,null,r)}}function Qe(t,e,...n){if(t=xe(t),arguments.length===1&&(e=rx.newId()),aI("doc","path",e),t instanceof bd){const r=we.fromString(e,...n);return J_(r),new bt(t,null,new H(r))}{if(!(t instanceof bt||t instanceof os))throw new $(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return J_(r),new bt(t.firestore,t instanceof os?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jx(this,"async_queue_retry"),this.Vu=()=>{const r=Fh();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_l(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=tg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ci extends bd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new t0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new t0(e),this._firestoreClient=void 0,await e}}}function NO(t,e){const n=typeof t=="object"?t:Sm(),r=typeof t=="string"?t:"(default)",s=vd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=aT("firestore");i&&AO(s,...i)}return s}function ig(t){if(t._terminated)throw new $(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PO(t),t._firestoreClient}function PO(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,h){return new a2(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(ht.fromBase64String(e))}catch(n){throw new $(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^__.*__$/;class DO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,n,this.fieldTransforms):new wl(e,this.data,n,this.fieldTransforms)}}class lI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class lg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uI(this.Cu)&&bO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class OO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rd(e)}Qu(e,n,r,s=!1){return new lg({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ld(t){const e=t._freezeSettings(),n=Rd(t._databaseId);return new OO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cI(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);cg("Data must be an object, but it was:",o,r);const a=dI(r,o);let u,c;if(i.merge)u=new Kt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=_p(e,p,n);if(!o.contains(g))throw new $(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);fI(h,g)||h.push(g)}u=new Kt(h),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new DO(new Ut(a),u,c)}class Md extends Od{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}class ug extends Od{_toFieldTransform(e){return new b2(e.path,new Za)}isEqual(e){return e instanceof ug}}function LO(t,e,n,r){const s=t.Qu(1,e,n);cg("Data must be an object, but it was:",s,r);const i=[],o=Ut.empty();li(r,(u,c)=>{const h=dg(e,u,n);c=xe(c);const p=s.Nu(h);if(c instanceof Md)i.push(h);else{const g=Il(c,p);g!=null&&(i.push(h),o.set(h,g))}});const a=new Kt(i);return new lI(o,a,s.fieldTransforms)}function MO(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[_p(e,r,n)],u=[s];if(i.length%2!=0)throw new $(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(_p(e,i[g])),u.push(i[g+1]);const c=[],h=Ut.empty();for(let g=a.length-1;g>=0;--g)if(!fI(c,a[g])){const w=a[g];let C=u[g];C=xe(C);const A=o.Nu(w);if(C instanceof Md)c.push(w);else{const R=Il(C,A);R!=null&&(c.push(w),h.set(w,R))}}const p=new Kt(c);return new lI(h,p,o.fieldTransforms)}function VO(t,e,n,r=!1){return Il(n,t.Qu(r?4:3,e))}function Il(t,e){if(hI(t=xe(t)))return cg("Unsupported field value:",e,t),dI(t,e);if(t instanceof Od)return function(r,s){if(!uI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=Il(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:Vc(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vc(s.serializer,i)}}if(r instanceof og)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof go)return{bytesValue:Ax(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Km(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ag)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return $m(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Pd(r)}`)}(t,e)}function dI(t,e){const n={};return sx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(t,(r,s)=>{const i=Il(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof og||t instanceof go||t instanceof bt||t instanceof Od||t instanceof ag)}function cg(t,e,n){if(!hI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Pd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function _p(t,e,n){if((e=xe(e))instanceof Dd)return e._internalPath;if(typeof e=="string")return dg(t,e);throw Fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const jO=new RegExp("[~\\*/\\[\\]]");function dg(t,e,n){if(e.search(jO)>=0)throw Fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dd(...e.split("."))._internalPath}catch{throw Fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(j.INVALID_ARGUMENT,a+t+u)}function fI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UO extends pI{data(){return super.data()}}function hg(t,e){return typeof e=="string"?dg(t,e):e instanceof Dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fg{}class pg extends fg{}function di(t,e,...n){let r=[];e instanceof fg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof gg).length,a=i.filter(u=>u instanceof mg).length;if(o>1||o>0&&a>0)throw new $(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class mg extends pg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mg(e,n,r)}_apply(e){const n=this._parse(e);return mI(e._query,n),new Ts(e.firestore,e.converter,cp(e._query,n))}_parse(e){const n=Ld(e.firestore);return function(i,o,a,u,c,h,p){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){r0(p,h);const w=[];for(const C of p)w.push(n0(u,i,C));g={arrayValue:{values:w}}}else g=n0(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||r0(p,h),g=VO(a,o,p,h==="in"||h==="not-in");return $e.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class gg extends fg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const u of a)mI(o,u),o=cp(o,u)}(e._query,n),new Ts(e.firestore,e.converter,cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yg extends pg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ja(i,o)}(e._query,this._field,this._direction);return new Ts(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Co(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function hi(t,e="asc"){const n=e,r=hg("orderBy",t);return yg._create(r,n)}class vg extends pg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new vg(e,n,r)}_apply(e){return new Ts(e.firestore,e.converter,Lc(e._query,this._limit,this._limitType))}}function zO(t){return RO("limit",t),vg._create("limit",t,"F")}function n0(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new $(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fx(e)&&n.indexOf("/")!==-1)throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!H.isDocumentKey(r))throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return I_(t,new H(r))}if(n instanceof bt)return I_(t,n._key);throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pd(n)}.`)}function r0(t,e){if(!Array.isArray(t)||t.length===0)throw new $(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BO{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return li(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new ag(i)}convertGeoPoint(e){return new og(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const n=ds(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);he(Lx(r));const s=new Ya(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||yr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yI extends pI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qu extends yI{data(e={}){return super.data(e)}}class $O{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new la(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qu(this._firestore,this._userDataWriter,r.key,r,new la(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const u=new Qu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new la(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const u=new Qu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new la(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:qO(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t){t=Cn(t,bt);const e=Cn(t.firestore,ci);return SO(ig(e),t._key).then(n=>HO(e,t,n))}class vI extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function fs(t){t=Cn(t,Ts);const e=Cn(t.firestore,ci),n=ig(e),r=new vI(e);return FO(t._query),kO(n,t._query).then(s=>new $O(e,r,t,s))}function WO(t,e,n){t=Cn(t,bt);const r=Cn(t.firestore,ci),s=gI(t.converter,e);return Vd(r,[cI(Ld(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,un.none())])}function yo(t,e,n,...r){t=Cn(t,bt);const s=Cn(t.firestore,ci),i=Ld(s);let o;return o=typeof(e=xe(e))=="string"||e instanceof Dd?MO(i,"updateDoc",t._key,e,n,r):LO(i,"updateDoc",t._key,e),Vd(s,[o.toMutation(t._key,un.exists(!0))])}function Sl(t){return Vd(Cn(t.firestore,ci),[new qm(t._key,un.none())])}function ti(t,e){const n=Cn(t.firestore,ci),r=Qe(t),s=gI(t.converter,e);return Vd(n,[cI(Ld(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then(()=>r)}function Vd(t,e){return function(r,s){const i=new ur;return r.asyncQueue.enqueueAndForget(async()=>pO(await IO(r),s,i)),i.promise}(ig(t),e)}function HO(t,e,n){const r=n.docs.get(e._key),s=new vI(t);return new yI(t,s,e._key,r,new la(n.hasPendingWrites,n.fromCache),e.converter)}function tt(){return new ug("serverTimestamp")}(function(e,n=!0){(function(s){ko=s})(oi),Qs(new us("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ci(new Hb(r.getProvider("auth-internal")),new Yb(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ya(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zn(__,"4.7.3",e),zn(__,"4.7.3","esm2017")})();var KO="firebase",GO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(KO,GO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebasestorage.googleapis.com",wI="storageBucket",QO=2*60*1e3,YO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends Kn{constructor(e,n,r=0){super(Bh(e),`Firebase Storage: ${n} (${Bh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function Bh(t){return"storage/"+t}function _g(){const t="An unknown error occurred, please check the error payload for server response.";return new Oe(De.UNKNOWN,t)}function XO(t){return new Oe(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function JO(t){return new Oe(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ZO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Oe(De.UNAUTHENTICATED,t)}function eL(){return new Oe(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tL(t){return new Oe(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nL(){return new Oe(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rL(){return new Oe(De.CANCELED,"User canceled the upload/download.")}function sL(t){return new Oe(De.INVALID_URL,"Invalid URL '"+t+"'.")}function iL(t){return new Oe(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oL(){return new Oe(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wI+"' property when initializing the app?")}function aL(){return new Oe(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lL(){return new Oe(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uL(t){return new Oe(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wp(t){return new Oe(De.INVALID_ARGUMENT,t)}function EI(){return new Oe(De.APP_DELETED,"The Firebase app was deleted.")}function cL(t){return new Oe(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xa(t,e){return new Oe(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Jo(t){throw new Oe(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Gt.makeFromUrl(e,n)}catch{return new Gt(e,"")}if(r.path==="")return r;throw iL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${h}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},A=n===_I?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",E=new RegExp(`^https?://${A}/${s}/${R}`,"i"),v=[{regex:a,indices:u,postModify:i},{regex:w,indices:C,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<v.length;b++){const V=v[b],D=V.regex.exec(e);if(D){const x=D[V.indices.bucket];let y=D[V.indices.path];y||(y=""),r=new Gt(x,y),V.postModify(r);break}}if(r==null)throw sL(e);return r}}class dL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...R){c||(c=!0,e.apply(null,R))}function p(R){s=setTimeout(()=>{s=null,t(w,u())},R)}function g(){i&&clearTimeout(i)}function w(R,...E){if(c){g();return}if(R){g(),h.call(null,R,...E);return}if(u()||o){g(),h.call(null,R,...E);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,p(v)}let C=!1;function A(R){C||(C=!0,g(),!c&&(s!==null?(R||(a=2),clearTimeout(s),p(0)):R||(a=1)))}return p(0),i=setTimeout(()=>{o=!0,A(!0)},n),A}function fL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return t!==void 0}function mL(t){return typeof t=="object"&&!Array.isArray(t)}function wg(t){return typeof t=="string"||t instanceof String}function s0(t){return Eg()&&t instanceof Blob}function Eg(){return typeof Blob<"u"}function i0(t,e,n,r){if(r<e)throw wp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function TI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var $s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($s||($s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n,r,s,i,o,a,u,c,h,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,C)=>{this.resolve_=w,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Iu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===$s.NO_ERROR,u=i.getStatus();if(!a||gL(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===$s.ABORT;r(!1,new Iu(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Iu(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());pL(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=_g();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?EI():rL();o(u)}else{const u=nL();o(u)}};this.canceled_?n(!1,new Iu(!1,null,!0)):this.backoffId_=hL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Iu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _L(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function EL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function TL(t,e,n,r,s,i,o=!0){const a=TI(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return wL(c,e),vL(c,n),_L(c,i),EL(c,r),new yL(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function IL(...t){const e=xL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Eg())return new Blob(t);throw new Oe(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function SL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t){if(typeof atob>"u")throw uL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $h{constructor(e,n){this.data=e,this.contentType=n||null}}function CL(t,e){switch(t){case jn.RAW:return new $h(xI(e));case jn.BASE64:case jn.BASE64URL:return new $h(II(t,e));case jn.DATA_URL:return new $h(AL(e),NL(e))}throw _g()}function xI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function RL(t){let e;try{e=decodeURIComponent(t)}catch{throw xa(jn.DATA_URL,"Malformed data URL.")}return xI(e)}function II(t,e){switch(t){case jn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw xa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case jn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw xa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kL(e)}catch(s){throw s.message.includes("polyfill")?s:xa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class SI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw xa(jn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=PL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function AL(t){const e=new SI(t);return e.base64?II(jn.BASE64,e.rest):RL(e.rest)}function NL(t){return new SI(t).contentType}function PL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){let r=0,s="";s0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(s0(this.data_)){const r=this.data_,s=SL(r,e,n);return s===null?null:new qr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new qr(r,!0)}}static getBlob(...e){if(Eg()){const n=e.map(r=>r instanceof qr?r.data_:r);return new qr(IL.apply(null,n))}else{const n=e.map(o=>wg(o)?CL(jn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new qr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){let e;try{e=JSON.parse(t)}catch{return null}return mL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function CI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e){return e}class At{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||OL}}let Su=null;function LL(t){return!wg(t)||t.length<2?t:CI(t)}function RI(){if(Su)return Su;const t=[];t.push(new At("bucket")),t.push(new At("generation")),t.push(new At("metageneration")),t.push(new At("name","fullPath",!0));function e(i,o){return LL(o)}const n=new At("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new At("size");return s.xform=r,t.push(s),t.push(new At("timeCreated")),t.push(new At("updated")),t.push(new At("md5Hash",null,!0)),t.push(new At("cacheControl",null,!0)),t.push(new At("contentDisposition",null,!0)),t.push(new At("contentEncoding",null,!0)),t.push(new At("contentLanguage",null,!0)),t.push(new At("contentType",null,!0)),t.push(new At("metadata","customMetadata",!0)),Su=t,Su}function ML(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Gt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function VL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ML(r,t),r}function AI(t,e,n){const r=kI(e);return r===null?null:VL(t,r,n)}function jL(t,e,n,r){const s=kI(e);if(s===null||!wg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const h=t.bucket,p=t.fullPath,g="/b/"+o(h)+"/o/"+o(p),w=jd(g,n,r),C=TI({alt:"media",token:c});return w+C})[0]}function UL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Tg{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t){if(!t)throw _g()}function FL(t,e){function n(r,s){const i=AI(t,s,e);return NI(i!==null),i}return n}function zL(t,e){function n(r,s){const i=AI(t,s,e);return NI(i!==null),jL(i,s,t.host,t._protocol)}return n}function PI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=eL():s=ZO():n.getStatus()===402?s=JO(t.bucket):n.getStatus()===403?s=tL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function bI(t){const e=PI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=XO(t.path)),i.serverResponse=s.serverResponse,i}return n}function BL(t,e,n){const r=e.fullServerUrl(),s=jd(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Tg(s,i,zL(t,n),o);return a.errorHandler=bI(e),a}function $L(t,e){const n=e.fullServerUrl(),r=jd(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const a=new Tg(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=bI(e),a}function qL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function WL(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=qL(null,e)),r}function HL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let b=0;b<2;b++)v=v+Math.random().toString().slice(2);return v}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=WL(e,r,s),h=UL(c,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=qr.getBlob(p,r,g);if(w===null)throw aL();const C={name:c.fullPath},A=jd(i,t.host,t._protocol),R="POST",E=t.maxUploadRetryTime,_=new Tg(A,R,FL(t,n),E);return _.urlParams=C,_.headers=o,_.body=w.uploadData(),_.errorHandler=PI(e),_}class KL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Jo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class GL extends KL{initXhr(){this.xhr_.responseType="text"}}function xg(){return new GL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n){this._service=e,n instanceof Gt?this._location=n:this._location=Gt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ni(e,n)}get root(){const e=new Gt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CI(this._location.path)}get storage(){return this._service}get parent(){const e=bL(this._location.path);if(e===null)return null;const n=new Gt(this._location.bucket,e);return new ni(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cL(e)}}function QL(t,e,n){t._throwIfRoot("uploadBytes");const r=HL(t.storage,t._location,RI(),new qr(e,!0),n);return t.storage.makeRequestWithTokens(r,xg).then(s=>({metadata:s,ref:t}))}function YL(t){t._throwIfRoot("getDownloadURL");const e=BL(t.storage,t._location,RI());return t.storage.makeRequestWithTokens(e,xg).then(n=>{if(n===null)throw lL();return n})}function XL(t){t._throwIfRoot("deleteObject");const e=$L(t.storage,t._location);return t.storage.makeRequestWithTokens(e,xg)}function JL(t,e){const n=DL(t._location.path,e),r=new Gt(t._location.bucket,n);return new ni(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){return/^[A-Za-z]+:\/\//.test(t)}function eM(t,e){return new ni(t,e)}function DI(t,e){if(t instanceof Ig){const n=t;if(n._bucket==null)throw oL();const r=new ni(n,n._bucket);return e!=null?DI(r,e):r}else return e!==void 0?JL(t,e):t}function tM(t,e){if(e&&ZL(e)){if(t instanceof Ig)return eM(t,e);throw wp("To use ref(service, url), the first argument must be a Storage instance.")}else return DI(t,e)}function o0(t,e){const n=e==null?void 0:e[wI];return n==null?null:Gt.makeFromBucketSpec(n,t)}function nM(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:cT(s,t.app.options.projectId))}class Ig{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=_I,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QO,this._maxUploadRetryTime=YO,this._requests=new Set,s!=null?this._bucket=Gt.makeFromBucketSpec(s,this._host):this._bucket=o0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gt.makeFromBucketSpec(this._url,e):this._bucket=o0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ni(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new dL(EI());{const o=TL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const a0="@firebase/storage",l0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="storage";function rM(t,e,n){return t=xe(t),QL(t,e,n)}function sM(t){return t=xe(t),YL(t)}function iM(t){return t=xe(t),XL(t)}function u0(t,e){return t=xe(t),tM(t,e)}function oM(t=Sm(),e){t=xe(t);const r=vd(t,OI).getImmediate({identifier:e}),s=aT("storage");return s&&aM(r,...s),r}function aM(t,e,n,r={}){nM(t,e,n,r)}function lM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ig(n,r,s,e,oi)}function uM(){Qs(new us(OI,lM,"PUBLIC").setMultipleInstances(!0)),zn(a0,l0,""),zn(a0,l0,"esm2017")}uM();const cM={apiKey:"AIzaSyAuJwd1I0hNuRhsORwOKXc4QYTgmJ0qBHA",authDomain:"riverside-ranch.firebaseapp.com",projectId:"riverside-ranch",storageBucket:"riverside-ranch.firebasestorage.app",messagingSenderId:"823902144181",appId:"1:823902144181:web:65fb56bf3dc27cb0b720fc"},Sg=fT(cM),ku=Bb(Sg),oe=NO(Sg),c0=oM(Sg),LI=I.createContext(null),dM="theodorelockheart";function d0(t){return`${t.toLowerCase().replace(/[^a-z0-9]/g,"")}@riverside.ranch`}function hM({children:t}){const[e,n]=I.useState(null),[r,s]=I.useState(null),[i,o]=I.useState(!0);I.useEffect(()=>NP(ku,async C=>{n(C),C?await a(C.uid):s(null),o(!1)}),[]);async function a(w){const C=await No(Qe(oe,"users",w));C.exists()&&s({id:C.id,...C.data()})}async function u(w,C){const A=d0(w),{user:R}=await SP(ku,A,C);await a(R.uid)}async function c(w,C,A){const R=d0(w),E=w.toLowerCase().replace(/[^a-z0-9]/g,""),{user:_}=await IP(ku,R,A);await CP(_,{displayName:C});const v=E===dM?"admin":"member";await WO(Qe(oe,"users",_.uid),{username:E,characterName:C,displayName:C,role:v,createdAt:tt()}),await a(_.uid)}async function h(){await PP(ku),n(null),s(null)}const p=e&&r?{uid:e.uid,displayName:r.characterName||r.displayName}:null,g=(r==null?void 0:r.role)==="admin";return f.jsx(LI.Provider,{value:{user:e,profile:r,currentUser:p,loading:i,isAdmin:g,signIn:u,signUp:c,signOut:h},children:t})}function An(){const t=I.useContext(LI);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const MI=I.createContext(null);function fM({children:t}){const[e,n]=I.useState(()=>{const s=localStorage.getItem("riverside-theme");return s?s==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});I.useEffect(()=>{document.documentElement.classList.toggle("dark",e),localStorage.setItem("riverside-theme",e?"dark":"light")},[e]);const r=()=>n(s=>!s);return f.jsx(MI.Provider,{value:{dark:e,toggle:r},children:t})}function pM(){const t=I.useContext(MI);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=I.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:u,...c},h)=>I.createElement("svg",{ref:h,...mM,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${gM(t)}`,a].join(" "),...c},[...e.map(([p,g])=>I.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=le("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=le("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=le("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=le("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=le("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=le("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=le("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=le("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=le("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),MM=[{to:"/",icon:SM,label:"Dashboard"},{to:"/orders",icon:kg,label:"Orders"},{to:"/quotes",icon:VI,label:"Quotes"},{to:"/logs",icon:Rg,label:"Misc Log"},{to:"/todos",icon:nl,label:"Daily Tasks"},{to:"/posters",icon:jI,label:"Posters"}];function VM(){const{profile:t,signOut:e,isAdmin:n}=An(),{dark:r,toggle:s}=pM(),[i,o]=I.useState(!1),a=({isActive:c})=>`flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c?"bg-wood-700 text-parchment-50 dark:bg-wood-600":"text-wood-700 dark:text-parchment-300 hover:bg-parchment-200 dark:hover:bg-wood-800"}`,u=f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"px-4 py-6 border-b border-parchment-200 dark:border-wood-800",children:[f.jsx("h1",{className:"font-display text-xl font-bold text-wood-800 dark:text-parchment-100",children:"Riverside Ranch"}),f.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400 mt-0.5",children:"Management System"})]}),f.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:[MM.map(({to:c,icon:h,label:p})=>f.jsxs(Fv,{to:c,className:a,onClick:()=>o(!1),children:[f.jsx(h,{size:18}),p]},c)),n&&f.jsxs(Fv,{to:"/admin",className:a,onClick:()=>o(!1),children:[f.jsx(FI,{size:18}),"Admin Panel"]})]}),f.jsxs("div",{className:"px-3 py-4 border-t border-parchment-200 dark:border-wood-800 space-y-2",children:[f.jsxs("div",{className:"px-4 py-2",children:[f.jsx("p",{className:"text-sm font-medium truncate",children:(t==null?void 0:t.characterName)||(t==null?void 0:t.displayName)}),f.jsxs("p",{className:"text-xs text-wood-500 dark:text-wood-400",children:["@",t==null?void 0:t.username,"  ",f.jsx("span",{className:"capitalize",children:t==null?void 0:t.role})]})]}),f.jsxs("button",{onClick:s,className:"flex items-center gap-3 w-full px-4 py-2 rounded-lg text-sm hover:bg-parchment-200 dark:hover:bg-wood-800 transition-colors",children:[r?f.jsx(PM,{size:18}):f.jsx(AM,{size:18}),r?"Light Mode":"Dark Mode"]}),f.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 rounded-lg text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[f.jsx(CM,{size:18}),"Sign Out"]})]})]});return f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>o(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-lg bg-white dark:bg-wood-900 shadow-md border border-parchment-200 dark:border-wood-700",children:f.jsx(RM,{size:20})}),i&&f.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-black/40",onClick:()=>o(!1),children:f.jsxs("aside",{className:"w-64 h-full bg-white dark:bg-wood-950 flex flex-col shadow-xl",onClick:c=>c.stopPropagation(),children:[f.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 p-1",children:f.jsx($I,{size:20})}),u]})}),f.jsx("aside",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 bg-white dark:bg-wood-950 border-r border-parchment-200 dark:border-wood-800",children:u})]})}function jM(){const{user:t,loading:e}=An();return e?f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-10 h-10 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin mx-auto"}),f.jsx("p",{className:"mt-3 text-sm text-wood-600 dark:text-wood-400",children:"Loading..."})]})}):t?f.jsxs("div",{className:"min-h-screen",children:[f.jsx(VM,{}),f.jsx("main",{className:"lg:pl-64",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-16 lg:pt-8",children:f.jsx(GC,{})})})]}):f.jsx(Em,{to:"/login",replace:!0})}function UM(){const{user:t,loading:e,signIn:n,signUp:r}=An(),[s,i]=I.useState(!1),[o,a]=I.useState(""),[u,c]=I.useState(""),[h,p]=I.useState(""),[g,w]=I.useState(!1);if(e)return null;if(t)return f.jsx(Em,{to:"/",replace:!0});async function C(A){A.preventDefault(),w(!0);try{if(s){if(o.length<3){G.error("Username must be at least 3 characters"),w(!1);return}await r(o,u,h),G.success("Welcome to Riverside Ranch!")}else await n(o,h),G.success("Welcome back!")}catch(R){R.code==="auth/user-not-found"||R.code==="auth/invalid-credential"?G.error("Invalid username or password"):R.code==="auth/email-already-in-use"?G.error("That username is already taken"):R.code==="auth/weak-password"?G.error("Password must be at least 6 characters"):G.error(R.message)}finally{w(!1)}}return f.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-parchment-50 dark:bg-wood-950",children:f.jsxs("div",{className:"w-full max-w-md",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-wood-800 flex items-center justify-center mx-auto mb-4",children:f.jsx("span",{className:"font-display text-3xl font-bold text-parchment-200",children:"R"})}),f.jsx("h1",{className:"font-display text-3xl font-bold text-wood-800 dark:text-parchment-100",children:"Riverside Ranch"}),f.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400 mt-1",children:"Management System"})]}),f.jsxs("div",{className:"card p-6",children:[f.jsxs("form",{onSubmit:C,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Username"}),f.jsx("input",{type:"text",className:"input",placeholder:"e.g. theodorelockheart",value:o,onChange:A=>a(A.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")),required:!0,minLength:3}),f.jsx("p",{className:"text-xs text-wood-400 mt-1",children:"Letters and numbers only, no spaces"})]}),s&&f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Character Name"}),f.jsx("input",{type:"text",className:"input",placeholder:"e.g. Theodore Lockheart",value:u,onChange:A=>c(A.target.value),required:s}),f.jsx("p",{className:"text-xs text-wood-400 mt-1",children:"Your in-game character name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Password"}),f.jsx("input",{type:"password",className:"input",placeholder:"Enter password",value:h,onChange:A=>p(A.target.value),required:!0,minLength:6})]}),f.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:g,children:g?"Please wait...":s?"Create Account":"Sign In"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx("button",{onClick:()=>i(!s),className:"text-sm text-wood-600 dark:text-wood-400 hover:underline",children:s?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}function Ag(t){return{id:t.id,...t.data()}}function ps(t){return t.docs.map(Ag)}async function Yt(t,e,n,r,s){await ti(Dt(oe,"activity"),{userId:t,userName:e,action:n,entityType:r,entityId:s,createdAt:tt()})}const Ri={async list({status:t,search:e}={}){const n=await fs(di(Dt(oe,"orders"),hi("createdAt","desc")));let r=ps(n);if(t&&(r=r.filter(s=>s.status===t)),e){const s=e.toLowerCase();r=r.filter(i=>i.customerName.toLowerCase().includes(s)||i.description.toLowerCase().includes(s))}return r},async get(t){const e=await No(Qe(oe,"orders",t));if(!e.exists())throw new Error("Order not found");return Ag(e)},async create(t,e){const n=await ti(Dt(oe,"orders"),{customerName:t.customerName,contactInfo:t.contactInfo,description:t.description,price:Number(t.price)||0,depositPaid:Number(t.depositPaid)||0,notes:t.notes||"",status:"outstanding",assignedTo:t.assignedTo||null,assignedToName:t.assignedToName||null,createdBy:e.uid,createdByName:e.displayName,createdAt:tt(),updatedAt:tt()});return await Yt(e.uid,e.displayName,`Created order for ${t.customerName}`,"order",n.id),{id:n.id}},async update(t,e,n){await yo(Qe(oe,"orders",t),{...e,updatedAt:tt()});const r=e.status?`  ${e.status}`:"";await Yt(n.uid,n.displayName,`Updated order${r}`,"order",t)},async delete(t,e){await Sl(Qe(oe,"orders",t)),await Yt(e.uid,e.displayName,"Deleted an order","order",t)},async stats(){const t=await fs(Dt(oe,"orders")),e=ps(t),n=new Date;n.setHours(0,0,0,0);const r=e.filter(a=>a.status==="outstanding").reduce((a,u)=>a+Number(u.price||0),0),s=e.filter(a=>a.status!=="delivered").reduce((a,u)=>a+Number(u.depositPaid||0),0),i=e.filter(a=>{var c,h;return a.status!=="delivered"?!1:(((h=(c=a.updatedAt)==null?void 0:c.toDate)==null?void 0:h.call(c))||new Date(0))>=n}).length,o=e.filter(a=>a.status==="ready").length;return{totalOutstanding:r,totalDeposits:s,completedToday:i,pendingDeliveries:o}}},Ii={async list({status:t,search:e}={}){const n=await fs(di(Dt(oe,"quotes"),hi("createdAt","desc")));let r=ps(n);if(t&&(r=r.filter(s=>s.status===t)),e){const s=e.toLowerCase();r=r.filter(i=>i.customerName.toLowerCase().includes(s)||i.requestedItems.toLowerCase().includes(s))}return r},async create(t,e){const n=await ti(Dt(oe,"quotes"),{customerName:t.customerName,contactInfo:t.contactInfo,requestedItems:t.requestedItems,estimatedPrice:Number(t.estimatedPrice)||0,notes:t.notes||"",status:"pending",convertedOrderId:null,createdBy:e.uid,createdAt:tt(),updatedAt:tt()});return await Yt(e.uid,e.displayName,`Created quote for ${t.customerName}`,"quote",n.id),{id:n.id}},async update(t,e){await yo(Qe(oe,"quotes",t),{...e,updatedAt:tt()})},async delete(t,e){await Sl(Qe(oe,"quotes",t)),await Yt(e.uid,e.displayName,"Deleted a quote","quote",t)},async convert(t,e){const n=await No(Qe(oe,"quotes",t));if(!n.exists())throw new Error("Quote not found");const r=n.data(),s=await ti(Dt(oe,"orders"),{customerName:r.customerName,contactInfo:r.contactInfo,description:r.requestedItems,price:r.estimatedPrice,depositPaid:0,notes:r.notes||"",status:"outstanding",assignedTo:null,assignedToName:null,createdBy:e.uid,createdByName:e.displayName,createdAt:tt(),updatedAt:tt()});return await yo(Qe(oe,"quotes",t),{status:"accepted",convertedOrderId:s.id,updatedAt:tt()}),await Yt(e.uid,e.displayName,`Converted quote for ${r.customerName} to order`,"quote",t),{id:s.id}}},Yu={async list({category:t,max:e}={}){const n=await fs(di(Dt(oe,"misc_logs"),hi("createdAt","desc")));let r=ps(n);return t&&t!=="all"&&(r=r.filter(s=>s.category===t)),e&&(r=r.slice(0,e)),r},async create(t,e){const n=await ti(Dt(oe,"misc_logs"),{userId:e.uid,userName:e.displayName,description:t.description,amount:t.amount?Number(t.amount):null,category:t.category||"misc",createdAt:tt()});return await Yt(e.uid,e.displayName,`Logged: ${t.description}`,"log",n.id),{id:n.id}},async delete(t,e){await Sl(Qe(oe,"misc_logs",t)),await Yt(e.uid,e.displayName,"Deleted a log entry","log",t)}},Ls={async list(){const t=await fs(di(Dt(oe,"todos"),hi("sortOrder","asc")));return ps(t)},async create(t,e){const n=await ti(Dt(oe,"todos"),{title:t.title,description:t.description||"",assignedRole:t.assignedRole||null,isCompleted:!1,completedBy:null,completedByName:null,completedAt:null,createdBy:e.uid,createdAt:tt(),updatedAt:tt(),sortOrder:Number(t.sortOrder)||0});return await Yt(e.uid,e.displayName,`Added task: ${t.title}`,"todo",n.id),{id:n.id}},async update(t,e){await yo(Qe(oe,"todos",t),{...e,updatedAt:tt()})},async toggle(t,e){const n=await No(Qe(oe,"todos",t));if(!n.exists())throw new Error("Todo not found");const r=n.data(),s=!r.isCompleted,i={isCompleted:s,completedBy:s?e.uid:null,completedByName:s?e.displayName:null,completedAt:s?tt():null,updatedAt:tt()};return await yo(Qe(oe,"todos",t),i),await Yt(e.uid,e.displayName,`${s?"Completed":"Unchecked"} task: ${r.title}`,"todo",t),{id:t,...r,...i,completedAt:s?new Date:null}},async delete(t,e){await Sl(Qe(oe,"todos",t)),await Yt(e.uid,e.displayName,"Deleted a task","todo",t)}},Wh={async list(){const t=await fs(di(Dt(oe,"posters"),hi("createdAt","desc")));return ps(t)},async upload(t,e,n){const r=`${crypto.randomUUID()}-${t.name}`,s=u0(c0,`posters/${r}`);await rM(s,t,{contentType:t.type});const i=await sM(s),o=await ti(Dt(oe,"posters"),{title:e,imageUrl:i,storagePath:`posters/${r}`,uploadedBy:n.uid,createdAt:tt()});return await Yt(n.uid,n.displayName,`Uploaded poster: ${e}`,"poster",o.id),{id:o.id,imageUrl:i}},async delete(t,e){const n=await No(Qe(oe,"posters",t));if(!n.exists())throw new Error("Poster not found");const r=n.data();try{await iM(u0(c0,r.storagePath))}catch{}await Sl(Qe(oe,"posters",t)),await Yt(e.uid,e.displayName,`Deleted poster: ${r.title}`,"poster",t)}},FM={async list({max:t=20}={}){const e=await fs(di(Dt(oe,"activity"),hi("createdAt","desc"),zO(t)));return ps(e)}},qI={async get(t){const e=await No(Qe(oe,"users",t));return e.exists()?Ag(e):null},async list(){const t=await fs(di(Dt(oe,"users"),hi("displayName")));return ps(t)}};function WI(t){return t?t.toDate?t.toDate():new Date(t):null}function Ud(t){const e=WI(t);return e?e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function zc(t){const e=WI(t);return e?e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):""}function or(t){return`$${Number(t||0).toFixed(2)}`}const Bc=[{value:"outstanding",label:"Outstanding",color:"badge-outstanding"},{value:"preparing",label:"Preparing",color:"badge-preparing"},{value:"ready",label:"Ready for Delivery",color:"badge-ready"},{value:"delivered",label:"Delivered",color:"badge-delivered"}],Ep=[{value:"pending",label:"Pending",color:"badge-pending"},{value:"accepted",label:"Accepted",color:"badge-accepted"},{value:"rejected",label:"Rejected",color:"badge-rejected"}],h0=[{value:"livestock",label:"Livestock"},{value:"crops",label:"Crops"},{value:"finance",label:"Finance"},{value:"delivery",label:"Delivery"},{value:"misc",label:"Misc"}];function zM(t,e){if(!t.length)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(a=>n.map(u=>{const c=a[u]??"";return typeof c=="string"&&c.includes(",")?`"${c}"`:c}).join(","))].join(`
`),s=new Blob([r],{type:"text/csv"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`${e}.csv`,o.click(),URL.revokeObjectURL(i)}function fi({title:t,description:e,actions:n}){return f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-display text-2xl font-bold",children:t}),e&&f.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400 mt-1",children:e})]}),n&&f.jsx("div",{className:"flex items-center gap-2",children:n})]})}function BM(){const{profile:t,currentUser:e}=An(),[n,r]=I.useState(null),[s,i]=I.useState([]),[o,a]=I.useState([]),[u,c]=I.useState([]),[h,p]=I.useState([]),[g,w]=I.useState(!0);I.useEffect(()=>{C()},[]);async function C(){try{const E=await Promise.allSettled([Ri.list(),Yu.list({max:10}),Ls.list(),FM.list({max:10})]),[_,v,b,V]=E.map(y=>y.status==="fulfilled"?y.value:[]),D=_,x=new Date;x.setHours(0,0,0,0),r({totalOutstanding:D.filter(y=>y.status==="outstanding").reduce((y,S)=>y+Number(S.price||0),0),totalDeposits:D.filter(y=>y.status!=="delivered").reduce((y,S)=>y+Number(S.depositPaid||0),0),completedToday:D.filter(y=>{var k,P;return y.status!=="delivered"?!1:(((P=(k=y.updatedAt)==null?void 0:k.toDate)==null?void 0:P.call(k))||new Date(0))>=x}).length,pendingDeliveries:D.filter(y=>y.status==="ready").length}),i(D.filter(y=>y.status==="outstanding").slice(0,10)),a(v),c(b),p(V)}catch{G.error("Failed to load dashboard")}finally{w(!1)}}async function A(E){try{const _=await Ls.toggle(E,e);c(v=>v.map(b=>b.id===E?{...b,..._}:b))}catch{G.error("Failed to update task")}}if(g)return f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})});const R=[{label:"Outstanding Value",value:or(n==null?void 0:n.totalOutstanding),icon:TM,color:"text-amber-600"},{label:"Completed Today",value:(n==null?void 0:n.completedToday)||0,icon:vM,color:"text-green-600"},{label:"Deposits Held",value:or(n==null?void 0:n.totalDeposits),icon:NM,color:"text-blue-600"},{label:"Pending Deliveries",value:(n==null?void 0:n.pendingDeliveries)||0,icon:DM,color:"text-wood-600"}];return f.jsxs("div",{children:[f.jsx(fi,{title:`Welcome back, ${t==null?void 0:t.displayName}`,description:"Here's what's happening at the ranch today."}),f.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:R.map(({label:E,value:_,icon:v,color:b})=>f.jsx("div",{className:"card p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`p-2 rounded-lg bg-parchment-100 dark:bg-wood-800 ${b}`,children:f.jsx(v,{size:20})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400",children:E}),f.jsx("p",{className:"text-lg font-bold",children:_})]})]})},E))}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(kg,{size:18,className:"text-wood-500"}),f.jsx("h2",{className:"font-display font-semibold",children:"Outstanding Orders"})]}),f.jsxs(Uu,{to:"/orders",className:"text-xs text-wood-500 hover:text-wood-700 dark:hover:text-wood-300 flex items-center gap-1",children:["View all ",f.jsx(qh,{size:14})]})]}),f.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:s.length===0?f.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No outstanding orders"}):s.map(E=>f.jsxs("div",{className:"px-5 py-3 flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium",children:E.customerName}),f.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400 truncate max-w-[200px]",children:E.description})]}),f.jsx("p",{className:"text-sm font-semibold",children:or(E.price)})]},E.id))})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(nl,{size:18,className:"text-wood-500"}),f.jsx("h2",{className:"font-display font-semibold",children:"Daily Tasks"})]}),f.jsxs(Uu,{to:"/todos",className:"text-xs text-wood-500 hover:text-wood-700 dark:hover:text-wood-300 flex items-center gap-1",children:["View all ",f.jsx(qh,{size:14})]})]}),f.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:u.length===0?f.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No tasks today"}):u.map(E=>f.jsxs("button",{onClick:()=>A(E.id),className:"w-full px-5 py-3 flex items-center gap-3 text-left hover:bg-parchment-50 dark:hover:bg-wood-800/50 transition-colors",children:[E.isCompleted?f.jsx(nl,{size:18,className:"text-green-600 shrink-0"}):f.jsx(zI,{size:18,className:"text-wood-400 shrink-0"}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:`text-sm ${E.isCompleted?"line-through text-wood-400":"font-medium"}`,children:E.title}),E.isCompleted&&E.completedByName&&f.jsxs("p",{className:"text-xs text-wood-400",children:["Done by ",E.completedByName]})]})]},E.id))})]}),f.jsxs("div",{className:"card",children:[f.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Rg,{size:18,className:"text-wood-500"}),f.jsx("h2",{className:"font-display font-semibold",children:"Recent Activity Log"})]}),f.jsxs(Uu,{to:"/logs",className:"text-xs text-wood-500 hover:text-wood-700 dark:hover:text-wood-300 flex items-center gap-1",children:["View all ",f.jsx(qh,{size:14})]})]}),f.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:o.length===0?f.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No log entries yet"}):o.map(E=>f.jsxs("div",{className:"px-5 py-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("p",{className:"text-sm",children:E.description}),E.amount!=null&&f.jsx("p",{className:"text-sm font-semibold text-green-700 dark:text-green-400",children:or(E.amount)})]}),f.jsxs("p",{className:"text-xs text-wood-400 mt-0.5",children:[E.userName,"  ",zc(E.createdAt)]})]},E.id))})]}),f.jsxs("div",{className:"card",children:[f.jsx("div",{className:"px-5 py-4 border-b border-parchment-200 dark:border-wood-800",children:f.jsx("h2",{className:"font-display font-semibold",children:"Activity Timeline"})}),f.jsx("div",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:h.length===0?f.jsx("p",{className:"px-5 py-8 text-center text-sm text-wood-400",children:"No activity yet"}):h.map(E=>f.jsxs("div",{className:"px-5 py-3",children:[f.jsx("p",{className:"text-sm",children:E.action}),f.jsxs("p",{className:"text-xs text-wood-400 mt-0.5",children:[E.userName,"  ",zc(E.createdAt)]})]},E.id))})]})]})]})}function ms({open:t,onClose:e,title:n,children:r,wide:s}){return I.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[f.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:e}),f.jsxs("div",{className:`relative bg-white dark:bg-wood-900 rounded-xl shadow-2xl border border-parchment-200 dark:border-wood-700 w-full ${s?"max-w-2xl":"max-w-lg"} max-h-[90vh] overflow-y-auto`,children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-parchment-200 dark:border-wood-800",children:[f.jsx("h2",{className:"font-display text-lg font-semibold",children:n}),f.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-parchment-200 dark:hover:bg-wood-800 transition-colors",children:f.jsx($I,{size:18})})]}),f.jsx("div",{className:"px-6 py-4",children:r})]})]}):null}function kl({icon:t,title:e,description:n,action:r}){return f.jsxs("div",{className:"text-center py-12",children:[t&&f.jsx(t,{size:40,className:"mx-auto text-wood-300 dark:text-wood-600 mb-3"}),f.jsx("h3",{className:"text-sm font-medium text-wood-600 dark:text-wood-400",children:e}),n&&f.jsx("p",{className:"text-xs text-wood-400 dark:text-wood-500 mt-1",children:n}),r&&f.jsx("div",{className:"mt-4",children:r})]})}function f0({initial:t,onSubmit:e,onCancel:n,submitting:r}){const[s,i]=I.useState({customerName:"",contactInfo:"",description:"",price:"",depositPaid:"",notes:"",assignedTo:"",assignedToName:"",...t,price:(t==null?void 0:t.price)??"",depositPaid:(t==null?void 0:t.depositPaid)??""}),[o,a]=I.useState([]);I.useEffect(()=>{qI.list().then(a).catch(()=>{})},[]);function u(p){const{name:g,value:w}=p.target;i(C=>({...C,[g]:w}))}function c(p){const g=p.target.value,w=o.find(C=>C.id===g);i(C=>({...C,assignedTo:g||null,assignedToName:(w==null?void 0:w.displayName)||null}))}function h(p){p.preventDefault(),e({...s,price:parseFloat(s.price)||0,depositPaid:parseFloat(s.depositPaid)||0,assignedTo:s.assignedTo||null,assignedToName:s.assignedToName||null})}return f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Customer Name *"}),f.jsx("input",{name:"customerName",className:"input",value:s.customerName,onChange:u,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Contact Info *"}),f.jsx("input",{name:"contactInfo",className:"input",placeholder:"Discord / Telegram / In-game",value:s.contactInfo,onChange:u,required:!0})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Order Description *"}),f.jsx("textarea",{name:"description",className:"input",rows:3,value:s.description,onChange:u,required:!0})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Price ($)"}),f.jsx("input",{name:"price",type:"number",step:"0.01",min:"0",className:"input",value:s.price,onChange:u})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Deposit Paid ($)"}),f.jsx("input",{name:"depositPaid",type:"number",step:"0.01",min:"0",className:"input",value:s.depositPaid,onChange:u})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Assigned To"}),f.jsxs("select",{name:"assignedTo",className:"input",value:s.assignedTo||"",onChange:c,children:[f.jsx("option",{value:"",children:"Unassigned"}),o.map(p=>f.jsx("option",{value:p.id,children:p.displayName},p.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Notes"}),f.jsx("textarea",{name:"notes",className:"input",rows:2,value:s.notes,onChange:u})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:r,children:r?"Saving...":t?"Update Order":"Create Order"})]})]})}const Fd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Po(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Ng(t){return"nodeType"in t}function Mt(t){var e,n;return t?Po(t)?t:Ng(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Pg(t){const{Document:e}=Mt(t);return t instanceof e}function Cl(t){return Po(t)?!1:t instanceof Mt(t).HTMLElement}function HI(t){return t instanceof Mt(t).SVGElement}function bo(t){return t?Po(t)?t.document:Ng(t)?Pg(t)?t:Cl(t)||HI(t)?t.ownerDocument:document:document:document}const _r=Fd?I.useLayoutEffect:I.useEffect;function zd(t){const e=I.useRef(t);return _r(()=>{e.current=t}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function $M(){const t=I.useRef(null),e=I.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=I.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function rl(t,e){e===void 0&&(e=[t]);const n=I.useRef(t);return _r(()=>{n.current!==t&&(n.current=t)},e),n}function Rl(t,e){const n=I.useRef();return I.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function $c(t){const e=zd(t),n=I.useRef(null),r=I.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function qc(t){const e=I.useRef();return I.useEffect(()=>{e.current=t},[t]),e.current}let Hh={};function Bd(t,e){return I.useMemo(()=>{if(e)return e;const n=Hh[t]==null?0:Hh[t]+1;return Hh[t]=n,t+"-"+n},[t,e])}function KI(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[u,c]of a){const h=i[u];h!=null&&(i[u]=h+t*c)}return i},{...e})}}const Zi=KI(1),Wc=KI(-1);function qM(t){return"clientX"in t&&"clientY"in t}function bg(t){if(!t)return!1;const{KeyboardEvent:e}=Mt(t.target);return e&&t instanceof e}function WM(t){if(!t)return!1;const{TouchEvent:e}=Mt(t.target);return e&&t instanceof e}function Hc(t){if(WM(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return qM(t)?{x:t.clientX,y:t.clientY}:null}const sl=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[sl.Translate.toString(t),sl.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),p0="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function HM(t){return t.matches(p0)?t:t.querySelector(p0)}const KM={display:"none"};function GM(t){let{id:e,value:n}=t;return Se.createElement("div",{id:e,style:KM},n)}function QM(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function YM(){const[t,e]=I.useState("");return{announce:I.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const GI=I.createContext(null);function XM(t){const e=I.useContext(GI);I.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function JM(){const[t]=I.useState(()=>new Set),e=I.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[I.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const ZM={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eV={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function tV(t){let{announcements:e=eV,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=ZM}=t;const{announce:i,announcement:o}=YM(),a=Bd("DndLiveRegion"),[u,c]=I.useState(!1);if(I.useEffect(()=>{c(!0)},[]),XM(I.useMemo(()=>({onDragStart(p){let{active:g}=p;i(e.onDragStart({active:g}))},onDragMove(p){let{active:g,over:w}=p;e.onDragMove&&i(e.onDragMove({active:g,over:w}))},onDragOver(p){let{active:g,over:w}=p;i(e.onDragOver({active:g,over:w}))},onDragEnd(p){let{active:g,over:w}=p;i(e.onDragEnd({active:g,over:w}))},onDragCancel(p){let{active:g,over:w}=p;i(e.onDragCancel({active:g,over:w}))}}),[i,e])),!u)return null;const h=Se.createElement(Se.Fragment,null,Se.createElement(GM,{id:r,value:s.draggable}),Se.createElement(QM,{id:a,announcement:o}));return n?zi.createPortal(h,n):h}var He;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(He||(He={}));function Kc(){}function nV(t,e){return I.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function rV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Rn=Object.freeze({x:0,y:0});function sV(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function iV(t,e){const n=Hc(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function oV(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function aV(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function m0(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function lV(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const uV=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=m0(e),i=[];for(const o of r){const{id:a}=o,u=n.get(a);if(u){const c=m0(u),h=s.reduce((g,w,C)=>g+sV(c[C],w),0),p=Number((h/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:p}})}}return i.sort(oV)};function cV(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const u=e.width*e.height,c=t.width*t.height,h=o*a,p=h/(u+c-h);return Number(p.toFixed(4))}return 0}const dV=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const u=cV(a,e);u>0&&s.push({id:o,data:{droppableContainer:i,value:u}})}}return s.sort(aV)};function hV(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function QI(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Rn}function fV(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const pV=fV(1);function YI(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function mV(t,e,n){const r=YI(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,u=t.left-o-(1-s)*parseFloat(n),c=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,p=i?t.height/i:t.height;return{width:h,height:p,top:c,right:u+h,bottom:c+p,left:u}}const gV={ignoreTransform:!1};function Al(t,e){e===void 0&&(e=gV);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:h}=Mt(t).getComputedStyle(t);c&&(n=mV(n,c,h))}const{top:r,left:s,width:i,height:o,bottom:a,right:u}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:u}}function g0(t){return Al(t,{ignoreTransform:!0})}function yV(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function vV(t,e){return e===void 0&&(e=Mt(t).getComputedStyle(t)),e.position==="fixed"}function _V(t,e){e===void 0&&(e=Mt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function Dg(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(Pg(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Cl(s)||HI(s)||n.includes(s))return n;const i=Mt(t).getComputedStyle(s);return s!==t&&_V(s,i)&&n.push(s),vV(s,i)?n:r(s.parentNode)}return t?r(t):n}function XI(t){const[e]=Dg(t,1);return e??null}function Kh(t){return!Fd||!t?null:Po(t)?t:Ng(t)?Pg(t)||t===bo(t).scrollingElement?window:Cl(t)?t:null:null}function JI(t){return Po(t)?t.scrollX:t.scrollLeft}function ZI(t){return Po(t)?t.scrollY:t.scrollTop}function Tp(t){return{x:JI(t),y:ZI(t)}}var et;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(et||(et={}));function e1(t){return!Fd||!t?!1:t===document.scrollingElement}function t1(t){const e={x:0,y:0},n=e1(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const wV={x:.2,y:.2};function EV(t,e,n,r,s){let{top:i,left:o,right:a,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=wV);const{isTop:c,isBottom:h,isLeft:p,isRight:g}=t1(t),w={x:0,y:0},C={x:0,y:0},A={height:e.height*s.y,width:e.width*s.x};return!c&&i<=e.top+A.height?(w.y=et.Backward,C.y=r*Math.abs((e.top+A.height-i)/A.height)):!h&&u>=e.bottom-A.height&&(w.y=et.Forward,C.y=r*Math.abs((e.bottom-A.height-u)/A.height)),!g&&a>=e.right-A.width?(w.x=et.Forward,C.x=r*Math.abs((e.right-A.width-a)/A.width)):!p&&o<=e.left+A.width&&(w.x=et.Backward,C.x=r*Math.abs((e.left+A.width-o)/A.width)),{direction:w,speed:C}}function TV(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function n1(t){return t.reduce((e,n)=>Zi(e,Tp(n)),Rn)}function xV(t){return t.reduce((e,n)=>e+JI(n),0)}function IV(t){return t.reduce((e,n)=>e+ZI(n),0)}function r1(t,e){if(e===void 0&&(e=Al),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);XI(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const SV=[["x",["left","right"],xV],["y",["top","bottom"],IV]];class Og{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Dg(n),s=n1(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of SV)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=a(r),h=s[i]-c;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ia{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function kV(t){const{EventTarget:e}=Mt(t);return t instanceof e?t:bo(t)}function Gh(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var rn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(rn||(rn={}));function y0(t){t.preventDefault()}function CV(t){t.stopPropagation()}var me;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(me||(me={}));const s1={start:[me.Space,me.Enter],cancel:[me.Esc],end:[me.Space,me.Enter,me.Tab]},RV=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case me.Right:return{...n,x:n.x+25};case me.Left:return{...n,x:n.x-25};case me.Down:return{...n,y:n.y+25};case me.Up:return{...n,y:n.y-25}}};class i1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Ia(bo(n)),this.windowListeners=new Ia(Mt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(rn.Resize,this.handleCancel),this.windowListeners.add(rn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(rn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&r1(r),n(Rn)}handleKeyDown(e){if(bg(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=s1,coordinateGetter:o=RV,scrollBehavior:a="smooth"}=s,{code:u}=e;if(i.end.includes(u)){this.handleEnd(e);return}if(i.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:c}=r.current,h=c?{x:c.left,y:c.top}:Rn;this.referenceCoordinates||(this.referenceCoordinates=h);const p=o(e,{active:n,context:r.current,currentCoordinates:h});if(p){const g=Wc(p,h),w={x:0,y:0},{scrollableAncestors:C}=r.current;for(const A of C){const R=e.code,{isTop:E,isRight:_,isLeft:v,isBottom:b,maxScroll:V,minScroll:D}=t1(A),x=TV(A),y={x:Math.min(R===me.Right?x.right-x.width/2:x.right,Math.max(R===me.Right?x.left:x.left+x.width/2,p.x)),y:Math.min(R===me.Down?x.bottom-x.height/2:x.bottom,Math.max(R===me.Down?x.top:x.top+x.height/2,p.y))},S=R===me.Right&&!_||R===me.Left&&!v,k=R===me.Down&&!b||R===me.Up&&!E;if(S&&y.x!==p.x){const P=A.scrollLeft+g.x,O=R===me.Right&&P<=V.x||R===me.Left&&P>=D.x;if(O&&!g.y){A.scrollTo({left:P,behavior:a});return}O?w.x=A.scrollLeft-P:w.x=R===me.Right?A.scrollLeft-V.x:A.scrollLeft-D.x,w.x&&A.scrollBy({left:-w.x,behavior:a});break}else if(k&&y.y!==p.y){const P=A.scrollTop+g.y,O=R===me.Down&&P<=V.y||R===me.Up&&P>=D.y;if(O&&!g.x){A.scrollTo({top:P,behavior:a});return}O?w.y=A.scrollTop-P:w.y=R===me.Down?A.scrollTop-V.y:A.scrollTop-D.y,w.y&&A.scrollBy({top:-w.y,behavior:a});break}}this.handleMove(e,Zi(Wc(p,this.referenceCoordinates),w))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}i1.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=s1,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function v0(t){return!!(t&&"distance"in t)}function _0(t){return!!(t&&"delay"in t)}class Lg{constructor(e,n,r){var s;r===void 0&&(r=kV(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=bo(o),this.documentListeners=new Ia(this.document),this.listeners=new Ia(r),this.windowListeners=new Ia(Mt(o)),this.initialCoordinates=(s=Hc(i))!=null?s:Rn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(rn.Resize,this.handleCancel),this.windowListeners.add(rn.DragStart,y0),this.windowListeners.add(rn.VisibilityChange,this.handleCancel),this.windowListeners.add(rn.ContextMenu,y0),this.documentListeners.add(rn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(_0(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(v0(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(rn.Click,CV,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(rn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const u=(n=Hc(e))!=null?n:Rn,c=Wc(s,u);if(!r&&a){if(v0(a)){if(a.tolerance!=null&&Gh(c,a.tolerance))return this.handleCancel();if(Gh(c,a.distance))return this.handleStart()}if(_0(a)&&Gh(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===me.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const AV={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mg extends Lg{constructor(e){const{event:n}=e,r=bo(n.target);super(e,AV,r)}}Mg.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const NV={move:{name:"mousemove"},end:{name:"mouseup"}};var xp;(function(t){t[t.RightClick=2]="RightClick"})(xp||(xp={}));class PV extends Lg{constructor(e){super(e,NV,bo(e.event.target))}}PV.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===xp.RightClick?!1:(r==null||r({event:n}),!0)}}];const Qh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class bV extends Lg{constructor(e){super(e,Qh)}static setup(){return window.addEventListener(Qh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Qh.move.name,e)};function e(){}}}bV.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Sa;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Sa||(Sa={}));var Gc;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gc||(Gc={}));function DV(t){let{acceleration:e,activator:n=Sa.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=Gc.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:h,delta:p,threshold:g}=t;const w=LV({delta:p,disabled:!i}),[C,A]=$M(),R=I.useRef({x:0,y:0}),E=I.useRef({x:0,y:0}),_=I.useMemo(()=>{switch(n){case Sa.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Sa.DraggableRect:return s}},[n,s,u]),v=I.useRef(null),b=I.useCallback(()=>{const D=v.current;if(!D)return;const x=R.current.x*E.current.x,y=R.current.y*E.current.y;D.scrollBy(x,y)},[]),V=I.useMemo(()=>a===Gc.TreeOrder?[...c].reverse():c,[a,c]);I.useEffect(()=>{if(!i||!c.length||!_){A();return}for(const D of V){if((r==null?void 0:r(D))===!1)continue;const x=c.indexOf(D),y=h[x];if(!y)continue;const{direction:S,speed:k}=EV(D,y,_,e,g);for(const P of["x","y"])w[P][S[P]]||(k[P]=0,S[P]=0);if(k.x>0||k.y>0){A(),v.current=D,C(b,o),R.current=k,E.current=S;return}}R.current={x:0,y:0},E.current={x:0,y:0},A()},[e,b,r,A,i,o,JSON.stringify(_),JSON.stringify(w),C,c,V,h,JSON.stringify(g)])}const OV={x:{[et.Backward]:!1,[et.Forward]:!1},y:{[et.Backward]:!1,[et.Forward]:!1}};function LV(t){let{delta:e,disabled:n}=t;const r=qc(e);return Rl(s=>{if(n||!r||!s)return OV;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[et.Backward]:s.x[et.Backward]||i.x===-1,[et.Forward]:s.x[et.Forward]||i.x===1},y:{[et.Backward]:s.y[et.Backward]||i.y===-1,[et.Forward]:s.y[et.Forward]||i.y===1}}},[n,e,r])}function MV(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Rl(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function VV(t,e){return I.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var il;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(il||(il={}));var Ip;(function(t){t.Optimized="optimized"})(Ip||(Ip={}));const w0=new Map;function jV(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=I.useState(null),{frequency:a,measure:u,strategy:c}=s,h=I.useRef(t),p=R(),g=rl(p),w=I.useCallback(function(E){E===void 0&&(E=[]),!g.current&&o(_=>_===null?E:_.concat(E.filter(v=>!_.includes(v))))},[g]),C=I.useRef(null),A=Rl(E=>{if(p&&!n)return w0;if(!E||E===w0||h.current!==t||i!=null){const _=new Map;for(let v of t){if(!v)continue;if(i&&i.length>0&&!i.includes(v.id)&&v.rect.current){_.set(v.id,v.rect.current);continue}const b=v.node.current,V=b?new Og(u(b),b):null;v.rect.current=V,V&&_.set(v.id,V)}return _}return E},[t,i,n,p,u]);return I.useEffect(()=>{h.current=t},[t]),I.useEffect(()=>{p||w()},[n,p]),I.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),I.useEffect(()=>{p||typeof a!="number"||C.current!==null||(C.current=setTimeout(()=>{w(),C.current=null},a))},[a,p,w,...r]),{droppableRects:A,measureDroppableContainers:w,measuringScheduled:i!=null};function R(){switch(c){case il.Always:return!1;case il.BeforeDragging:return n;default:return!n}}}function Vg(t,e){return Rl(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function UV(t,e){return Vg(t,e)}function FV(t){let{callback:e,disabled:n}=t;const r=zd(e),s=I.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return I.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function $d(t){let{callback:e,disabled:n}=t;const r=zd(e),s=I.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return I.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function zV(t){return new Og(Al(t),t)}function E0(t,e,n){e===void 0&&(e=zV);const[r,s]=I.useState(null);function i(){s(u=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=u??n)!=null?c:null}const h=e(t);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const o=FV({callback(u){if(t)for(const c of u){const{type:h,target:p}=c;if(h==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),a=$d({callback:i});return _r(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function BV(t){const e=Vg(t);return QI(t,e)}const T0=[];function $V(t){const e=I.useRef(t),n=Rl(r=>t?r&&r!==T0&&t&&e.current&&t.parentNode===e.current.parentNode?r:Dg(t):T0,[t]);return I.useEffect(()=>{e.current=t},[t]),n}function qV(t){const[e,n]=I.useState(null),r=I.useRef(t),s=I.useCallback(i=>{const o=Kh(i.target);o&&n(a=>a?(a.set(o,Tp(o)),new Map(a)):null)},[]);return I.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(u=>{const c=Kh(u);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,Tp(c)]):null}).filter(u=>u!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(u=>{const c=Kh(u);c==null||c.removeEventListener("scroll",s)})}},[s,t]),I.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Zi(i,o),Rn):n1(t):Rn,[t,e])}function x0(t,e){e===void 0&&(e=[]);const n=I.useRef(null);return I.useEffect(()=>{n.current=null},e),I.useEffect(()=>{const r=t!==Rn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Wc(t,n.current):Rn}function WV(t){I.useEffect(()=>{if(!Fd)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function HV(t,e){return I.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function o1(t){return I.useMemo(()=>t?yV(t):null,[t])}const I0=[];function KV(t,e){e===void 0&&(e=Al);const[n]=t,r=o1(n?Mt(n):null),[s,i]=I.useState(I0);function o(){i(()=>t.length?t.map(u=>e1(u)?r:new Og(e(u),u)):I0)}const a=$d({callback:o});return _r(()=>{a==null||a.disconnect(),o(),t.forEach(u=>a==null?void 0:a.observe(u))},[t]),s}function a1(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Cl(e)?e:t}function GV(t){let{measure:e}=t;const[n,r]=I.useState(null),s=I.useCallback(c=>{for(const{target:h}of c)if(Cl(h)){r(p=>{const g=e(h);return p?{...p,width:g.width,height:g.height}:g});break}},[e]),i=$d({callback:s}),o=I.useCallback(c=>{const h=a1(c);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[a,u]=$c(o);return I.useMemo(()=>({nodeRef:a,rect:n,setRef:u}),[n,a,u])}const QV=[{sensor:Mg,options:{}},{sensor:i1,options:{}}],YV={current:{}},Xu={draggable:{measure:g0},droppable:{measure:g0,strategy:il.WhileDragging,frequency:Ip.Optimized},dragOverlay:{measure:Al}};class ka extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const XV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ka,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xu,measureDroppableContainers:Kc,windowRect:null,measuringScheduled:!1},l1={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kc,draggableNodes:new Map,over:null,measureDroppableContainers:Kc},Nl=I.createContext(l1),u1=I.createContext(XV);function JV(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ka}}}function ZV(t,e){switch(e.type){case He.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case He.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case He.DragEnd:case He.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case He.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new ka(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case He.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ka(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case He.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new ka(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function ej(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=I.useContext(Nl),i=qc(r),o=qc(n==null?void 0:n.id);return I.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!bg(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:u,node:c}=a;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const h of[u.current,c.current]){if(!h)continue;const p=HM(h);if(p){p.focus();break}}})}},[r,e,s,o,i]),null}function c1(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function tj(t){return I.useMemo(()=>({draggable:{...Xu.draggable,...t==null?void 0:t.draggable},droppable:{...Xu.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Xu.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function nj(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=I.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;_r(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const h=n(c),p=QI(h,r);if(o||(p.x=0),a||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const g=XI(c);g&&g.scrollBy({top:p.y,left:p.x})}},[e,o,a,r,n])}const qd=I.createContext({...Rn,scaleX:1,scaleY:1});var Mr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Mr||(Mr={}));const rj=I.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:u=!0,children:c,sensors:h=QV,collisionDetection:p=dV,measuring:g,modifiers:w,...C}=e;const A=I.useReducer(ZV,void 0,JV),[R,E]=A,[_,v]=JM(),[b,V]=I.useState(Mr.Uninitialized),D=b===Mr.Initialized,{draggable:{active:x,nodes:y,translate:S},droppable:{containers:k}}=R,P=x!=null?y.get(x):null,O=I.useRef({initial:null,translated:null}),N=I.useMemo(()=>{var Fe;return x!=null?{id:x,data:(Fe=P==null?void 0:P.data)!=null?Fe:YV,rect:O}:null},[x,P]),Le=I.useRef(null),[Nn,Ir]=I.useState(null),[qe,B]=I.useState(null),K=rl(C,Object.values(C)),X=Bd("DndDescribedBy",o),ge=I.useMemo(()=>k.getEnabled(),[k]),ne=tj(g),{droppableRects:fe,measureDroppableContainers:Vt,measuringScheduled:en}=jV(ge,{dragging:D,dependencies:[S.x,S.y],config:ne.droppable}),Me=MV(y,x),tn=I.useMemo(()=>qe?Hc(qe):null,[qe]),Pl=Ss(),bl=UV(Me,ne.draggable.measure);nj({activeNode:x!=null?y.get(x):null,config:Pl.layoutShiftCompensation,initialRect:bl,measure:ne.draggable.measure});const ft=E0(Me,ne.draggable.measure,bl),Sr=E0(Me?Me.parentElement:null),hn=I.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:y,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pi=k.getNodeFor((n=hn.current.over)==null?void 0:n.id),fn=GV({measure:ne.dragOverlay.measure}),kr=(r=fn.nodeRef.current)!=null?r:Me,Gn=D?(s=fn.rect)!=null?s:ft:null,Dl=!!(fn.nodeRef.current&&fn.rect),Ol=BV(Dl?null:ft),mi=o1(kr?Mt(kr):null),nn=$V(D?pi??Me:null),xs=KV(nn),gi=c1(w,{transform:{x:S.x-Ol.x,y:S.y-Ol.y,scaleX:1,scaleY:1},activatorEvent:qe,active:N,activeNodeRect:ft,containerNodeRect:Sr,draggingNodeRect:Gn,over:hn.current.over,overlayNodeRect:fn.rect,scrollableAncestors:nn,scrollableAncestorRects:xs,windowRect:mi}),yi=tn?Zi(tn,S):null,vi=qV(nn),Ll=x0(vi),Xe=x0(vi,[ft]),Ne=Zi(gi,Ll),pn=Gn?pV(Gn,gi):null,Cr=N&&pn?p({active:N,collisionRect:pn,droppableRects:fe,droppableContainers:ge,pointerCoordinates:yi}):null,Do=lV(Cr,"id"),[Pn,Rr]=I.useState(null),Ml=Dl?gi:Zi(gi,Xe),Vl=hV(Ml,(i=Pn==null?void 0:Pn.rect)!=null?i:null,ft),Is=I.useRef(null),jl=I.useCallback((Fe,rt)=>{let{sensor:Ve,options:mn}=rt;if(Le.current==null)return;const st=y.get(Le.current);if(!st)return;const pt=Fe.nativeEvent,mt=new Ve({active:Le.current,activeNode:st,event:pt,options:mn,context:hn,onAbort(ie){if(!y.get(ie))return;const{onDragAbort:gt}=K.current,Ct={id:ie};gt==null||gt(Ct),_({type:"onDragAbort",event:Ct})},onPending(ie,gn,gt,Ct){if(!y.get(ie))return;const{onDragPending:Cs}=K.current,Rt={id:ie,constraint:gn,initialCoordinates:gt,offset:Ct};Cs==null||Cs(Rt),_({type:"onDragPending",event:Rt})},onStart(ie){const gn=Le.current;if(gn==null)return;const gt=y.get(gn);if(!gt)return;const{onDragStart:Ct}=K.current,ks={activatorEvent:pt,active:{id:gn,data:gt.data,rect:O}};zi.unstable_batchedUpdates(()=>{Ct==null||Ct(ks),V(Mr.Initializing),E({type:He.DragStart,initialCoordinates:ie,active:gn}),_({type:"onDragStart",event:ks}),Ir(Is.current),B(pt)})},onMove(ie){E({type:He.DragMove,coordinates:ie})},onEnd:Qn(He.DragEnd),onCancel:Qn(He.DragCancel)});Is.current=mt;function Qn(ie){return async function(){const{active:gt,collisions:Ct,over:ks,scrollAdjustedTranslate:Cs}=hn.current;let Rt=null;if(gt&&Cs){const{cancelDrop:Rs}=K.current;Rt={activatorEvent:pt,active:gt,collisions:Ct,delta:Cs,over:ks},ie===He.DragEnd&&typeof Rs=="function"&&await Promise.resolve(Rs(Rt))&&(ie=He.DragCancel)}Le.current=null,zi.unstable_batchedUpdates(()=>{E({type:ie}),V(Mr.Uninitialized),Rr(null),Ir(null),B(null),Is.current=null;const Rs=ie===He.DragEnd?"onDragEnd":"onDragCancel";if(Rt){const Oo=K.current[Rs];Oo==null||Oo(Rt),_({type:Rs,event:Rt})}})}}},[y]),Wd=I.useCallback((Fe,rt)=>(Ve,mn)=>{const st=Ve.nativeEvent,pt=y.get(mn);if(Le.current!==null||!pt||st.dndKit||st.defaultPrevented)return;const mt={active:pt};Fe(Ve,rt.options,mt)===!0&&(st.dndKit={capturedBy:rt.sensor},Le.current=mn,jl(Ve,rt))},[y,jl]),_i=VV(h,Wd);WV(h),_r(()=>{ft&&b===Mr.Initializing&&V(Mr.Initialized)},[ft,b]),I.useEffect(()=>{const{onDragMove:Fe}=K.current,{active:rt,activatorEvent:Ve,collisions:mn,over:st}=hn.current;if(!rt||!Ve)return;const pt={active:rt,activatorEvent:Ve,collisions:mn,delta:{x:Ne.x,y:Ne.y},over:st};zi.unstable_batchedUpdates(()=>{Fe==null||Fe(pt),_({type:"onDragMove",event:pt})})},[Ne.x,Ne.y]),I.useEffect(()=>{const{active:Fe,activatorEvent:rt,collisions:Ve,droppableContainers:mn,scrollAdjustedTranslate:st}=hn.current;if(!Fe||Le.current==null||!rt||!st)return;const{onDragOver:pt}=K.current,mt=mn.get(Do),Qn=mt&&mt.rect.current?{id:mt.id,rect:mt.rect.current,data:mt.data,disabled:mt.disabled}:null,ie={active:Fe,activatorEvent:rt,collisions:Ve,delta:{x:st.x,y:st.y},over:Qn};zi.unstable_batchedUpdates(()=>{Rr(Qn),pt==null||pt(ie),_({type:"onDragOver",event:ie})})},[Do]),_r(()=>{hn.current={activatorEvent:qe,active:N,activeNode:Me,collisionRect:pn,collisions:Cr,droppableRects:fe,draggableNodes:y,draggingNode:kr,draggingNodeRect:Gn,droppableContainers:k,over:Pn,scrollableAncestors:nn,scrollAdjustedTranslate:Ne},O.current={initial:Gn,translated:pn}},[N,Me,Cr,pn,y,kr,Gn,fe,k,Pn,nn,Ne]),DV({...Pl,delta:S,draggingRect:pn,pointerCoordinates:yi,scrollableAncestors:nn,scrollableAncestorRects:xs});const Ul=I.useMemo(()=>({active:N,activeNode:Me,activeNodeRect:ft,activatorEvent:qe,collisions:Cr,containerNodeRect:Sr,dragOverlay:fn,draggableNodes:y,droppableContainers:k,droppableRects:fe,over:Pn,measureDroppableContainers:Vt,scrollableAncestors:nn,scrollableAncestorRects:xs,measuringConfiguration:ne,measuringScheduled:en,windowRect:mi}),[N,Me,ft,qe,Cr,Sr,fn,y,k,fe,Pn,Vt,nn,xs,ne,en,mi]),Fl=I.useMemo(()=>({activatorEvent:qe,activators:_i,active:N,activeNodeRect:ft,ariaDescribedById:{draggable:X},dispatch:E,draggableNodes:y,over:Pn,measureDroppableContainers:Vt}),[qe,_i,N,ft,E,X,y,Pn,Vt]);return Se.createElement(GI.Provider,{value:v},Se.createElement(Nl.Provider,{value:Fl},Se.createElement(u1.Provider,{value:Ul},Se.createElement(qd.Provider,{value:Vl},c)),Se.createElement(ej,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Se.createElement(tV,{...a,hiddenTextDescribedById:X}));function Ss(){const Fe=(Nn==null?void 0:Nn.autoScrollEnabled)===!1,rt=typeof u=="object"?u.enabled===!1:u===!1,Ve=D&&!Fe&&!rt;return typeof u=="object"?{...u,enabled:Ve}:{enabled:Ve}}}),sj=I.createContext(null),S0="button",ij="Draggable";function oj(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Bd(ij),{activators:o,activatorEvent:a,active:u,activeNodeRect:c,ariaDescribedById:h,draggableNodes:p,over:g}=I.useContext(Nl),{role:w=S0,roleDescription:C="draggable",tabIndex:A=0}=s??{},R=(u==null?void 0:u.id)===e,E=I.useContext(R?qd:sj),[_,v]=$c(),[b,V]=$c(),D=HV(o,e),x=rl(n);_r(()=>(p.set(e,{id:e,key:i,node:_,activatorNode:b,data:x}),()=>{const S=p.get(e);S&&S.key===i&&p.delete(e)}),[p,e]);const y=I.useMemo(()=>({role:w,tabIndex:A,"aria-disabled":r,"aria-pressed":R&&w===S0?!0:void 0,"aria-roledescription":C,"aria-describedby":h.draggable}),[r,w,A,R,C,h.draggable]);return{active:u,activatorEvent:a,activeNodeRect:c,attributes:y,isDragging:R,listeners:r?void 0:D,node:_,over:g,setNodeRef:v,setActivatorNodeRef:V,transform:E}}function aj(){return I.useContext(u1)}const lj="Droppable",uj={timeout:25};function cj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Bd(lj),{active:o,dispatch:a,over:u,measureDroppableContainers:c}=I.useContext(Nl),h=I.useRef({disabled:n}),p=I.useRef(!1),g=I.useRef(null),w=I.useRef(null),{disabled:C,updateMeasurementsFor:A,timeout:R}={...uj,...s},E=rl(A??r),_=I.useCallback(()=>{if(!p.current){p.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{c(Array.isArray(E.current)?E.current:[E.current]),w.current=null},R)},[R]),v=$d({callback:_,disabled:C||!o}),b=I.useCallback((y,S)=>{v&&(S&&(v.unobserve(S),p.current=!1),y&&v.observe(y))},[v]),[V,D]=$c(b),x=rl(e);return I.useEffect(()=>{!v||!V.current||(v.disconnect(),p.current=!1,v.observe(V.current))},[V,v]),I.useEffect(()=>(a({type:He.RegisterDroppable,element:{id:r,key:i,disabled:n,node:V,rect:g,data:x}}),()=>a({type:He.UnregisterDroppable,key:i,id:r})),[r]),I.useEffect(()=>{n!==h.current.disabled&&(a({type:He.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,a]),{active:o,rect:g,isOver:(u==null?void 0:u.id)===r,node:V,over:u,setNodeRef:D}}function dj(t){let{animation:e,children:n}=t;const[r,s]=I.useState(null),[i,o]=I.useState(null),a=qc(n);return!n&&!r&&a&&s(a),_r(()=>{if(!i)return;const u=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(u==null||c==null){s(null);return}Promise.resolve(e(c,i)).then(()=>{s(null)})},[e,r,i]),Se.createElement(Se.Fragment,null,n,r?I.cloneElement(r,{ref:o}):null)}const hj={x:0,y:0,scaleX:1,scaleY:1};function fj(t){let{children:e}=t;return Se.createElement(Nl.Provider,{value:l1},Se.createElement(qd.Provider,{value:hj},e))}const pj={position:"fixed",touchAction:"none"},mj=t=>bg(t)?"transform 250ms ease":void 0,gj=I.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:a,style:u,transform:c,transition:h=mj}=t;if(!a)return null;const p=s?c:{...c,scaleX:1,scaleY:1},g={...pj,width:a.width,height:a.height,top:a.top,left:a.left,transform:sl.Transform.toString(p),transformOrigin:s&&r?iV(r,a):void 0,transition:typeof h=="function"?h(r):h,...u};return Se.createElement(n,{className:o,style:g,ref:e},i)}),yj=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[a,u]of Object.entries(i.active))u!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,u));if(i!=null&&i.dragOverlay)for(const[a,u]of Object.entries(i.dragOverlay))u!==void 0&&r.node.style.setProperty(a,u);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[u,c]of Object.entries(s))n.node.style.setProperty(u,c);o!=null&&o.active&&n.node.classList.remove(o.active)}},vj=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:sl.Transform.toString(e)},{transform:sl.Transform.toString(n)}]},_j={duration:250,easing:"ease",keyframes:vj,sideEffects:yj({styles:{active:{opacity:"0"}}})};function wj(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return zd((i,o)=>{if(e===null)return;const a=n.get(i);if(!a)return;const u=a.node.current;if(!u)return;const c=a1(o);if(!c)return;const{transform:h}=Mt(o).getComputedStyle(o),p=YI(h);if(!p)return;const g=typeof e=="function"?e:Ej(e);return r1(u,s.draggable.measure),g({active:{id:i,data:a.data,node:u,rect:s.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:s,transform:p})})}function Ej(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={..._j,...t};return i=>{let{active:o,dragOverlay:a,transform:u,...c}=i;if(!e)return;const h={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},p={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/a.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/a.rect.height:1},g={x:u.x-h.x,y:u.y-h.y,...p},w=s({...c,active:o,dragOverlay:a,transform:{initial:u,final:g}}),[C]=w,A=w[w.length-1];if(JSON.stringify(C)===JSON.stringify(A))return;const R=r==null?void 0:r({active:o,dragOverlay:a,...c}),E=a.node.animate(w,{duration:e,easing:n,fill:"forwards"});return new Promise(_=>{E.onfinish=()=>{R==null||R(),_()}})}}let k0=0;function Tj(t){return I.useMemo(()=>{if(t!=null)return k0++,k0},[t])}const xj=Se.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:a="div",className:u,zIndex:c=999}=t;const{activatorEvent:h,active:p,activeNodeRect:g,containerNodeRect:w,draggableNodes:C,droppableContainers:A,dragOverlay:R,over:E,measuringConfiguration:_,scrollableAncestors:v,scrollableAncestorRects:b,windowRect:V}=aj(),D=I.useContext(qd),x=Tj(p==null?void 0:p.id),y=c1(o,{activatorEvent:h,active:p,activeNodeRect:g,containerNodeRect:w,draggingNodeRect:R.rect,over:E,overlayNodeRect:R.rect,scrollableAncestors:v,scrollableAncestorRects:b,transform:D,windowRect:V}),S=Vg(g),k=wj({config:r,draggableNodes:C,droppableContainers:A,measuringConfiguration:_}),P=S?R.setRef:void 0;return Se.createElement(fj,null,Se.createElement(dj,{animation:k},p&&x?Se.createElement(gj,{key:x,id:p.id,ref:P,as:a,activatorEvent:h,adjustScale:e,className:u,transition:i,rect:S,style:{zIndex:c,...s},transform:y},n):null))});function jg({status:t,type:e="order"}){const r=(e==="quote"?Ep:Bc).find(s=>s.value===t);return r?f.jsx("span",{className:r.color,children:r.label}):f.jsx("span",{className:"badge bg-gray-100 text-gray-600",children:t})}function Ij({order:t,onClick:e}){const{attributes:n,listeners:r,setNodeRef:s,transform:i,isDragging:o}=oj({id:t.id,data:{order:t}}),a=i?{transform:`translate(${i.x}px, ${i.y}px)`,opacity:o?.5:1}:void 0;return f.jsxs("div",{ref:s,style:a,className:"card p-3 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(t),children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"text-sm font-semibold truncate",children:t.customerName}),f.jsx("p",{className:"text-xs text-wood-500 dark:text-wood-400 mt-1 line-clamp-2",children:t.description})]}),f.jsx("button",{...n,...r,className:"shrink-0 p-1 text-wood-400 hover:text-wood-600 cursor-grab",children:f.jsx(IM,{size:14})})]}),f.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-parchment-100 dark:border-wood-800",children:[f.jsx("p",{className:"text-sm font-bold",children:or(t.price)}),t.assignedToName&&f.jsxs("span",{className:"flex items-center gap-1 text-xs text-wood-400",children:[f.jsx(BI,{size:12}),t.assignedToName]})]})]})}function Sj({status:t,orders:e,onCardClick:n}){const{setNodeRef:r,isOver:s}=cj({id:t.value});return f.jsxs("div",{ref:r,className:`flex-1 min-w-[280px] rounded-xl p-3 transition-colors ${s?"bg-parchment-200 dark:bg-wood-800":"bg-parchment-100/50 dark:bg-wood-900/50"}`,children:[f.jsx("div",{className:"flex items-center justify-between mb-3 px-1",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(jg,{status:t.value}),f.jsx("span",{className:"text-xs text-wood-400 font-medium",children:e.length})]})}),f.jsx("div",{className:"space-y-2 min-h-[100px]",children:e.map(i=>f.jsx(Ij,{order:i,onClick:n},i.id))})]})}function kj({orders:t,onStatusChange:e,onCardClick:n}){const[r,s]=I.useState(null),i=rV(nV(Mg,{activationConstraint:{distance:8}})),o=Bc.map(c=>({...c,orders:t.filter(h=>h.status===c.value)}));function a(c){const{active:h,over:p}=c;if(s(null),!p)return;const g=h.id,w=p.id,C=t.find(A=>A.id===g);C&&C.status!==w&&Bc.some(A=>A.value===w)&&e(g,w)}const u=r?t.find(c=>c.id===r):null;return f.jsxs(rj,{sensors:i,collisionDetection:uV,onDragStart:c=>s(c.active.id),onDragEnd:a,children:[f.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",children:o.map(c=>f.jsx(Sj,{status:c,orders:c.orders,onCardClick:n},c.value))}),f.jsx(xj,{children:u&&f.jsxs("div",{className:"card p-3 shadow-xl w-[280px] rotate-2",children:[f.jsx("p",{className:"text-sm font-semibold",children:u.customerName}),f.jsx("p",{className:"text-xs text-wood-500 mt-1",children:u.description})]})})]})}function Cj({orders:t,onEdit:e,onDelete:n}){const{isAdmin:r}=An();return f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-parchment-200 dark:border-wood-800",children:[f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Customer"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Description"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Price"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Deposit"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Status"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Assigned"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium text-wood-500 dark:text-wood-400",children:"Date"}),f.jsx("th",{className:"py-3 px-4"})]})}),f.jsx("tbody",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:t.map(s=>f.jsxs("tr",{className:"hover:bg-parchment-50 dark:hover:bg-wood-900/50",children:[f.jsxs("td",{className:"py-3 px-4",children:[f.jsx("p",{className:"font-medium",children:s.customerName}),f.jsx("p",{className:"text-xs text-wood-400",children:s.contactInfo})]}),f.jsx("td",{className:"py-3 px-4 max-w-[200px] truncate",children:s.description}),f.jsx("td",{className:"py-3 px-4 font-semibold",children:or(s.price)}),f.jsx("td",{className:"py-3 px-4",children:or(s.depositPaid)}),f.jsx("td",{className:"py-3 px-4",children:f.jsx(jg,{status:s.status})}),f.jsx("td",{className:"py-3 px-4 text-wood-500",children:s.assignedToName||""}),f.jsx("td",{className:"py-3 px-4 text-wood-400 text-xs",children:Ud(s.createdAt)}),f.jsx("td",{className:"py-3 px-4",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>e(s),className:"p-1.5 rounded hover:bg-parchment-200 dark:hover:bg-wood-800",children:f.jsx(Cg,{size:14})}),r&&f.jsx("button",{onClick:()=>n(s.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:f.jsx(_o,{size:14})})]})})]},s.id))})]})})}function Rj(){const{isAdmin:t,currentUser:e}=An(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState("kanban"),[u,c]=I.useState(""),[h,p]=I.useState(""),[g,w]=I.useState(!1),[C,A]=I.useState(null),[R,E]=I.useState(!1);I.useEffect(()=>{_()},[u,h]);async function _(){try{const y={};u&&(y.search=u),h&&(y.status=h);const S=await Ri.list(y);r(S)}catch{G.error("Failed to load orders")}finally{i(!1)}}async function v(y){E(!0);try{await Ri.create(y,e),G.success("Order created"),w(!1),_()}catch(S){G.error(S.message)}finally{E(!1)}}async function b(y){E(!0);try{await Ri.update(C.id,y,e),G.success("Order updated"),A(null),_()}catch(S){G.error(S.message)}finally{E(!1)}}async function V(y,S){try{await Ri.update(y,{status:S},e),r(k=>k.map(P=>P.id===y?{...P,status:S}:P)),G.success("Status updated")}catch{G.error("Failed to update status")}}async function D(y){if(confirm("Delete this order?"))try{await Ri.delete(y,e),G.success("Order deleted"),_()}catch(S){G.error(S.message)}}function x(){zM(n.map(y=>{var S,k,P,O;return{customer:y.customerName,contact:y.contactInfo,description:y.description,price:y.price,deposit:y.depositPaid,status:y.status,assigned:y.assignedToName||"",created:((O=(P=(k=(S=y.createdAt)==null?void 0:S.toDate)==null?void 0:k.call(S))==null?void 0:P.toISOString)==null?void 0:O.call(P))||""}}),"riverside-orders"),G.success("Exported to CSV")}return f.jsxs("div",{children:[f.jsx(fi,{title:"Orders",description:"Manage customer orders and track delivery status.",actions:f.jsxs("button",{onClick:()=>w(!0),className:"btn-primary",children:[f.jsx(vo,{size:16})," New Order"]})}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6",children:[f.jsxs("div",{className:"relative flex-1 w-full sm:max-w-xs",children:[f.jsx(UI,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-wood-400"}),f.jsx("input",{className:"input pl-9",placeholder:"Search orders...",value:u,onChange:y=>c(y.target.value)})]}),f.jsxs("select",{className:"input w-auto",value:h,onChange:y=>p(y.target.value),children:[f.jsx("option",{value:"",children:"All Statuses"}),Bc.map(y=>f.jsx("option",{value:y.value,children:y.label},y.value))]}),f.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[f.jsx("button",{onClick:()=>a("kanban"),className:`p-2 rounded-lg transition-colors ${o==="kanban"?"bg-wood-700 text-white":"hover:bg-parchment-200 dark:hover:bg-wood-800"}`,children:f.jsx(kM,{size:16})}),f.jsx("button",{onClick:()=>a("table"),className:`p-2 rounded-lg transition-colors ${o==="table"?"bg-wood-700 text-white":"hover:bg-parchment-200 dark:hover:bg-wood-800"}`,children:f.jsx(bM,{size:16})}),f.jsxs("button",{onClick:x,className:"btn-ghost btn-sm ml-2",children:[f.jsx(xM,{size:14})," CSV"]})]})]}),s?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?f.jsx(kl,{icon:kg,title:"No orders found",description:u?"Try a different search term":"Create your first order to get started",action:!u&&f.jsxs("button",{onClick:()=>w(!0),className:"btn-primary btn-sm",children:[f.jsx(vo,{size:14})," New Order"]})}):o==="kanban"?f.jsx(kj,{orders:n,onStatusChange:V,onCardClick:A}):f.jsx("div",{className:"card overflow-hidden",children:f.jsx(Cj,{orders:n,onEdit:A,onDelete:D})}),f.jsx(ms,{open:g,onClose:()=>w(!1),title:"New Order",wide:!0,children:f.jsx(f0,{onSubmit:v,onCancel:()=>w(!1),submitting:R})}),f.jsx(ms,{open:!!C,onClose:()=>A(null),title:"Edit Order",wide:!0,children:C&&f.jsx(f0,{initial:C,onSubmit:b,onCancel:()=>A(null),submitting:R})})]})}function Aj(){const{isAdmin:t,currentUser:e}=An(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState(""),[u,c]=I.useState(""),[h,p]=I.useState(!1),[g,w]=I.useState(null),[C,A]=I.useState(!1);I.useEffect(()=>{R()},[o,u]);async function R(){try{const D=await Ii.list({status:u||void 0,search:o||void 0});r(D)}catch{G.error("Failed to load quotes")}finally{i(!1)}}async function E(D){A(!0);try{g?(await Ii.update(g.id,D),G.success("Quote updated"),w(null)):(await Ii.create(D,e),G.success("Quote created"),p(!1)),R()}catch(x){G.error(x.message)}finally{A(!1)}}async function _(D){if(confirm("Convert this quote to an order?"))try{await Ii.convert(D,e),G.success("Quote converted to order!"),R()}catch(x){G.error(x.message)}}async function v(D){if(confirm("Delete this quote?"))try{await Ii.delete(D,e),G.success("Quote deleted"),R()}catch(x){G.error(x.message)}}async function b(D,x){try{await Ii.update(D,{status:x}),G.success("Status updated"),R()}catch{G.error("Failed to update")}}function V({initial:D}){const[x,y]=I.useState({customerName:"",contactInfo:"",requestedItems:"",estimatedPrice:"",notes:"",...D,estimatedPrice:(D==null?void 0:D.estimatedPrice)??""});return f.jsxs("form",{onSubmit:S=>{S.preventDefault(),E(x)},className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Customer Name *"}),f.jsx("input",{className:"input",value:x.customerName,onChange:S=>y(k=>({...k,customerName:S.target.value})),required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Contact Info *"}),f.jsx("input",{className:"input",value:x.contactInfo,onChange:S=>y(k=>({...k,contactInfo:S.target.value})),required:!0})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Requested Items *"}),f.jsx("textarea",{className:"input",rows:3,value:x.requestedItems,onChange:S=>y(k=>({...k,requestedItems:S.target.value})),required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Estimated Price ($)"}),f.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",value:x.estimatedPrice,onChange:S=>y(k=>({...k,estimatedPrice:S.target.value}))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Notes"}),f.jsx("textarea",{className:"input",rows:2,value:x.notes,onChange:S=>y(k=>({...k,notes:S.target.value}))})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>{p(!1),w(null)},className:"btn-secondary",children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:C,children:C?"Saving...":D?"Update Quote":"Create Quote"})]})]})}return f.jsxs("div",{children:[f.jsx(fi,{title:"Quotes",description:"Manage price quotes and convert them to orders.",actions:f.jsxs("button",{onClick:()=>p(!0),className:"btn-primary",children:[f.jsx(vo,{size:16})," New Quote"]})}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 mb-6",children:[f.jsxs("div",{className:"relative flex-1 w-full sm:max-w-xs",children:[f.jsx(UI,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-wood-400"}),f.jsx("input",{className:"input pl-9",placeholder:"Search quotes...",value:o,onChange:D=>a(D.target.value)})]}),f.jsxs("select",{className:"input w-auto",value:u,onChange:D=>c(D.target.value),children:[f.jsx("option",{value:"",children:"All Statuses"}),Ep.map(D=>f.jsx("option",{value:D.value,children:D.label},D.value))]})]}),s?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?f.jsx(kl,{icon:VI,title:"No quotes found",description:"Create your first quote to get started"}):f.jsx("div",{className:"space-y-3",children:n.map(D=>f.jsxs("div",{className:"card p-5",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("h3",{className:"font-semibold",children:D.customerName}),f.jsx(jg,{status:D.status,type:"quote"})]}),f.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400",children:D.contactInfo}),f.jsx("p",{className:"text-sm mt-2",children:D.requestedItems}),D.notes&&f.jsx("p",{className:"text-xs text-wood-400 mt-2 italic",children:D.notes}),f.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-wood-400",children:[f.jsx("span",{children:Ud(D.createdAt)}),f.jsx("span",{className:"font-semibold text-sm text-wood-700 dark:text-parchment-200",children:or(D.estimatedPrice)})]})]}),f.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[D.status==="pending"&&f.jsxs(f.Fragment,{children:[f.jsx("select",{className:"input w-auto text-xs",value:D.status,onChange:x=>b(D.id,x.target.value),children:Ep.map(x=>f.jsx("option",{value:x.value,children:x.label},x.value))}),f.jsxs("button",{onClick:()=>_(D.id),className:"btn-primary btn-sm",title:"Convert to Order",children:[f.jsx(yM,{size:14})," Convert"]})]}),f.jsx("button",{onClick:()=>w(D),className:"btn-ghost btn-sm",children:f.jsx(Cg,{size:14})}),t&&f.jsx("button",{onClick:()=>v(D.id),className:"btn-ghost btn-sm text-red-500",children:f.jsx(_o,{size:14})})]})]}),D.convertedOrderId&&f.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-2",children:"Converted to order"})]},D.id))}),f.jsx(ms,{open:h,onClose:()=>p(!1),title:"New Quote",wide:!0,children:f.jsx(V,{})}),f.jsx(ms,{open:!!g,onClose:()=>w(null),title:"Edit Quote",wide:!0,children:g&&f.jsx(V,{initial:g})})]})}const Nj={livestock:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",crops:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",finance:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",delivery:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",misc:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"};function Pj(){const{isAdmin:t,currentUser:e}=An(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState("all"),[u,c]=I.useState(!1),[h,p]=I.useState(!1);I.useEffect(()=>{g()},[o]);async function g(){try{const R=await Yu.list({category:o});r(R)}catch{G.error("Failed to load logs")}finally{i(!1)}}async function w(R){p(!0);try{await Yu.create(R,e),G.success("Entry logged"),c(!1),g()}catch(E){G.error(E.message)}finally{p(!1)}}async function C(R){if(confirm("Delete this log entry?"))try{await Yu.delete(R,e),G.success("Entry deleted"),g()}catch(E){G.error(E.message)}}function A(){const[R,E]=I.useState({description:"",amount:"",category:"misc"});return f.jsxs("form",{onSubmit:_=>{_.preventDefault(),w(R)},className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Task Description *"}),f.jsx("textarea",{className:"input",rows:3,placeholder:"e.g. Sold 20 cattle at auction",value:R.description,onChange:_=>E(v=>({...v,description:_.target.value})),required:!0})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Money Amount ($)"}),f.jsx("input",{type:"number",step:"0.01",min:"0",className:"input",placeholder:"Optional",value:R.amount,onChange:_=>E(v=>({...v,amount:_.target.value}))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Category"}),f.jsx("select",{className:"input",value:R.category,onChange:_=>E(v=>({...v,category:_.target.value})),children:h0.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Saving...":"Log Entry"})]})]})}return f.jsxs("div",{children:[f.jsx(fi,{title:"Misc Log",description:"Track completed ranch tasks and activities.",actions:f.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[f.jsx(vo,{size:16})," New Entry"]})}),f.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[f.jsx("button",{onClick:()=>a("all"),className:`btn-sm rounded-full ${o==="all"?"bg-wood-700 text-white":"btn-secondary"}`,children:"All"}),h0.map(R=>f.jsx("button",{onClick:()=>a(R.value),className:`btn-sm rounded-full ${o===R.value?"bg-wood-700 text-white":"btn-secondary"}`,children:R.label},R.value))]}),s?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?f.jsx(kl,{icon:Rg,title:"No log entries",description:"Start logging ranch activities"}):f.jsx("div",{className:"space-y-2",children:n.map(R=>f.jsxs("div",{className:"card px-5 py-4 flex items-center justify-between gap-4",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("span",{className:`badge text-xs ${Nj[R.category]}`,children:R.category}),f.jsx("p",{className:"text-sm font-medium",children:R.description})]}),f.jsxs("p",{className:"text-xs text-wood-400 mt-1",children:[R.userName,"  ",zc(R.createdAt)]})]}),f.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[R.amount!=null&&f.jsx("p",{className:"text-sm font-bold text-green-700 dark:text-green-400",children:or(R.amount)}),t&&f.jsx("button",{onClick:()=>C(R.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:f.jsx(_o,{size:14})})]})]},R.id))}),f.jsx(ms,{open:u,onClose:()=>c(!1),title:"New Log Entry",children:f.jsx(A,{})})]})}function bj(){const{isAdmin:t,currentUser:e}=An(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState(!1),[u,c]=I.useState(null),[h,p]=I.useState(!1);I.useEffect(()=>{g()},[]);async function g(){try{r(await Ls.list())}catch{G.error("Failed to load tasks")}finally{i(!1)}}async function w(v){try{const b=await Ls.toggle(v,e);r(V=>V.map(D=>D.id===v?{...D,...b}:D))}catch{G.error("Failed to update")}}async function C(v){p(!0);try{u?(await Ls.update(u.id,v),G.success("Task updated"),c(null)):(await Ls.create(v,e),G.success("Task added"),a(!1)),g()}catch(b){G.error(b.message)}finally{p(!1)}}async function A(v){if(confirm("Delete this task?"))try{await Ls.delete(v,e),G.success("Task deleted"),g()}catch(b){G.error(b.message)}}function R({initial:v}){const[b,V]=I.useState({title:"",description:"",assignedRole:"",sortOrder:0,...v});return f.jsxs("form",{onSubmit:D=>{D.preventDefault(),C(b)},className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Task Title *"}),f.jsx("input",{className:"input",value:b.title,onChange:D=>V(x=>({...x,title:D.target.value})),required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Description"}),f.jsx("textarea",{className:"input",rows:2,value:b.description||"",onChange:D=>V(x=>({...x,description:D.target.value}))})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Assigned Role"}),f.jsxs("select",{className:"input",value:b.assignedRole||"",onChange:D=>V(x=>({...x,assignedRole:D.target.value||null})),children:[f.jsx("option",{value:"",children:"Anyone"}),f.jsx("option",{value:"admin",children:"Admin"}),f.jsx("option",{value:"member",children:"Member"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Sort Order"}),f.jsx("input",{type:"number",className:"input",value:b.sortOrder,onChange:D=>V(x=>({...x,sortOrder:parseInt(D.target.value)||0}))})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>{a(!1),c(null)},className:"btn-secondary",children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Saving...":v?"Update Task":"Add Task"})]})]})}const E=n.filter(v=>!v.isCompleted),_=n.filter(v=>v.isCompleted);return f.jsxs("div",{children:[f.jsx(fi,{title:"Daily Tasks",description:"Daily ranch checklist. Admins manage tasks, everyone checks them off.",actions:t&&f.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[f.jsx(vo,{size:16})," Add Task"]})}),s?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?f.jsx(kl,{icon:nl,title:"No tasks yet",description:t?"Add daily tasks for the ranch":"No tasks have been added yet"}):f.jsxs("div",{className:"space-y-6",children:[E.length>0&&f.jsxs("div",{children:[f.jsxs("h2",{className:"text-sm font-medium text-wood-500 dark:text-wood-400 mb-3",children:["To Do (",E.length,")"]}),f.jsx("div",{className:"space-y-2",children:E.map(v=>f.jsxs("div",{className:"card px-5 py-4 flex items-start gap-4",children:[f.jsx("button",{onClick:()=>w(v.id),className:"mt-0.5 shrink-0 text-wood-400 hover:text-wood-600",children:f.jsx(zI,{size:20})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium",children:v.title}),v.description&&f.jsx("p",{className:"text-sm text-wood-500 dark:text-wood-400 mt-1",children:v.description}),v.assignedRole&&f.jsx("span",{className:"badge bg-parchment-200 dark:bg-wood-800 text-wood-600 dark:text-wood-300 mt-2 text-xs capitalize",children:v.assignedRole})]}),t&&f.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[f.jsx("button",{onClick:()=>c(v),className:"p-1.5 rounded hover:bg-parchment-200 dark:hover:bg-wood-800",children:f.jsx(Cg,{size:14})}),f.jsx("button",{onClick:()=>A(v.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",children:f.jsx(_o,{size:14})})]})]},v.id))})]}),_.length>0&&f.jsxs("div",{children:[f.jsxs("h2",{className:"text-sm font-medium text-wood-500 dark:text-wood-400 mb-3",children:["Completed (",_.length,")"]}),f.jsx("div",{className:"space-y-2",children:_.map(v=>f.jsxs("div",{className:"card px-5 py-4 flex items-start gap-4 opacity-70",children:[f.jsx("button",{onClick:()=>w(v.id),className:"mt-0.5 shrink-0 text-green-600",children:f.jsx(nl,{size:20})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"font-medium line-through text-wood-400",children:v.title}),f.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-wood-400",children:[v.completedByName&&f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(BI,{size:12}),v.completedByName]}),v.completedAt&&f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(wM,{size:12}),zc(v.completedAt)]})]})]}),t&&f.jsx("button",{onClick:()=>A(v.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 shrink-0",children:f.jsx(_o,{size:14})})]},v.id))})]})]}),f.jsx(ms,{open:o,onClose:()=>a(!1),title:"Add Task",children:f.jsx(R,{})}),f.jsx(ms,{open:!!u,onClose:()=>c(null),title:"Edit Task",children:u&&f.jsx(R,{initial:u})})]})}function Dj(){const{isAdmin:t,currentUser:e}=An(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[o,a]=I.useState(!1),[u,c]=I.useState(!1),[h,p]=I.useState(null),[g,w]=I.useState(null),C=I.useRef();I.useEffect(()=>{A()},[]);async function A(){try{r(await Wh.list())}catch{G.error("Failed to load posters")}finally{i(!1)}}async function R(v){v.preventDefault();const b=v.target.title.value,V=g;if(!V){G.error("Please select an image");return}c(!0);try{await Wh.upload(V,b,e),G.success("Poster uploaded"),a(!1),w(null),A()}catch(D){G.error(D.message)}finally{c(!1)}}async function E(v){if(confirm("Delete this poster?"))try{await Wh.delete(v,e),G.success("Poster deleted"),A()}catch(b){G.error(b.message)}}function _(v){navigator.clipboard.writeText(v.imageUrl),p(v.id),G.success("URL copied to clipboard"),setTimeout(()=>p(null),2e3)}return f.jsxs("div",{children:[f.jsx(fi,{title:"Posters",description:"Ranch poster gallery. Right-click images to copy address for RedM.",actions:t&&f.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[f.jsx(vo,{size:16})," Upload Poster"]})}),s?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):n.length===0?f.jsx(kl,{icon:jI,title:"No posters yet",description:t?"Upload ranch posters for the gallery":"No posters have been uploaded yet"}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(v=>f.jsxs("div",{className:"card overflow-hidden group",children:[f.jsxs("div",{className:"aspect-[4/3] bg-parchment-100 dark:bg-wood-800 relative",children:[f.jsx("img",{src:v.imageUrl,alt:v.title,className:"w-full h-full object-cover",loading:"lazy"}),f.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("h3",{className:"font-semibold text-sm",children:v.title}),f.jsx("p",{className:"text-xs text-wood-400 mt-1",children:Ud(v.createdAt)}),f.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[f.jsxs("button",{onClick:()=>_(v),className:"btn-secondary btn-sm flex-1",children:[h===v.id?f.jsx(_M,{size:14}):f.jsx(EM,{size:14}),h===v.id?"Copied!":"Copy URL"]}),t&&f.jsx("button",{onClick:()=>E(v.id),className:"btn-ghost btn-sm text-red-500",children:f.jsx(_o,{size:14})})]})]})]},v.id))}),f.jsx(ms,{open:o,onClose:()=>{a(!1),w(null)},title:"Upload Poster",children:f.jsxs("form",{onSubmit:R,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Title *"}),f.jsx("input",{name:"title",className:"input",placeholder:"Poster title",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label",children:"Image *"}),f.jsxs("div",{onClick:()=>{var v;return(v=C.current)==null?void 0:v.click()},className:"border-2 border-dashed border-parchment-300 dark:border-wood-700 rounded-lg p-8 text-center cursor-pointer hover:border-wood-500 transition-colors",children:[f.jsx(OM,{size:32,className:"mx-auto text-wood-400 mb-2"}),g?f.jsx("p",{className:"text-sm text-wood-700 dark:text-parchment-200 font-medium",children:g.name}):f.jsxs(f.Fragment,{children:[f.jsx("p",{className:"text-sm text-wood-500",children:"Click to select an image"}),f.jsx("p",{className:"text-xs text-wood-400 mt-1",children:"PNG, JPG, GIF up to 10MB"})]})]}),f.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:v=>w(v.target.files[0])})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[f.jsx("button",{type:"button",onClick:()=>{a(!1),w(null)},className:"btn-secondary",children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"Uploading...":"Upload"})]})]})})]})}function Oj(){const{isAdmin:t,profile:e}=An(),[n,r]=I.useState([]),[s,i]=I.useState(!0);I.useEffect(()=>{o()},[]);async function o(){try{r(await qI.list())}catch{G.error("Failed to load members")}finally{i(!1)}}async function a(u,c){const h=n.find(g=>g.id===u);if(confirm(`${c==="admin"?"Promote":"Demote"} ${h.characterName} to ${c}?`))try{await yo(Qe(oe,"users",u),{role:c}),G.success(`${h.characterName} is now ${c}`),o()}catch(g){G.error(g.message)}}return t?f.jsxs("div",{children:[f.jsx(fi,{title:"Admin Panel",description:"Manage ranch members and their roles."}),s?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx("div",{className:"w-8 h-8 border-4 border-wood-300 border-t-wood-700 rounded-full animate-spin"})}):f.jsx("div",{className:"card overflow-hidden",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-parchment-200 dark:border-wood-800",children:[f.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Character Name"}),f.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Username"}),f.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Role"}),f.jsx("th",{className:"text-left py-3 px-5 font-medium text-wood-500 dark:text-wood-400",children:"Joined"}),f.jsx("th",{className:"py-3 px-5"})]})}),f.jsx("tbody",{className:"divide-y divide-parchment-100 dark:divide-wood-800",children:n.map(u=>f.jsxs("tr",{className:"hover:bg-parchment-50 dark:hover:bg-wood-900/50",children:[f.jsx("td",{className:"py-3 px-5",children:f.jsxs("div",{className:"flex items-center gap-2",children:[u.role==="admin"?f.jsx(FI,{size:16,className:"text-amber-600"}):f.jsx(LM,{size:16,className:"text-wood-400"}),f.jsx("span",{className:"font-medium",children:u.characterName||u.displayName})]})}),f.jsx("td",{className:"py-3 px-5 text-wood-500",children:u.username||""}),f.jsx("td",{className:"py-3 px-5",children:f.jsx("span",{className:`badge ${u.role==="admin"?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-parchment-200 text-wood-600 dark:bg-wood-800 dark:text-wood-300"}`,children:u.role})}),f.jsx("td",{className:"py-3 px-5 text-wood-400 text-xs",children:Ud(u.createdAt)}),f.jsxs("td",{className:"py-3 px-5",children:[u.id!==e.id&&f.jsxs("select",{className:"input w-auto text-xs",value:u.role,onChange:c=>a(u.id,c.target.value),children:[f.jsx("option",{value:"member",children:"Member"}),f.jsx("option",{value:"admin",children:"Admin"})]}),u.id===e.id&&f.jsx("span",{className:"text-xs text-wood-400 italic",children:"You"})]})]},u.id))})]})})]}):f.jsx(Em,{to:"/",replace:!0})}function Lj(){return f.jsxs(YC,{children:[f.jsx(Dn,{path:"/login",element:f.jsx(UM,{})}),f.jsxs(Dn,{element:f.jsx(jM,{}),children:[f.jsx(Dn,{path:"/",element:f.jsx(BM,{})}),f.jsx(Dn,{path:"/orders",element:f.jsx(Rj,{})}),f.jsx(Dn,{path:"/quotes",element:f.jsx(Aj,{})}),f.jsx(Dn,{path:"/logs",element:f.jsx(Pj,{})}),f.jsx(Dn,{path:"/todos",element:f.jsx(bj,{})}),f.jsx(Dn,{path:"/posters",element:f.jsx(Dj,{})}),f.jsx(Dn,{path:"/admin",element:f.jsx(Oj,{})})]})]})}Yh.createRoot(document.getElementById("root")).render(f.jsx(Se.StrictMode,{children:f.jsx(sR,{children:f.jsx(fM,{children:f.jsxs(hM,{children:[f.jsx(Lj,{}),f.jsx(XR,{position:"top-right",toastOptions:{duration:3e3,style:{borderRadius:"12px",fontSize:"14px"}}})]})})})}));
